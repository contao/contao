/*! For license information please see backend.48b9a0c2.js.LICENSE.txt */
(()=>{var e={520:(e,t,n)=>{var r={"./clipboard-controller.js":849,"./color-scheme-controller.js":606,"./image-size-controller.js":650,"./jump-targets-controller.js":192,"./limit-height-controller.js":146,"./metawizard-controller.js":63,"./scroll-offset-controller.js":102,"./toggle-fieldset-controller.js":254,"./toggle-navigation-controller.js":272,"./toggle-nodes-controller.js":521};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=520},891:(e,t,n)=>{"use strict";n.d(t,{lg:()=>Z,xI:()=>ce});class r{constructor(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=function(e){if("immediatePropagationStopped"in e)return e;{const{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}(e);for(const e of this.bindings){if(t.immediatePropagationStopped)break;e.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort(((e,t)=>{const n=e.index,r=t.index;return n<r?-1:n>r?1:0}))}}class i{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((e=>e.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((e=>e.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((e,t)=>e.concat(Array.from(t.values()))),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,n={}){this.application.handleError(e,`Error ${t}`,n)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:n,eventOptions:r}=e,i=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(n,r);i.delete(o),0==i.size&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:n,eventOptions:r}=e;return this.fetchEventListener(t,n,r)}fetchEventListener(e,t,n){const r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,n);let o=r.get(i);return o||(o=this.createEventListener(e,t,n),r.set(i,o)),o}createEventListener(e,t,n){const i=new r(e,t,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const n=[e];return Object.keys(t).sort().forEach((e=>{n.push(`${t[e]?"":"!"}${e}`)})),n.join(":")}}const o={stop:({event:e,value:t})=>(t&&e.stopPropagation(),!0),prevent:({event:e,value:t})=>(t&&e.preventDefault(),!0),self:({event:e,value:t,element:n})=>!t||n===e.target},s=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function a(e){return"window"==e?window:"document"==e?document:void 0}function l(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function c(e){return l(e.replace(/--/g,"-").replace(/__/g,"_"))}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function d(e){return e.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}function h(e){return null!=e}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const p=["meta","ctrl","alt","shift"];class g{constructor(e,t,n,r){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){const t=e.tagName.toLowerCase();if(t in m)return m[t](e)}(e)||v("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||v("missing identifier"),this.methodName=n.methodName||v("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,function(e){const t=e.trim().match(s)||[];let n=t[2],r=t[3];return r&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${r}`,r=""),{eventTarget:a(t[4]),eventName:n,eventOptions:t[7]?(i=t[7],i.split(":").reduce(((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)})),{})):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||r};var i}(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const n=t.filter((e=>!p.includes(e)))[0];return!!n&&(f(this.keyMappings,n)||v(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==e.key.toLowerCase())}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:n,value:r}of Array.from(this.element.attributes)){const i=n.match(t),o=i&&i[1];o&&(e[l(o)]=y(r))}return e}get eventTargetName(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[n,r,i,o]=p.map((e=>t.includes(e)));return e.metaKey!==n||e.ctrlKey!==r||e.altKey!==i||e.shiftKey!==o}}const m={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:e=>"submit"==e.getAttribute("type")?"click":"input",select:()=>"change",textarea:()=>"input"};function v(e){throw new Error(e)}function y(e){try{return JSON.parse(e)}catch(t){return e}}class b{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:r}=this.context;let i=!0;for(const[o,s]of Object.entries(this.eventOptions))if(o in n){const a=n[o];i=i&&a({name:o,value:s,event:e,element:t,controller:r})}return i}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:n}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:n,action:this.methodName})}catch(t){const{identifier:n,controller:r,element:i,index:o}=this,s={identifier:n,controller:r,element:i,index:o,event:e};this.context.handleError(t,`invoking action "${this.action}"`,s)}}willBeInvokedByEvent(e){const t=e.target;return!(e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e))&&(!(e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e))&&(this.element===t||(t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element))))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class w{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.processTree(e,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const e=this.elementFromNode(t);e&&this.elementIsActive(e)&&this.processTree(e,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const n of this.matchElementsInTree(e))t.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class E{constructor(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new w(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function O(e,t,n){S(e,t).add(n)}function k(e,t,n){S(e,t).delete(n),function(e,t){const n=e.get(t);null!=n&&0==n.size&&e.delete(t)}(e,t)}function S(e,t){let n=e.get(t);return n||(n=new Set,e.set(t,n)),n}class x{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e.concat(Array.from(t))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((e,t)=>e+t.size),0)}add(e,t){O(this.valuesByKey,e,t)}delete(e,t){k(this.valuesByKey,e,t)}has(e,t){const n=this.valuesByKey.get(e);return null!=n&&n.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some((t=>t.has(e)))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter((([t,n])=>n.has(e))).map((([e,t])=>e))}}class C{constructor(e,t,n,r){this._selector=t,this.details=r,this.elementObserver=new w(e,this),this.delegate=n,this.matchesByElement=new x}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const n=e.matches(t);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(e,this.details):n}return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const n=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(t)).filter((e=>this.matchElement(e)));return n.concat(r)}return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const n of t)this.selectorUnmatched(e,n)}elementAttributeChanged(e,t){const{selector:n}=this;if(n){const t=this.matchElement(e),r=this.matchesByElement.has(n,e);t&&!r?this.selectorMatched(e,n):!t&&r&&this.selectorUnmatched(e,n)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class A{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((e=>this.processMutations(e)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const n=this.delegate.getStringMapKeyForAttribute(e);if(null!=n){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);const r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,n,t),null==r){const t=this.stringMap.get(e);this.stringMap.delete(e),t&&this.stringMapKeyRemoved(n,e,t)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,n)}stringMapKeyRemoved(e,t,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((e=>e.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class T{constructor(e,t,n){this.attributeObserver=new E(e,t,this),this.delegate=n,this.tokensByElement=new x}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,n]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach((e=>this.tokenMatched(e)))}tokensUnmatched(e){e.forEach((e=>this.tokenUnmatched(e)))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),r=function(e,t){const n=Math.max(e.length,t.length);return Array.from({length:n},((n,r)=>[e[r],t[r]]))}(t,n).findIndex((([e,t])=>{return r=t,!((n=e)&&r&&n.index==r.index&&n.content==r.content);var n,r}));return-1==r?[[],[]]:[t.slice(r),n.slice(r)]}readTokensForElement(e){const t=this.attributeName;return function(e,t,n){return e.trim().split(/\s+/).filter((e=>e.length)).map(((e,r)=>({element:t,attributeName:n,content:e,index:r})))}(e.getAttribute(t)||"",e,t)}}class j{constructor(e,t,n){this.tokenListObserver=new T(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))}tokenUnmatched(e){const{element:t}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}}class _{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new j(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new b(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach((e=>this.delegate.bindingDisconnected(e,!0))),this.bindingsByAction.clear()}parseValueForToken(e){const t=g.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class M{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new A(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const n=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,t,n){const r=this.valueDescriptorNameMap[t];null!==e&&(null===n&&(n=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,n))}stringMapKeyRemoved(e,t,n){const r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),n):this.invokeChangedCallback(e,r.writer(r.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:n,writer:r}of this.valueDescriptors)null==n||this.controller.data.has(e)||this.invokeChangedCallback(t,r(n),void 0)}invokeChangedCallback(e,t,n){const r=`${e}Changed`,i=this.receiver[r];if("function"==typeof i){const r=this.valueDescriptorNameMap[e];try{const e=r.reader(t);let o=n;n&&(o=r.reader(n)),i.call(this.receiver,e,o)}catch(e){throw e instanceof TypeError&&(e.message=`Stimulus Value "${this.context.identifier}.${r.name}" - ${e.message}`),e}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map((t=>e[t]))}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach((t=>{const n=this.valueDescriptorMap[t];e[n.name]=n})),e}hasValue(e){const t=`has${u(this.valueDescriptorNameMap[e].name)}`;return this.receiver[t]}}class P{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new x}start(){this.tokenListObserver||(this.tokenListObserver=new T(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var n;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(e,t))))}disconnectTarget(e,t){var n;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(e,t))))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function F(e,t){const n=N(e);return Array.from(n.reduce(((e,n)=>(function(e,t){const n=e[t];return Array.isArray(n)?n:[]}(n,t).forEach((t=>e.add(t))),e)),new Set))}function $(e,t){return N(e).reduce(((e,n)=>(e.push(...function(e,t){const n=e[t];return n?Object.keys(n).map((e=>[e,n[e]])):[]}(n,t)),e)),[])}function N(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}class L{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new x,this.outletElementsByName=new x,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach((e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)})),this.started=!0,this.dependentContexts.forEach((e=>e.refresh())))}refresh(){this.selectorObserverMap.forEach((e=>e.refresh())),this.attributeObserverMap.forEach((e=>e.refresh()))}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach((e=>e.stop())),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach((e=>e.stop())),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:n}){const r=this.getOutlet(e,n);r&&this.connectOutlet(r,e,n)}selectorUnmatched(e,t,{outletName:n}){const r=this.getOutletFromMap(e,n);r&&this.disconnectOutlet(r,e,n)}selectorMatchElement(e,{outletName:t}){const n=this.selector(t),r=this.hasOutlet(e,t),i=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return!!n&&(r&&i&&e.matches(n))}elementMatchedAttribute(e,t){const n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(e,t){const n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(e,t){const n=this.getOutletNameFromOutletAttributeName(t);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,t),null===(r=this.selectorObserverMap.get(n))||void 0===r||r.pause((()=>this.delegate.outletConnected(e,t,n))))}disconnectOutlet(e,t,n){var r;this.outletElementsByName.has(n,t)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,t),null===(r=this.selectorObserverMap.get(n))||void 0===r||r.pause((()=>this.delegate.outletDisconnected(e,t,n))))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),n=new C(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,n),n.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),n=new E(this.scope.element,t,this);this.attributeObserverMap.set(e,n),n.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find((t=>this.attributeNameForOutletName(t)===e))}get outletDependencies(){const e=new x;return this.router.modules.forEach((t=>{F(t.definition.controllerConstructor,"outlets").forEach((n=>e.add(n,t.identifier)))})),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter((t=>e.includes(t.identifier)))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find((t=>t.element===e))}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class B{constructor(e,t){this.logDebugActivity=(e,t={})=>{const{identifier:n,controller:r,element:i}=this;t=Object.assign({identifier:n,controller:r,element:i},t),this.application.logDebugActivity(this.identifier,e,t)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new _(this,this.dispatcher),this.valueObserver=new M(this,this.controller),this.targetObserver=new P(this,this),this.outletObserver=new L(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(e){this.handleError(e,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,n={}){const{identifier:r,controller:i,element:o}=this;n=Object.assign({identifier:r,controller:i,element:o},n),this.application.handleError(e,`Error ${t}`,n)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,n){this.invokeControllerMethod(`${c(n)}OutletConnected`,e,t)}outletDisconnected(e,t,n){this.invokeControllerMethod(`${c(n)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const n=this.controller;"function"==typeof n[e]&&n[e](...t)}}function R(e){return function(e,t){const n=I(e),r=function(e,t){return D(t).reduce(((n,r)=>{const i=function(e,t,n){const r=Object.getOwnPropertyDescriptor(e,n);if(!r||!("value"in r)){const e=Object.getOwnPropertyDescriptor(t,n).value;return r&&(e.get=r.get||e.get,e.set=r.set||e.set),e}}(e,t,r);return i&&Object.assign(n,{[r]:i}),n}),{})}(e.prototype,t);return Object.defineProperties(n.prototype,r),n}(e,function(e){const t=F(e,"blessings");return t.reduce(((t,n)=>{const r=n(e);for(const e in r){const n=t[e]||{};t[e]=Object.assign(n,r[e])}return t}),{})}(e))}const D="function"==typeof Object.getOwnPropertySymbols?e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)]:Object.getOwnPropertyNames,I=(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return function(){const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t}(),e}catch(e){return e=>class extends e{}}})();class q{constructor(e,t){this.application=e,this.definition=function(e){return{identifier:e.identifier,controllerConstructor:R(e.controllerConstructor)}}(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new B(this,e),this.contextsByScope.set(e,t)),t}}class V{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return t.match(/[^\s]+/g)||[]}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class z{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${d(e)}`}}class K{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,n){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(n,e))}}function U(e,t){return`[${e}~="${t}"]`}class W{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findTarget(t)||this.findLegacyTarget(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllTargets(t),...this.findAllLegacyTargets(t)]),[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){return U(this.schema.targetAttributeForScope(this.identifier),e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map((t=>this.deprecate(t,e)))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return U(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:n}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${n}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class H{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return null!=this.find(e)}find(...e){return e.reduce(((e,t)=>e||this.findOutlet(t)),void 0)}findAll(...e){return e.reduce(((e,t)=>[...e,...this.findAllOutlets(t)]),[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter((n=>this.matchesElement(n,e,t)))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter((n=>this.matchesElement(n,e,t)))}matchesElement(e,t,n){const r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(n)}}class Q{constructor(e,t,n,r){this.targets=new W(this),this.classes=new V(this),this.data=new z(this),this.containsElement=e=>e.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=n,this.guide=new K(r),this.outlets=new H(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return U(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Q(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class X{constructor(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new j(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:n}=e;return this.parseValueForElementAndIdentifier(t,n)}parseValueForElementAndIdentifier(e,t){const n=this.fetchScopesByIdentifierForElement(e);let r=n.get(t);return r||(r=this.delegate.createScopeForElementAndIdentifier(e,t),n.set(t,r)),r}elementMatchedValue(e,t){const n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class G{constructor(e){this.application=e,this.scopeObserver=new X(this.element,this.schema,this),this.scopesByIdentifier=new x,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((e,t)=>e.concat(t.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new q(this.application,e);this.connectModule(t);const n=e.controllerConstructor.afterLoad;n&&n.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const n=this.modulesByIdentifier.get(t);if(n)return n.contexts.find((t=>t.element==e))}proposeToConnectScopeForElementAndIdentifier(e,t){const n=this.scopeObserver.parseValueForElementAndIdentifier(e,t);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,n){this.application.handleError(e,t,n)}createScopeForElementAndIdentifier(e,t){return new Q(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e);this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.connectContextForScope(t)))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier);this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((t=>e.disconnectContextForScope(t)))}}const J={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:e=>`data-${e}-target`,outletAttributeForScope:(e,t)=>`data-${e}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Y("abcdefghijklmnopqrstuvwxyz".split("").map((e=>[e,e])))),Y("0123456789".split("").map((e=>[e,e]))))};function Y(e){return e.reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n})),{})}class Z{constructor(e=document.documentElement,t=J){this.logger=console,this.debug=!1,this.logDebugActivity=(e,t,n={})=>{this.debug&&this.logFormattedMessage(e,t,n)},this.element=e,this.schema=t,this.dispatcher=new i(this),this.router=new G(this),this.actionDescriptorFilters=Object.assign({},o)}static start(e,t){const n=new this(e,t);return n.start(),n}async start(){await new Promise((e=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>e())):e()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>{e.controllerConstructor.shouldLoad&&this.router.loadDefinition(e)}))}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach((e=>this.router.unloadIdentifier(e)))}get controllers(){return this.router.contexts.map((e=>e.controller))}getControllerForElementAndIdentifier(e,t){const n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null}handleError(e,t,n){var r;this.logger.error("%s\n\n%o\n\n%o",t,e,n),null===(r=window.onerror)||void 0===r||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}function ee(e,t,n){return e.application.getControllerForElementAndIdentifier(t,n)}function te(e,t,n){let r=ee(e,t,n);return r||(e.application.router.proposeToConnectScopeForElementAndIdentifier(t,n),r=ee(e,t,n),r||void 0)}function ne([e,t],n){return function(e){const{token:t,typeDefinition:n}=e,r=`${d(t)}-value`,i=function(e){const{controller:t,token:n,typeDefinition:r}=e,i={controller:t,token:n,typeObject:r},o=function(e){const{controller:t,token:n,typeObject:r}=e,i=h(r.type),o=h(r.default),s=i&&o,a=i&&!o,l=!i&&o,c=re(r.type),u=ie(e.typeObject.default);if(a)return c;if(l)return u;if(c!==u){throw new Error(`The specified default value for the Stimulus Value "${t?`${t}.${n}`:n}" must match the defined type "${c}". The provided default value of "${r.default}" is of type "${u}".`)}if(s)return c}(i),s=ie(r),a=re(r),l=o||s||a;if(l)return l;const c=t?`${t}.${r}`:n;throw new Error(`Unknown value type "${c}" for "${n}" value`)}(e);return{type:i,key:r,name:l(r),get defaultValue(){return function(e){const t=re(e);if(t)return oe[t];const n=f(e,"default"),r=f(e,"type"),i=e;if(n)return i.default;if(r){const{type:e}=i,t=re(e);if(t)return oe[t]}return e}(n)},get hasCustomDefaultValue(){return void 0!==ie(n)},reader:se[i],writer:ae[i]||ae.default}}({controller:n,token:e,typeDefinition:t})}function re(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ie(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}const oe={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},se={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${e}" of type "${ie(t)}"`);return t},boolean:e=>!("0"==e||"false"==String(e).toLowerCase()),number:e=>Number(e.replace(/_/g,"")),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${e}" of type "${ie(t)}"`);return t},string:e=>e},ae={default:function(e){return`${e}`},array:le,object:le};function le(e){return JSON.stringify(e)}class ce{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:n={},prefix:r=this.identifier,bubbles:i=!0,cancelable:o=!0}={}){const s=new CustomEvent(r?`${r}:${e}`:e,{detail:n,bubbles:i,cancelable:o});return t.dispatchEvent(s),s}}ce.blessings=[function(e){return F(e,"classes").reduce(((e,t)=>{return Object.assign(e,(n=t,{[`${n}Class`]:{get(){const{classes:e}=this;if(e.has(n))return e.get(n);{const t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${u(n)}Class`]:{get(){return this.classes.has(n)}}}));var n}),{})},function(e){return F(e,"targets").reduce(((e,t)=>{return Object.assign(e,(n=t,{[`${n}Target`]:{get(){const e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${u(n)}Target`]:{get(){return this.targets.has(n)}}}));var n}),{})},function(e){const t=$(e,"values"),n={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const n=ne(t,this.identifier),r=this.data.getAttributeNameForKey(n.key);return Object.assign(e,{[r]:n})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,function(e,t){const n=ne(e,t),{key:r,name:i,reader:o,writer:s}=n;return{[i]:{get(){const e=this.data.get(r);return null!==e?o(e):n.defaultValue},set(e){void 0===e?this.data.delete(r):this.data.set(r,s(e))}},[`has${u(i)}`]:{get(){return this.data.has(r)||n.hasCustomDefaultValue}}}}(t))),n)},function(e){return F(e,"outlets").reduce(((e,t)=>Object.assign(e,function(e){const t=c(e);return{[`${t}Outlet`]:{get(){const t=this.outlets.find(e),n=this.outlets.getSelectorForOutletName(e);if(t){const n=te(this,t,e);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${t}Outlets`]:{get(){const t=this.outlets.findAll(e);return t.length>0?t.map((t=>{const n=te(this,t,e);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`,t)})).filter((e=>e)):[]}},[`${t}OutletElement`]:{get(){const t=this.outlets.find(e),n=this.outlets.getSelectorForOutletName(e);if(t)return t;throw new Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(e)}},[`has${u(t)}Outlet`]:{get(){return this.outlets.has(e)}}}}(t))),{})}],ce.targets=[],ce.outlets=[],ce.values={}},849:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>f});var u,d,h,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,(r=[{key:"write",value:function(){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(this.contentValue).catch(this.clipboardFallback.bind(this)):this.clipboardFallback()}},{key:"clipboardFallback",value:function(){var e=document.createElement("input");e.value=this.contentValue,document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e)}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);u=f,d="values",h={content:String},(d=c(d))in u?Object.defineProperty(u,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[d]=h},606:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(891);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function s(e,t,n){return t=l(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var h=function(){var e=localStorage.getItem("contao--prefers-dark");return null===e?!!window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===e},f=function(){document.documentElement.dataset.colorScheme=h()?"dark":"light"};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f),f();var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(){this.toggle=this.toggle.bind(this),this.setLabel=this.setLabel.bind(this)}},{key:"connect",value:function(){this.element.addEventListener("click",this.toggle),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.setLabel),this.setLabel()}},{key:"disconnect",value:function(){this.element.removeEventListener("click",this.toggle)}},{key:"toggle",value:function(e){e.preventDefault();var t=!h();t===window.matchMedia("(prefers-color-scheme: dark)").matches?localStorage.removeItem("contao--prefers-dark"):localStorage.setItem("contao--prefers-dark",String(t)),f(),setTimeout(this.setLabel,300)}},{key:"setLabel",value:function(){if(this.hasLabelTarget){var e=this.i18nValue[h()?"light":"dark"];this.labelTarget.title=e,this.labelTarget.innerText=e}}}],r&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.xI);u(p,"targets",["label"]),u(p,"values",{i18n:{type:Object,default:{light:"Disable dark mode",dark:"Enable dark mode"}}})},650:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>f});var u,d,h,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.updateWizard=this.updateWizard.bind(this),this.openModal=this.openModal.bind(this)}},{key:"connect",value:function(){this.select=this.element.querySelector("select"),this.button=document.createElement("button"),this.button.type="button",this.button.title="",this.buttonImage=document.createElement("img"),this.button.append(this.buttonImage),this.element.parentNode.classList.add("wizard"),this.element.after(this.button),this.select.addEventListener("change",this.updateWizard),this.button.addEventListener("click",this.openModal),this.updateWizard()}},{key:"disconnect",value:function(){this.element.parentNode.classList.remove("wizard"),this.select.removeEventListener("change",this.updateWizard),this.buttonImage.remove(),this.button.remove()}},{key:"updateWizard",value:function(){this.canEdit()?(this.button.title=this.configValue.title,this.button.disabled=!1,this.buttonImage.src=this.configValue.icon):(this.button.title="",this.button.disabled=!0,this.buttonImage.src=this.configValue.iconDisabled)}},{key:"openModal",value:function(){Backend.openModalIframe({title:this.configValue.title,url:"".concat(this.configValue.href,"&id=").concat(this.select.value)})}},{key:"canEdit",value:function(){return this.configValue.ids.includes(Number(this.select.value))}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);u=f,d="values",h={config:Object},(d=c(d))in u?Object.defineProperty(u,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[d]=h},192:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>f});var u,d,h,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,(r=[{key:"connect",value:function(){this.rebuildNavigation(),this.connected=!0}},{key:"sectionTargetConnected",value:function(){this.connected&&this.rebuildNavigation()}},{key:"rebuildNavigation",value:function(){var e=this;if(this.hasNavigationTarget){var t=document.createElement("ul");this.sectionTargets.forEach((function(n){var r=document.createElement("button");r.innerText=n.getAttribute("data-".concat(e.identifier,"-label-value")),r.addEventListener("click",(function(t){t.preventDefault(),e.dispatch("scrollto",{target:n}),n.scrollIntoView()}));var i=document.createElement("li");i.append(r),t.append(i)})),this.navigationTarget.replaceChildren(t)}}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);u=f,h=["navigation","section"],(d=c(d="targets"))in u?Object.defineProperty(u,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[d]=h},146:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function o(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(null,arguments)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>h});var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(){var e,n,r,i,o;(e=t,n="initialize",r=this,o=a(l(1&(i=3)?e.prototype:e),n,r),2&i?function(e){return o.apply(r,e)}:o)([]),this.togglerMap=new WeakMap,this.nextId=1}},{key:"operationTargetConnected",value:function(){this.updateOperation()}},{key:"nodeTargetConnected",value:function(e){var t=this,n=window.getComputedStyle(e,null),r=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),i=e.clientHeight-r;if(!(this.maxValue>i)){e.id||(e.id="limit-height-".concat(this.nextId++)),e.style.overflow="hidden",e.style.maxHeight="".concat(this.maxValue,"px");var o=document.createElement("button");o.setAttribute("type","button"),o.title=this.expandValue,o.innerHTML="<span>...</span>",o.classList.add("unselectable"),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls",e.id),o.addEventListener("click",(function(n){n.preventDefault(),t.toggle(e),t.updateOperation(n)}));var s=document.createElement("div");s.classList.add("limit_toggler"),s.append(o),this.togglerMap.set(e,s),e.append(s),this.updateOperation()}}},{key:"nodeTargetDisconnected",value:function(e){this.togglerMap.has(e)&&(this.togglerMap.get(e).remove(),this.togglerMap.delete(e),e.style.overflow="",e.style.maxHeight="")}},{key:"toggle",value:function(e){""===e.style.maxHeight?this.collapse(e):this.expand(e)}},{key:"expand",value:function(e){if(this.togglerMap.has(e)){e.style.maxHeight="";var t=this.togglerMap.get(e).querySelector("button");t.title=this.collapseValue,t.setAttribute("aria-expanded","true")}}},{key:"collapse",value:function(e){if(this.togglerMap.has(e)){e.style.maxHeight="".concat(this.maxValue,"px");var t=this.togglerMap.get(e).querySelector("button");t.title=this.expandValue,t.setAttribute("aria-expanded","false")}}},{key:"toggleAll",value:function(e){var t=this;e.preventDefault();var n=this.hasExpanded()^e.altKey;this.nodeTargets.forEach((function(e){n?t.collapse(e):t.expand(e)})),this.updateOperation(e)}},{key:"keypress",value:function(e){this.updateOperation(e)}},{key:"updateOperation",value:function(e){var t=this;if(this.hasOperationTarget){var n=!!this.nodeTargets.find((function(e){return t.togglerMap.has(e)})),r=this.hasExpanded();this.operationTarget.style.display=n?"":"none",this.operationTarget.setAttribute("aria-controls",this.nodeTargets.map((function(e){return e.id})).join(" ")),this.operationTarget.setAttribute("aria-expanded",r?"true":"false"),r^(!!e&&e.altKey)?(this.operationTarget.innerText=this.collapseAllValue,this.operationTarget.title=this.collapseAllTitleValue):(this.operationTarget.innerText=this.expandAllValue,this.operationTarget.title=this.expandAllTitleValue)}}},{key:"hasExpanded",value:function(){var e=this;return!!this.nodeTargets.find((function(t){return e.togglerMap.has(t)&&""===t.style.maxHeight}))}}],r&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);u(h,"values",{max:Number,expand:String,collapse:String,expandAll:String,expandAllTitle:String,collapseAll:String,collapseAllTitle:String}),u(h,"targets",["operation","node"])},63:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>f});var u,d,h,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,(r=[{key:"delete",value:function(){this.inputTargets.forEach((function(e){e.value=""}))}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);u=f,h=["input"],(d=c(d="targets"))in u?Object.defineProperty(u,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):u[d]=h},102:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>d});var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,s=[{key:"afterLoad",value:function(e,t){var n=function(){return new Promise((function(n,r){var i=t.getControllerForElementAndIdentifier(document.documentElement,e);if(i)n(i);else{var o=t.schema.controllerAttribute;document.documentElement.setAttribute(o,"".concat(document.documentElement.getAttribute(o)||""," ").concat(e)),setTimeout((function(){var i=t.getControllerForElementAndIdentifier(document.documentElement,e);i&&n(i)||r(i)}),100)}}))};window.Backend&&!window.Backend.initScrollOffset&&(window.Backend.initScrollOffset=function(){console.warn("Backend.initScrollOffset() is deprecated. Please use the Stimulus controller instead."),n()}),window.Backend&&!window.Backend.getScrollOffset&&(window.Backend.getScrollOffset=function(){console.warn("Backend.getScrollOffset() is deprecated. Please use the Stimulus controller instead."),n().then((function(e){return e.discard()}))})}}],(r=[{key:"initialize",value:function(){this.store=this.store.bind(this)}},{key:"connect",value:function(){this.offset&&(window.scrollTo({top:this.offset,behavior:this.behaviorValue,block:this.blockValue}),this.offset=null)}},{key:"scrollToTargetConnected",value:function(){this.scrollToTarget.scrollIntoView({behavior:this.behaviorValue,block:this.blockValue})}},{key:"autoFocusTargetConnected",value:function(){if(!this.offset&&!this.autoFocus){var e=this.autoFocusTarget;e.disabled||e.readonly||!e.offsetWidth||!e.offsetHeight||e.closest(".chzn-search")||e.autocomplete&&"off"!==e.autocomplete||(this.autoFocus=!0,e.focus())}}},{key:"store",value:function(){this.offset=this.element.scrollTop}},{key:"discard",value:function(){this.offset=null}},{key:"offset",get:function(){var e=window.sessionStorage.getItem(this.sessionKeyValue);return e?parseInt(e):null},set:function(e){null==e?window.sessionStorage.removeItem(this.sessionKeyValue):window.sessionStorage.setItem(this.sessionKeyValue,String(e))}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);c(d,"targets",["scrollTo","autoFocus"]),c(d,"values",{sessionKey:{type:String,default:"contao_backend_offset"},behavior:{type:String,default:"instant"},block:{type:String,default:"center"}})},254:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>d});var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,s=[{key:"afterLoad",value:function(e,t){var n=function(t,n,r){var i=t.parentNode;i.dataset.controller="".concat(i.dataset.controller||""," ").concat(e),i.setAttribute("data-".concat(e,"-id-value"),n),i.setAttribute("data-".concat(e,"-table-value"),r),i.setAttribute("data-".concat(e,"-collapsed-class"),"collapsed"),t.setAttribute("tabindex",0),t.setAttribute("data-action","click->".concat(e,"#toggle keydown.enter->").concat(e,"#toggle keydown.space->").concat(e,"#prevent:prevent keyup.space->").concat(e,"#toggle:prevent"))},r=function(){document.querySelectorAll("legend[data-toggle-fieldset]").forEach((function(t){window.console&&console.warn('Using the "data-toggle-fieldset" attribute on fieldset legends is deprecated and will be removed in Contao 6. Apply the "'.concat(e,'" Stimulus controller instead.'));var r=JSON.parse(t.getAttribute("data-toggle-fieldset")),i=r.id,o=r.table;n(t,i,o)})),AjaxRequest.toggleFieldset=function(r,i,o){var s=r.parentNode;t.getControllerForElementAndIdentifier(s,e)||(window.console&&console.warn("Using AjaxRequest.toggleFieldset() is deprecated and will be removed in Contao 6. Apply the Stimulus actions instead."),n(r,i,o),setTimeout((function(){t.getControllerForElementAndIdentifier(s,e).toggle()}),100))}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}}],(r=[{key:"connect",value:function(){this.element.querySelectorAll("label.error, label.mandatory").length?this.element.classList.remove(this.collapsedClass):this.element.classList.contains("hide")&&(window.console&&console.warn('Using class "hide" on a fieldset is deprecated and will be removed in Contao 6. Use class "'.concat(this.collapsedClass,'" instead.')),this.element.classList.add(this.collapsedClass)),this.element.classList.contains(this.collapsedClass)?this.setAriaExpanded(!1):this.setAriaExpanded(!0)}},{key:"toggle",value:function(){this.element.classList.contains(this.collapsedClass)?(this.open(),this.setAriaExpanded(!0)):(this.close(),this.setAriaExpanded(!1))}},{key:"open",value:function(){this.element.classList.contains(this.collapsedClass)&&(this.element.classList.remove(this.collapsedClass),this.storeState(1))}},{key:"close",value:function(){if(!this.element.classList.contains(this.collapsedClass)){for(var e=this.element.closest("form"),t=this.element.querySelectorAll("[required]"),n=!0,r=0;r<t.length;r++)if(!t[r].value){n=!1;break}n?(this.element.classList.add(this.collapsedClass),this.storeState(0)):"function"==typeof e.checkValidity&&e.querySelector('button[type="submit"]').click()}}},{key:"storeState",value:function(e){this.hasIdValue&&this.hasTableValue&&fetch(window.location.href,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"toggleFieldset",id:this.idValue,table:this.tableValue,state:e})})}},{key:"setAriaExpanded",value:function(e){var t=this.element.querySelector("button");t&&(t.ariaExpanded=e)}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);c(d,"values",{id:String,table:String}),c(d,"classes",["collapsed"])},272:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function o(e,t,n){return t=a(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>d});var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,(r=[{key:"toggle",value:function(e){var t=e.currentTarget,n=e.params.category,r=t.parentNode.classList.toggle(this.collapsedClass);t.setAttribute("aria-expanded",r?"false":"true"),t.setAttribute("title",r?this.expandTitleValue:this.collapseTitleValue),this.sendRequest(n,r)}},{key:"sendRequest",value:function(e,t){fetch(this.urlValue,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"toggleNavigation",id:e,state:t?0:1,REQUEST_TOKEN:this.requestTokenValue})})}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,s}(n(891).xI);c(d,"classes",["collapsed"]),c(d,"values",{url:String,requestToken:String,expandTitle:String,collapseTitle:String})},521:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),a=new P(r||[]);return s(o,"_invoke",{value:T(e,n,a)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",y={};function b(){}function w(){}function E(){}var O={};d(O,l,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(F([])));S&&S!==n&&o.call(S,l)&&(O=S);var x=E.prototype=b.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,s,a,l){var c=f(e[i],e,s);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var i;s(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function T(t,n,r){var i=p;return function(o,s){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var l=j(a,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:g,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function F(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=E,s(x,"constructor",{value:E,configurable:!0}),s(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},C(A.prototype),d(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new A(h(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(x),d(x,u,"Generator"),d(x,l,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=F,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:F(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function o(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,l,"next",e)}function l(e){o(s,r,i,a,l,"throw",e)}a(void 0)}))}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function l(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>p});var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,r=[{key:"operationTargetConnected",value:function(){this.updateOperation()}},{key:"childTargetConnected",value:function(){this.updateOperation()}},{key:"toggle",value:function(e){e.preventDefault();var t=e.currentTarget;t.blur(),this.toggleToggler(t,e.params.id,e.params.level,e.params.folder)}},{key:"toggleToggler",value:function(e,t,n,r){var i=document.id(t);i&&"none"===i.style.display?(this.showChild(i),this.expandToggler(e),this.updateState(e,t,1)):i?(this.hideChild(i),this.collapseToggler(e),this.updateState(e,t,0)):this.fetchChild(e,t,n,r),this.updateOperation()}},{key:"expandToggler",value:function(e){e.classList.add("foldable--open"),e.title=this.collapseValue}},{key:"collapseToggler",value:function(e){e.classList.remove("foldable--open"),e.title=this.expandValue}},{key:"loadToggler",value:function(e,t){e.classList[t?"add":"remove"]("foldable--loading")}},{key:"showChild",value:function(e){e.style.display=""}},{key:"hideChild",value:function(e){e.style.display="none"}},{key:"fetchChild",value:(f=s(i().mark((function e(t,n,r,o){var s,a,l,c,u,d,h,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadToggler(t,!0),s=new URL(location.href),(a=s.searchParams).set("ref",this.refererIdValue),s.search=a.toString(),e.next=7,fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:this.loadActionValue,id:n,level:r,folder:o,state:1,REQUEST_TOKEN:this.requestTokenValue})});case 7:if(!(l=e.sent).ok){e.next=37;break}return e.next=11,l.text();case 11:if(c=e.sent,(u=document.createElement("li")).id=n,u.classList.add("parent"),u.style.display="inline",u.setAttribute("data-".concat(this.identifier,"-target"),0===r?"child rootChild":"child"),(d=document.createElement("ul")).classList.add("level_"+r),d.innerHTML=c,u.append(d),5!==this.modeValue){e.next=25;break}t.closest("li").after(u),e.next=34;break;case 25:h=!1,f=t.closest("li");case 26:if("element"!==typeOf(f)||"LI"!==f.tagName||!(p=f.nextElementSibling)){e.next=33;break}if(!(f=p).classList.contains("tl_folder")){e.next=31;break}return h=!0,e.abrupt("break",33);case 31:e.next=26;break;case 33:h?f.before(u):f.after(u);case 34:window.dispatchEvent(new CustomEvent("structure")),this.expandToggler(t),window.fireEvent("ajax_change");case 37:this.loadToggler(t,!1);case 38:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return f.apply(this,arguments)})},{key:"toggleAll",value:(h=s(i().mark((function e(t){var n,r,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.currentTarget.href,!(this.hasExpandedRoot()^(!!t&&t.altKey))){e.next=8;break}this.updateAllState(n,0),this.toggleTargets.forEach((function(e){return o.collapseToggler(e)})),this.childTargets.forEach((function(e){return e.style.display="none"})),e.next=16;break;case 8:return this.childTargets.forEach((function(e){return e.remove()})),this.toggleTargets.forEach((function(e){return o.loadToggler(e,!0)})),e.next=12,this.updateAllState(n,1);case 12:return r=[],this.toggleTargets.forEach((function(e){r.push(o.fetchChild(e,e.getAttribute("data-".concat(o.identifier,"-id-param")),0,e.getAttribute("data-".concat(o.identifier,"-folder-param"))))})),e.next=16,Promise.all(r);case 16:this.updateOperation();case 17:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"keypress",value:function(e){this.updateOperation(e)}},{key:"updateState",value:(u=s(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(location.href,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:this.toggleActionValue,id:n,state:r,REQUEST_TOKEN:this.requestTokenValue})});case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"updateAllState",value:(c=s(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"&state=").concat(n));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})},{key:"updateOperation",value:function(e){this.hasOperationTarget&&(this.hasExpandedRoot()^(!!e&&e.altKey)?(this.operationTarget.innerText=this.collapseAllValue,this.operationTarget.title=this.collapseAllTitleValue):(this.operationTarget.innerText=this.expandAllValue,this.operationTarget.title=this.expandAllTitleValue))}},{key:"hasExpandedRoot",value:function(){return!!this.rootChildTargets.find((function(e){return"none"!==e.style.display}))}}],r&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,c,u,h,f}(n(891).xI);h(p,"values",{mode:{type:Number,default:5},toggleAction:String,loadAction:String,requestToken:String,refererId:String,expand:String,collapse:String,expandAll:String,expandAllTitle:String,collapseAll:String,collapseAllTitle:String}),h(p,"targets",["operation","node","toggle","child","rootChild"])},420:()=>{window.AjaxRequest={toggleNavigation:function(e,t,n){window.console&&console.warn("AjaxRequest.toggleNavigation() is deprecated. Please use the stimulus controller instead.");var r=$(t),i=$(e).getParent("li");return!!r&&(i.hasClass("collapsed")?(i.removeClass("collapsed"),$(e).setAttribute("aria-expanded","true"),$(e).setAttribute("title",Contao.lang.collapse),new Request.Contao({url:n}).post({action:"toggleNavigation",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(i.addClass("collapsed"),$(e).setAttribute("aria-expanded","false"),$(e).setAttribute("title",Contao.lang.expand),new Request.Contao({url:n}).post({action:"toggleNavigation",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1)},toggleStructure:function(e,t,n,r){window.console&&console.warn("AjaxRequest.toggleStructure() is deprecated. Please use the stimulus controller instead."),e.blur();var i=$(t);return i?("none"==i.getStyle("display")?(i.setStyle("display",null),$(e).addClass("foldable--open"),$(e).setAttribute("title",Contao.lang.collapse),new Request.Contao({field:e}).post({action:"toggleStructure",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(i.setStyle("display","none"),$(e).removeClass("foldable--open"),$(e).setAttribute("title",Contao.lang.expand),new Request.Contao({field:e}).post({action:"toggleStructure",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({field:e,evalScripts:!0,onRequest:function(){AjaxRequest.displayBox(Contao.lang.loading+" ")},onSuccess:function(i){var o=new Element("li",{id:t,class:"parent",styles:{display:"inline"}});if(new Element("ul",{class:"level_"+n,html:i}).inject(o,"bottom"),5==r)o.inject($(e).getParent("li"),"after");else{for(var s,a=!1,l=$(e).getParent("li");"element"==typeOf(l)&&(s=l.getNext("li"));)if((l=s).hasClass("tl_folder")){a=!0;break}a?o.inject(l,"before"):o.inject(l,"after")}o.getElements("a").each((function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)})),$(e).addClass("foldable--open"),$(e).setAttribute("title",Contao.lang.collapse),window.fireEvent("structure"),AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadStructure",id:t,level:n,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},toggleFileManager:function(e,t,n,r){window.console&&console.warn("AjaxRequest.toggleFileManager() is deprecated. Please use the stimulus controller instead."),e.blur();var i=$(t);return i?("none"==i.getStyle("display")?(i.setStyle("display",null),$(e).addClass("foldable--open"),$(e).setAttribute("title",Contao.lang.collapse),new Request.Contao({field:e}).post({action:"toggleFileManager",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(i.setStyle("display","none"),$(e).removeClass("foldable--open"),$(e).setAttribute("title",Contao.lang.expand),new Request.Contao({field:e}).post({action:"toggleFileManager",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!1):(new Request.Contao({field:e,evalScripts:!0,onRequest:function(){AjaxRequest.displayBox(Contao.lang.loading+" ")},onSuccess:function(n){var i=new Element("li",{id:t,class:"parent",styles:{display:"inline"}});new Element("ul",{class:"level_"+r,html:n}).inject(i,"bottom"),i.inject($(e).getParent("li"),"after"),i.getElements("a").each((function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)})),$(e).addClass("foldable--open"),$(e).setAttribute("title",Contao.lang.collapse),AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"loadFileManager",id:t,level:r,folder:n,state:1,REQUEST_TOKEN:Contao.request_token}),!1)},toggleSubpalette:function(e,t,n){e.blur();var r=$(t);function i(t){var n=e.form.elements.VERSION_NUMBER||[];n.forEach||(n=[n]),n.forEach((function(e){e.value=/<input\s+[^>]*?name="VERSION_NUMBER"\s+[^>]*?value="([^"]*)"/i.exec(t)[1]}))}r?e.value?(e.value="",e.checked="",r.setStyle("display","none"),r.getElements("[required]").each((function(e){e.set("required",null).set("data-required","")})),new Request.Contao({field:e,onSuccess:i}).post({action:"toggleSubpalette",id:t,field:n,state:0,REQUEST_TOKEN:Contao.request_token})):(e.value=1,e.checked="checked",r.setStyle("display",null),r.getElements("[data-required]").each((function(e){e.set("required","").set("data-required",null)})),new Request.Contao({field:e,onSuccess:i}).post({action:"toggleSubpalette",id:t,field:n,state:1,REQUEST_TOKEN:Contao.request_token})):new Request.Contao({field:e,evalScripts:!1,onRequest:function(){AjaxRequest.displayBox(Contao.lang.loading+" ")},onSuccess:function(n,r){var o=new Element("div",{id:t,class:"subpal cf",html:n,styles:{display:"block"}}).inject($(e).getParent("div").getParent("div"),"after");r.javascript&&(document.write=function(e){var t="";e.replace(/<script src="([^"]+)"/i,(function(e,n){t=n})),t&&Asset.javascript(t,{onLoad:function(){Browser.exec(r.javascript)}})},Browser.exec(r.javascript)),e.value=1,e.checked="checked",o.getElements("a").each((function(e){e.href=e.href.replace(/&ref=[a-f0-9]+/,"&ref="+Contao.referer_id)})),i(n),AjaxRequest.hideBox(),window.fireEvent("ajax_change")}}).post({action:"toggleSubpalette",id:t,field:n,load:1,state:1,REQUEST_TOKEN:Contao.request_token})},toggleField:function(e,t){e.blur();var n,r,i=null,o=$(e).getElements("img"),s=1==o[0].get("data-state"),a=e.getParent("div");return t&&(a.hasClass("tl_right")?i=a.getPrevious("div").getElements("img"):a.hasClass("tl_listing_container")?(null===(i=e.getParent("td").getPrevious("td").getFirst("div.list_icon"))&&(i=e.getParent("td").getPrevious("td").getElement("div.cte_type")),null===i&&(i=e.getParent("tr").getFirst("td").getElement("div.list_icon_new"))):(n=a.getNext("div"))&&(n.hasClass("cte_type")&&(i=n),null===i&&(i=n.getFirst("div.list_icon"))),null!==i&&(i instanceof HTMLElement||!i.forEach?i.hasClass("cte_type")?s?(i.addClass("unpublished"),i.removeClass("published")):(i.addClass("published"),i.removeClass("unpublished")):i.setStyle("background-image","url("+(s?i.get("data-icon-disabled"):i.get("data-icon"))+")"):i.forEach((function(e){if("img"==e.nodeName.toLowerCase()){e.getParent("ul.tl_listing").hasClass("tl_tree_xtnd")||(r=e.getParent("a"))&&-1==r.href.indexOf("contao/preview")&&(e=(n=r.getNext("a"))?n.getElement("img"):new Element("img"));var t=s?e.get("data-icon-disabled"):e.get("data-icon");e.src=e.src.includes("/")&&!t.includes("/")?e.src.slice(0,e.src.lastIndexOf("/")+1)+t:t}})))),o.forEach((function(e){var t=s?e.get("data-icon-disabled"):e.get("data-icon");e.src=e.src.includes("/")&&!t.includes("/")?e.src.slice(0,e.src.lastIndexOf("/")+1)+t:t,e.set("data-state",s?0:1)})),!s&&$(e).get("data-title")?e.title=$(e).get("data-title"):s&&$(e).get("data-title-disabled")&&(e.title=$(e).get("data-title-disabled")),new Request.Contao({url:e.href,followRedirects:!1}).get(),!1},toggleCheckboxGroup:function(e,t){e.blur();var n=$(t);return!!n&&("none"==n.getStyle("display")?(n.setStyle("display",null),$(e).addClass("foldable--open"),(new Request.Contao).post({action:"toggleCheckboxGroup",id:t,state:1,REQUEST_TOKEN:Contao.request_token})):(n.setStyle("display","none"),$(e).removeClass("foldable--open"),(new Request.Contao).post({action:"toggleCheckboxGroup",id:t,state:0,REQUEST_TOKEN:Contao.request_token})),!0)},displayBox:function(e){var t=$("tl_ajaxBox"),n=$("tl_ajaxOverlay"),r=window.getScroll();null===n&&(n=new Element("div",{id:"tl_ajaxOverlay"}).inject($(document.body),"bottom")),n.set({styles:{display:"block",top:r.y+"px"}}),null===t&&(t=new Element("div",{id:"tl_ajaxBox"}).inject($(document.body),"bottom")),t.set({html:e,styles:{display:"block",top:r.y+100+"px"}})},hideBox:function(){var e=$("tl_ajaxBox"),t=$("tl_ajaxOverlay");t&&t.setStyle("display","none"),e&&e.setStyle("display","none")}},window.Backend={currentId:null,popupWindow:null,themePath:Contao.script_url+"system/themes/"+Contao.theme+"/",openModalWindow:function(e,t,n){new SimpleModal({width:e,hideFooter:!0,draggable:!1,overlayOpacity:.7,overlayClick:!1,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}}).show({title:t,contents:n})},openModalImage:function(e){var t,n=e||{},r=(window.getSize().x-20).toInt();(!n.width||n.width>r)&&(n.width=Math.min(r,900)),new SimpleModal({width:n.width,hideFooter:!0,draggable:!1,overlayOpacity:.7,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}}).show({title:null===(t=n.title)||void 0===t?void 0:t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),contents:'<img src="'+n.url+'" alt="">'})},openModalIframe:function(e){var t,n=e||{},r=(window.getSize().x-20).toInt(),i=(window.getSize().y-137).toInt();(!n.width||n.width>r)&&(n.width=Math.min(r,900)),(!n.height||n.height>i)&&(n.height=i),new SimpleModal({width:n.width,hideFooter:!0,draggable:!1,overlayOpacity:.7,overlayClick:!1,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}}).show({title:null===(t=n.title)||void 0===t?void 0:t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),contents:'<iframe src="'+n.url+'" width="100%" height="'+n.height+'" frameborder="0"></iframe>',model:"modal"})},openModalSelector:function(e){var t,n=e||{},r=(window.getSize().x-20).toInt(),i=(window.getSize().y-192).toInt();n.id||(n.id="tl_select"),(!n.width||n.width>r)&&(n.width=Math.min(r,900)),(!n.height||n.height>i)&&(n.height=i);var o=new SimpleModal({width:n.width,draggable:!1,overlayOpacity:.7,overlayClick:!1,onShow:function(){document.body.setStyle("overflow","hidden")},onHide:function(){document.body.setStyle("overflow","auto")}});o.addButton(Contao.lang.cancel,"btn",(function(){this.buttons[0].hasClass("btn-disabled")||this.hide()})),o.addButton(Contao.lang.apply,"btn primary",(function(){if(!this.buttons[1].hasClass("btn-disabled")){var e,t,r,i,o,s=window.frames["simple-modal-iframe"],a=[];if(void 0!==s){for((i=(e=s.document.getElementById(n.id)).get("data-picker-value"))&&(a=JSON.parse(i)),t=e.getElementsByTagName("input"),r=0;r<t.length;r++)t[r].id.match(/^(check_all_|reset_)/)||(o=a.indexOf(t[r].get("value")),t[r].checked?-1==o&&a.push(t[r].get("value")):-1!=o&&a.splice(o,1));n.callback(e.get("data-table"),a),this.hide()}else alert("Could not find the SimpleModal frame")}})),o.show({title:null===(t=n.title)||void 0===t?void 0:t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),contents:'<iframe src="'+n.url+'" name="simple-modal-iframe" width="100%" height="'+n.height+'" frameborder="0"></iframe>',model:"modal"})},openModalBrowser:function(e,t,n,r,i){Backend.openModalSelector({id:"tl_listing",title:r.document.getElement("div.mce-title").get("text"),url:Contao.routes.backend_picker+"?context="+("file"==n?"link":"file")+"&amp;extras[fieldType]=radio&amp;extras[filesOnly]=true&amp;extras[source]="+i+"&amp;value="+t+"&amp;popup=1",callback:function(t,n){r.document.getElementById(e).value=n.join(",")}})},autoSubmit:function(e){window.dispatchEvent(new Event("store-scroll-offset"));var t=new Element("input",{type:"hidden",name:"SUBMIT_TYPE",value:"auto"}),n=$(e)||e;t.inject(n,"bottom"),n.submit()},vScrollTo:function(e){window.addEvent("load",(function(){window.scrollTo(null,parseInt(e))}))},toggleCheckboxes:function(e,t){for(var n=$$("input"),r=$(e).checked?"checked":"",i=0;i<n.length;i++)"checkbox"==n[i].type.toLowerCase()&&(void 0!==t&&t!=n[i].id.substr(0,t.length)||(n[i].checked=r))},toggleCheckboxGroup:function(e,t){var n=$(e).className,r=$(e).checked?"checked":"";"tl_checkbox"==n?($(t)?$$("#"+t+" .tl_checkbox"):$(e).getParent("fieldset").getElements(".tl_checkbox")).each((function(e){e.checked=r})):"tl_tree_checkbox"==n&&$$("#"+t+" .parent .tl_tree_checkbox").each((function(e){e.checked=r}));window.dispatchEvent(new Event("store-scroll-offset"))},toggleCheckboxElements:function(e,t){var n=$(e).checked?"checked":"";$$("."+t).each((function(e){e.hasClass("tl_checkbox")&&(e.checked=n)})),window.dispatchEvent(new Event("store-scroll-offset"))},makeParentViewSortable:function(e){var t=new Scroller(document.getElement("body"),{onChange:function(e,t){this.element.scrollTo(this.element.getScroll().x,t)}}),n=new Sortables(e,{constrain:!0,opacity:.6,onStart:function(){t.start()},onComplete:function(){t.stop()},onSort:function(e){var t,n,r=e.getParent("ul"),i=0;if(r&&(t=r.getChildren("li > div:first-child")))for(n=0;n<t.length;n++)t[n].hasClass("wrapper_stop")&&i>0&&i--,t[n].className=t[n].className.replace(/(^|\s)indent[^\s]*/g,""),i>0&&t[n].addClass("indent").addClass("indent_"+i),t[n].hasClass("wrapper_start")&&i++,t[n].removeClass("indent_first"),t[n].removeClass("indent_last"),t[n-1]&&t[n-1].hasClass("wrapper_start")&&t[n].addClass("indent_first"),t[n+1]&&t[n+1].hasClass("wrapper_stop")&&t[n].addClass("indent_last")},handle:".drag-handle"});n.active=!1,n.addEvent("start",(function(){n.active=!0})),n.addEvent("complete",(function(e){var t,r,i,o;n.active&&(e.getPrevious("li")?(t=e.get("id").replace(/li_/,""),r=e.getPrevious("li").get("id").replace(/li_/,""),i=window.location.search.replace(/id=[0-9]*/,"id="+t)+"&act=cut&mode=1&pid="+r,o=window.location.href.replace(/\?.*$/,""),new Request.Contao({url:o+i,followRedirects:!1}).get()):e.getParent("ul")&&(t=e.get("id").replace(/li_/,""),r=e.getParent("ul").get("id").replace(/ul_/,""),i=window.location.search.replace(/id=[0-9]*/,"id="+t)+"&act=cut&mode=2&pid="+r,o=window.location.href.replace(/\?.*$/,""),new Request.Contao({url:o+i,followRedirects:!1}).get()))}))},makeMultiSrcSortable:function(e,t,n){var r=new Sortables($(e),{constrain:!0,opacity:.6}).addEvent("complete",(function(){var r,i=[],o=$(e).getChildren("[data-id]");for(r=0;r<o.length;r++)i.push(o[r].get("data-id"));t===n&&$(n).value.split(",").forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),$(t).value=i.join(",")}));$(e).getElements(".gimage").each((function(e){e.hasClass("removable")?new Element("button",{type:"button",html:"&times;",class:"tl_red"}).addEvent("click",(function(){var r=e.getParent("li"),i=r.get("data-id");$(n).value=$(n).value.split(",").filter((function(e){return e!=i})).join(","),$(t).value=$(t).value.split(",").filter((function(e){return e!=i})).join(","),r.dispose()})).inject(e,"after"):new Element("button",{type:"button",html:"&times",disabled:!0}).inject(e,"after")})),r.fireEvent("complete")},enableFileTreeDragAndDrop:function(e,t){var n=new Scroller(document.getElement("body"),{onChange:function(e,t){this.element.scrollTo(this.element.getScroll().x,t)}});function r(e){return e&&e.hasClass("parent")&&e.getPrevious(".tl_folder")?e.getPrevious(".tl_folder"):e}e.addEvent("mousedown",(function(i){var o=i.target.hasClass("drag-handle")?i.target:i.target.getParent(".drag-handle"),s=i.target.getParent(".tl_file,.tl_folder");if(o&&s&&!i.rightClick){n.start(),e.addClass("tl_listing_dragging");var a,l,c,u=s.getElements(".tl_left")[0]||s,d=u.clone(!0).inject(e).addClass("tl_left_dragging");d.setPosition({x:i.page.x-u.getOffsetParent().getPosition().x-d.getSize().x,y:u.getPosition(u.getOffsetParent()).y}).setStyle("display","none");var h=new Drag.Move(d,{droppables:$$([e]).append(e.getElements(".tl_folder,li.parent,.tl_folder_top")),unDraggableTags:[],modifiers:{x:"left",y:"top"},onStart:function(){d.setStyle("display","")},onEnter:function(t,n){(n=r(n)).addClass("tl_folder_dropping"),n.hasClass("tl_folder")&&a!==n&&(a=n,l=(new Date).getTime(),(c=n.getElement("a.foldable"))&&!c.hasClass("foldable--open")&&setTimeout((function(){if(a===n&&l+900<(new Date).getTime()){var t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!0),c.dispatchEvent(t),a=void 0,l=void 0,window.addEvent("ajax_change",(function t(){h&&h.droppables&&e&&e.getElements&&(h.droppables=$$([e]).append(e.getElements(".tl_folder,li.parent"))),window.removeEvent("ajax_change",t)}))}}),1e3))},onCancel:function(){a=void 0,l=void 0,n.stop(),d.destroy(),window.removeEvent("keyup",f),e.getElements(".tl_folder_dropping").removeClass("tl_folder_dropping"),e.removeClass("tl_listing_dragging")},onDrop:function(i,o){if(a=void 0,l=void 0,n.stop(),d.destroy(),window.removeEvent("keyup",f),e.getElements(".tl_folder_dropping").removeClass("tl_folder_dropping"),e.removeClass("tl_listing_dragging"),o=r(o)){var c=s.get("data-id"),u=o.get("data-id")||decodeURIComponent(t.url.split(/[?&]pid=/)[1].split("&")[0]);c&&u&&(0===(u+"/").indexOf(c+"/")||u+"/"===c.replace(/[^/]+$/,""))||(window.dispatchEvent(new Event("store-scroll-offset")),document.location.href=t.url+"&id="+encodeURIComponent(c)+"&pid="+encodeURIComponent(u))}},onLeave:function(e,t){(t=r(t)).removeClass("tl_folder_dropping"),a=void 0,l=void 0}});h.start(i),window.addEvent("keyup",f)}function f(e){"esc"===e.key&&h&&h.stop&&(h.droppables=$$([]),h.stop())}}))},listWizard:function(e){var t=$(e),n=function(e){var r,i,o,s;e.getElements("button").each((function(a){if(!a.hasEvent("click"))switch(a.getProperty("data-command")){case"copy":a.addEvent("click",(function(){window.dispatchEvent(new Event("store-scroll-offset")),r=e.clone(!0).inject(e,"before"),(i=e.getFirst("input"))&&(r.getFirst("input").value=i.value),n(r),i.select()}));break;case"delete":a.addEvent("click",(function(){window.dispatchEvent(new Event("store-scroll-offset")),t.getChildren().length>1&&e.destroy()}));break;case null:a.addEvent("keydown",(function(n){38==n.event.keyCode?(n.preventDefault(),(o=e.getPrevious("li"))?e.inject(o,"before"):e.inject(t,"bottom"),a.focus()):40==n.event.keyCode&&(n.preventDefault(),(s=e.getNext("li"))?e.inject(s,"after"):e.inject(t.getFirst("li"),"before"),a.focus())}))}}))};!function(e){new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle"})}(t),t.getChildren().each((function(e){n(e)}))},tableWizard:function(e){var t=$(e),n=t.getElement("thead"),r=t.getElement("tbody"),i=function(e){var t,n,r,o,s=e.getChildren();for(r=0;r<s.length;r++)for(n=s[r].getChildren(),o=0;o<n.length;o++)(t=n[o].getFirst("textarea"))&&(t.name=t.name.replace(/\[[0-9]+][[0-9]+]/g,"["+r+"]["+o+"]"));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){i(e)}})},o=function(e){var t,a,l,c,u,d,h,f=n.getFirst("tr");e.getElements("button").each((function(n){if(!n.hasEvent("click"))switch(n.getProperty("data-command")){case"rcopy":n.addEvent("click",(function(){for(window.dispatchEvent(new Event("store-scroll-offset")),c=new Element("tr"),u=e.getChildren(),h=0;h<u.length;h++)l=u[h].clone(!0).inject(c,"bottom"),(t=u[h].getFirst("textarea"))&&(l.getFirst("textarea").value=t.value);c.inject(e,"after"),o(c),i(r),c.getFirst("td").getFirst("textarea").select()}));break;case"rdelete":n.addEvent("click",(function(){window.dispatchEvent(new Event("store-scroll-offset")),r.getChildren().length>1&&e.destroy(),i(r)}));break;case"ccopy":n.addEvent("click",(function(){for(window.dispatchEvent(new Event("store-scroll-offset")),d=s(n),u=r.getChildren(),h=0;h<u.length;h++)a=u[h].getChildren()[d],l=a.clone(!0).inject(a,"after"),(t=a.getFirst("textarea"))&&(l.getFirst("textarea").value=t.value),o(l);var e=f.getFirst("td");l=e.clone(!0).inject(f.getLast("td"),"before"),o(l),i(r),u[0].getChildren()[d+1].getFirst("textarea").select()}));break;case"cmovel":n.addEvent("click",(function(){if(window.dispatchEvent(new Event("store-scroll-offset")),d=s(n),u=r.getChildren(),d>0)for(h=0;h<u.length;h++)(a=u[h].getChildren()[d]).inject(a.getPrevious(),"before");else for(h=0;h<u.length;h++)(a=u[h].getChildren()[d]).inject(u[h].getLast(),"before");i(r)}));break;case"cmover":n.addEvent("click",(function(){if(window.dispatchEvent(new Event("store-scroll-offset")),d=s(n),u=r.getChildren(),d<e.getChildren().length-2)for(h=0;h<u.length;h++)(a=u[h].getChildren()[d]).inject(a.getNext(),"after");else for(h=0;h<u.length;h++)(a=u[h].getChildren()[d]).inject(u[h].getFirst(),"before");i(r)}));break;case"cdelete":n.addEvent("click",(function(){if(window.dispatchEvent(new Event("store-scroll-offset")),d=s(n),u=r.getChildren(),e.getChildren().length>2){for(h=0;h<u.length;h++)u[h].getChildren()[d].destroy();f.getFirst("td").destroy()}i(r)}));break;case null:n.addEvent("keydown",(function(t){38==t.event.keyCode?(t.preventDefault(),(c=e.getPrevious("tr"))?e.inject(c,"before"):e.inject(r,"bottom"),n.focus(),i(r)):40==t.event.keyCode&&(t.preventDefault(),(c=e.getNext("tr"))?e.inject(c,"after"):e.inject(r,"top"),n.focus(),i(r))}))}}))},s=function(e){var t,n=$(e).getParent("td"),r=n.getParent("tr").getChildren(),i=0;for(t=0;t<r.length&&r[t]!=n;t++)i++;return i};i(r),n.getChildren().each((function(e){o(e)})),r.getChildren().each((function(e){o(e)})),Backend.tableWizardResize()},tableWizardResize:function(e){var t=window.localStorage.getItem("contao_table_wizard_cell_size");if(void 0!==e)t="",$$(".tl_tablewizard textarea").each((function(n){n.setStyle("width",(n.getStyle("width").toInt()*e).round().limit(142,284)),n.setStyle("height",(n.getStyle("height").toInt()*e).round().limit(66,132)),""==t&&(t=n.getStyle("width")+"|"+n.getStyle("height"))})),window.localStorage.setItem("contao_table_wizard_cell_size",t);else if(null!==t){var n=t.split("|");$$(".tl_tablewizard textarea").each((function(e){e.setStyle("width",n[0]),e.setStyle("height",n[1])}))}},tableWizardSetWidth:function(){var e=$("tl_tablewizard");e&&e.setStyle("width",Math.round(.96*e.getParent(".tl_formbody_edit").getComputedSize().width))},optionsWizard:function(e){var t=$(e).getElement("tbody"),n=function(e){var t,r,i,o,s=e.getChildren();for(r=0;r<s.length;r++)for(t=s[r].getChildren(),i=0;i<t.length;i++)(o=t[i].getFirst("input"))&&(o.name=o.name.replace(/\[[0-9]+]/g,"["+r+"]"),"checkbox"==o.type&&(o.id=o.name.replace(/\[[0-9]+]/g,"").replace(/\[/g,"_").replace(/]/g,"")+"_"+r,o.getNext("label").set("for",o.id)));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){n(e)}})},r=function(e){var i,o,s,a,l;e.getElements("button").each((function(c){if(!c.hasEvent("click"))switch(c.getProperty("data-command")){case"copy":c.addEvent("click",(function(){for(window.dispatchEvent(new Event("store-scroll-offset")),s=new Element("tr"),a=e.getChildren(),l=0;l<a.length;l++)o=a[l].clone(!0).inject(s,"bottom"),(i=a[l].getFirst("input"))&&(o.getFirst("input").value=i.value,"checkbox"==i.type&&(o.getFirst("input").checked=i.checked?"checked":""));s.inject(e,"after"),r(s),n(t),s.getFirst("td").getFirst("input").select()}));break;case"delete":c.addEvent("click",(function(){window.dispatchEvent(new Event("store-scroll-offset")),t.getChildren().length>1&&e.destroy(),n(t)}));break;case null:c.addEvent("keydown",(function(r){38==r.event.keyCode?(r.preventDefault(),(s=e.getPrevious("tr"))?e.inject(s,"before"):e.inject(t,"bottom"),c.focus(),n(t)):40==r.event.keyCode&&(r.preventDefault(),(s=e.getNext("tr"))?e.inject(s,"after"):e.inject(t,"top"),c.focus(),n(t))}))}}))};n(t),t.getChildren().each((function(e){r(e)}))},keyValueWizard:function(e){var t=$(e).getElement("tbody"),n=function(e){var t,r,i,o,s=e.getChildren();for(r=0;r<s.length;r++)for(t=s[r].getChildren(),i=0;i<t.length;i++)(o=t[i].getFirst("input"))&&(o.name=o.name.replace(/\[[0-9]+]/g,"["+r+"]"));new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){n(e)}})},r=function(e){var i,o,s,a,l;e.getElements("button").each((function(c){if(!c.hasEvent("click"))switch(c.getProperty("data-command")){case"copy":c.addEvent("click",(function(){for(window.dispatchEvent(new Event("store-scroll-offset")),s=new Element("tr"),a=e.getChildren(),l=0;l<a.length;l++)o=a[l].clone(!0).inject(s,"bottom"),(i=a[l].getFirst("input"))&&(o.getFirst().value=i.value);s.inject(e,"after"),r(s),n(t),s.getFirst("td").getFirst("input").select()}));break;case"delete":c.addEvent("click",(function(){window.dispatchEvent(new Event("store-scroll-offset")),t.getChildren().length>1&&e.destroy(),n(t)}));break;case null:c.addEvent("keydown",(function(r){38==r.event.keyCode?(r.preventDefault(),(s=e.getPrevious("tr"))?e.inject(s,"before"):e.inject(t,"bottom"),c.focus(),n(t)):40==r.event.keyCode&&(r.preventDefault(),(s=e.getNext("tr"))?e.inject(s,"after"):e.inject(t,"top"),c.focus(),n(t))}))}}))};n(t),t.getChildren().each((function(e){r(e)}))},checkboxWizard:function(e){var t=$(e).getElement(".sortable");!function(e){new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle"})}(t),t.getChildren().each((function(e){!function(e){var n;e.getElements("button").each((function(r){r.hasEvent("click")||r.addEvent("keydown",(function(i){38==i.event.keyCode?(i.preventDefault(),(n=e.getPrevious("span"))?e.inject(n,"before"):e.inject(t,"bottom"),r.focus()):40==i.event.keyCode&&(i.preventDefault(),(n=e.getNext("span"))?e.inject(n,"after"):e.inject(t,"top"),r.focus())}))}))}(e)}))},enableImageSizeWidgets:function(){$$(".tl_image_size").each((function(e){var t=e.getElement("select"),n=e.getChildren("input")[0],r=e.getChildren("input")[1],i=function(){if(""===t.get("value")||0===t.get("value").indexOf("_")||t.get("value").toInt().toString()===t.get("value")){n.readOnly=!0,r.readOnly=!0;var e=$(t.getSelected()[0]).get("text");e=e.split("(").length>1?e.split("(").getLast().split(")")[0].split("x"):["",""],n.set("value","").set("placeholder",1*e[0]||""),r.set("value","").set("placeholder",1*e[1]||"")}else n.set("placeholder",""),r.set("placeholder",""),n.readOnly=!1,r.readOnly=!1};i(),t.addEvent("change",i),t.addEvent("keyup",i)}))},enableToggleSelect:function(){var e,t,n,r,i,o,s=$("tl_listing"),a=function(s){for(t=c.indexOf(s),n=c.indexOf(e),i=Math.min(t,n),o=Math.max(t,n),r=!!c[n].checked;i<=o;i++)c[i].checked=r},l=function(t){var n=this.getElement('input[type="checkbox"],input[type="radio"]'),r=$(t.target).getParent(".limit_toggler");n&&!n.get("disabled")&&null===r&&("radio"!=n.type?(t.shift&&e?a(n):(n.checked=n.checked?"":"checked","Backend.toggleCheckboxes(this)"==n.get("onclick")&&Backend.toggleCheckboxes(n)),e=n):n.checked||(n.checked="checked"))},c=[];s&&(c=s.getElements('input[type="checkbox"]')),$$(".toggle_select").each((function(e){var t=e.retrieve("boundEvent");t&&e.removeEvent("click",t),e.getElements('label,input[type="checkbox"],input[type="radio"]').each((function(e){e.addEvent("click",(function(e){e.stopPropagation()}))})),t=l.bind(e),e.addEvent("click",t),e.store("boundEvent",t)})),c.each((function(t){t.addEvent("click",(function(t){t.shift&&e&&a(this),e=this}))}))},editPreviewWizard:function(e){var t,n,r=(e=$(e)).getElement("img"),i={},o=!1,s=function(){return{x:r.getComputedSize().width,y:r.getComputedSize().height}},a=function(){var e=s(),n=r.getComputedSize();t.setStyles({top:n.computedTop+(i.y.get("value")*e.y).round()+"px",left:n.computedLeft+(i.x.get("value")*e.x).round()+"px",width:(i.width.get("value")*e.x).round()+"px",height:(i.height.get("value")*e.y).round()+"px"}),i.width.get("value").toFloat()&&i.height.get("value").toFloat()?t.setStyle("display",null):t.setStyle("display","none")},l=function(t){t.preventDefault(),o||(o=!0,n={x:t.page.x-e.getPosition().x-r.getComputedSize().computedLeft,y:t.page.y-e.getPosition().y-r.getComputedSize().computedTop},c(t))},c=function(a){if(o){a.preventDefault();var l=r.getComputedSize(),c={x:[Math.max(0,Math.min(l.width,n.x)),Math.max(0,Math.min(l.width,a.page.x-e.getPosition().x-l.computedLeft))],y:[Math.max(0,Math.min(l.height,n.y)),Math.max(0,Math.min(l.height,a.page.y-e.getPosition().y-l.computedTop))]};t.setStyles({top:Math.min(c.y[0],c.y[1])+l.computedTop+"px",left:Math.min(c.x[0],c.x[1])+l.computedLeft+"px",width:Math.abs(c.x[0]-c.x[1])+"px",height:Math.abs(c.y[0]-c.y[1])+"px"}),function(){var e=s(),n=t.getStyles("top","left","width","height"),o=r.getComputedSize(),a={x:Math.max(0,Math.min(1,(n.left.toFloat()-o.computedLeft)/e.x)),y:Math.max(0,Math.min(1,(n.top.toFloat()-o.computedTop)/e.y))};a.width=Math.min(1-a.x,n.width.toFloat()/e.x),a.height=Math.min(1-a.y,n.height.toFloat()/e.y),a.width&&a.height?t.setStyle("display",null):(a.x=a.y=a.width=a.height="",t.setStyle("display","none")),Object.each(a,(function(e,t){i[t].set("value",""===e?"":Number(e).toFixed(15))}))}()}},u=function(e){c(e),o=!1};window.addEvent("domready",(function(){e.getParent(".tl_tbox,.tl_box").getElements('input[name^="importantPart"]').each((function(e){["x","y","width","height"].each((function(t){e.get("name").substr(13,t.length)===t.capitalize()&&(i[t]=e=$(e))}))})),4===Object.getLength(i)&&(Object.each(i,(function(e){e.getParent().setStyle("display","none")})),e.addClass("tl_edit_preview_enabled"),t=new Element("div",{class:"tl_edit_preview_important_part"}).inject(e),a(),r.addEvent("load",a),e.addEvents({mousedown:l,touchstart:l}),$(document.documentElement).addEvents({mousemove:c,touchmove:c,mouseup:u,touchend:u,touchcancel:u,resize:a}))}))},enableFileTreeUpload:function(e,t){e=$(e);var n,r,i,o=t.url,s=new Element("div",{class:"dropzone dropzone-filetree",html:'<span class="dropzone-previews"></span>'}).inject(e,"top");t.previewsContainer=s.getElement(".dropzone-previews"),t.clickable=!1;var a=new Dropzone(e,t);a.on("queuecomplete",(function(){window.location.reload()})),a.on("dragover",(function(t){if(t.dataTransfer&&t.dataTransfer.types&&-1!==t.dataTransfer.types.indexOf("Files")){e.getElements(".tl_folder_dropping").removeClass("tl_folder_dropping");var s=t.target&&$(t.target);if(s){var l=s.match(".tl_folder")?s:s.getParent(".tl_folder");if(l||(l=(l=s.getParent(".parent"))&&l.getPrevious(".tl_folder")),l){var c=l.getElement('img[src$="/icons/new.svg"]');c=c&&c.getParent("a")}}c&&c.href?(a.options.url=""+c.href,l.addClass("tl_folder_dropping"),n!==l&&(n=l,r=(new Date).getTime(),(i=l.getElement("a.foldable"))&&!i.hasClass("foldable--open")&&setTimeout((function(){if(n===l&&r+900<(new Date).getTime()){var e=document.createEvent("HTMLEvents");e.initEvent("click",!0,!0),i.dispatchEvent(e),n=void 0,r=void 0}}),1e3))):(a.options.url=o,n=void 0,r=void 0)}})),a.on("drop",(function(e){e.dataTransfer&&e.dataTransfer.types&&-1!==e.dataTransfer.types.indexOf("Files")&&(s.addClass("dropzone-filetree-enabled"),window.dispatchEvent(new Event("store-scroll-offset")))})),a.on("dragleave",(function(){e.getElements(".tl_folder_dropping").removeClass("tl_folder_dropping"),n=void 0,r=void 0}))},crawl:function(){var e=$("tl_crawl"),t=e.getElement("div.progress-bar"),n=e.getElement("p.progress-count"),r=e.getElement("div.results"),i=e.getElement("p.debug-log");!function e(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];new Request({url:window.location.href,headers:{"Only-Status-Update":o},onSuccess:function(o){var s=JSON.decode(o);!function(e){var o,s=e.total,a=s-e.pending,l=s>0?parseInt(a/s*100,10):100;if(a<1&&l<1&&(a=1,l=10,s=10),t.setStyle("width",l+"%"),t.set("html",l+"%"),t.setAttribute("aria-valuenow",l),n.set("html",a+" / "+s),e.hasDebugLog&&i.setStyle("display","block"),e.hasDebugLog&&i.setStyle("display","block"),e.finished)for(o in t.removeClass("running").addClass("finished"),r.removeClass("running").addClass("finished"),e.results)if(e.results.hasOwnProperty(o)){var c=r.getElement('.result[data-subscriber="'+o+'"] p.summary'),u=r.getElement('.result[data-subscriber="'+o+'"] p.warning'),d=r.getElement('.result[data-subscriber="'+o+'"] p.subscriber-log'),h=e.results[o],f=h.summary;h.warning&&u.set("html",h.warning),h.hasLog&&d.setStyle("display","block"),c.addClass(h.wasSuccessful?"success":"failure"),c.set("html",f)}}(s),s.finished||setTimeout(e,2e3)}}).send()}(!0)}},window.Theme={isWebkit:Browser.chrome||Browser.safari||navigator.userAgent.match(/(?:webkit|khtml)/i),stopClickPropagation:function(){$$(".picker_selector").each((function(e){e.getElements("a").each((function(e){e.addEvent("click",(function(e){e.stopPropagation()}))}))})),$$(".picker_selector,.click2edit").each((function(e){e.getElements('input[type="checkbox"]').each((function(e){e.addEvent("click",(function(e){e.stopPropagation()}))}))}))},setupCtrlClick:function(){$$(".click2edit").each((function(e){e.getElements("a").each((function(e){e.addEvent("click",(function(e){e.stopPropagation()}))})),Browser.Features.Touch?e.addEvent("click",(function(){e.getAttribute("data-visited")?(e.getElements("a").each((function(e){e.hasClass("edit")&&(document.location.href=e.href)})),e.removeAttribute("data-visited")):e.setAttribute("data-visited","1")})):e.addEvent("click",(function(t){(Browser.Platform.mac?t.event.metaKey:t.event.ctrlKey)&&(t.event.shiftKey?e.getElements("a").each((function(e){e.hasClass("children")&&(document.location.href=e.href)})):e.getElements("a").each((function(e){e.hasClass("edit")&&(document.location.href=e.href)})))}))}))},setupTextareaResizing:function(){$$(".tl_textarea").each((function(e){if(!(Browser.ie6||Browser.ie7||Browser.ie8||e.hasClass("noresize")||e.retrieve("autogrow"))){var t=new Element("div",{html:"X",styles:{position:"absolute",top:0,left:"-999em","overflow-x":"hidden"}}).setStyles(e.getStyles("font-size","font-family","width","line-height")).inject(document.body);"border-box"!=e.getStyle("-moz-box-sizing")&&"border-box"!=e.getStyle("-webkit-box-sizing")&&"border-box"!=e.getStyle("box-sizing")||t.setStyles({padding:e.getStyle("padding"),border:e.getStyle("border-left")});var n=Math.max(t.clientHeight,30);e.addEvent("input",(function(){t.set("html",this.get("value").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n|\r\n/g,"<br>X"));var e=Math.max(n,t.getSize().y);this.clientHeight!=e&&this.tween("height",e)})).set("tween",{duration:100}).setStyle("height",n+"px"),e.fireEvent("input"),e.store("autogrow",!0)}}))},setupMenuToggle:function(){var e=$("burger");if(e&&(e.addEvent("click",(function(){document.body.toggleClass("show-navigation"),e.setAttribute("aria-expanded",document.body.hasClass("show-navigation")?"true":"false")})).addEvent("keydown",(function(e){27==e.event.keyCode&&document.body.removeClass("show-navigation")})),window.matchMedia)){var t=window.matchMedia("(max-width:991px)"),n=function(){t.matches?(e.setAttribute("aria-controls","left"),e.setAttribute("aria-expanded",document.body.hasClass("show-navigation")?"true":"false")):(e.removeAttribute("aria-controls"),e.removeAttribute("aria-expanded"))};t.addEventListener("change",n),n()}},setupProfileToggle:function(){var e=$("tmenu");if(e){var t=e.getElement(".submenu"),n=t.getFirst("span").getFirst("button"),r=t.getFirst("ul");t&&n&&r&&(n.setAttribute("aria-controls","tmenu__profile"),n.setAttribute("aria-expanded","false"),r.id="tmenu__profile",n.addEvent("click",(function(e){t.hasClass("active")?(t.removeClass("active"),n.setAttribute("aria-expanded","false")):(t.addClass("active"),n.setAttribute("aria-expanded","true")),e.stopPropagation()})),$(document.body).addEvent("click",(function(){t.hasClass("active")&&t.removeClass("active")})))}},setupSplitButtonToggle:function(){var e=$("sbtog");if(e){var t,n,r=e.getParent(".split-button").getElement("ul");e.addEvent("click",(function(n){t=!1,r.toggleClass("invisible"),e.toggleClass("active"),n.stopPropagation()})),$(document.body).addEvent("click",(function(){t=!1,r.addClass("invisible"),e.removeClass("active")})),$(document.body).addEvent("keydown",(function(e){t=9==e.event.keyCode})),[e].append(r.getElements("button")).each((function(i){i.addEvent("focus",(function(){t&&(r.removeClass("invisible"),e.addClass("active"),clearTimeout(n))})),i.addEvent("blur",(function(){t&&(n=setTimeout((function(){r.addClass("invisible"),e.removeClass("active")}),100))}))})),e.set("tabindex","-1")}}},window.addEvent("domready",(function(){$(document.body).addClass("js"),Browser.Features.Touch&&$(document.body).addClass("touch"),Backend.tableWizardSetWidth(),Backend.enableImageSizeWidgets(),Backend.enableToggleSelect(),null!=Elements.chosen&&$$("select.tl_chosen").chosen(),Theme.stopClickPropagation(),Theme.setupCtrlClick(),Theme.setupTextareaResizing(),Theme.setupMenuToggle(),Theme.setupProfileToggle(),Theme.setupSplitButtonToggle()})),window.addEvent("resize",(function(){Backend.tableWizardSetWidth()})),window.addEvent("ajax_change",(function(){Backend.enableImageSizeWidgets(),Backend.enableToggleSelect(),null!=Elements.chosen&&$$("select.tl_chosen").filter((function(e){return"none"!=e.getStyle("display")})).chosen(),Theme.stopClickPropagation(),Theme.setupCtrlClick(),Theme.setupTextareaResizing()}))},338:()=>{window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("div.limit_height").forEach((function(e){window.console&&console.warn('Using "limit_height" class on child_record_callback is deprecated. Set a list.sorting.limitHeight in your DCA instead.');var t=e.parentNode.closest(".tl_content");if(!t||!t.classList.contains("wrapper_start")&&!t.classList.contains("wrapper_stop")){var n=Number(e.className.replace(/[^0-9]*/,""));if(n){var r=window.getComputedStyle(e,null),i=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);if(!(e.clientHeight-i<=n)){e.style.height=n+"px";var o=document.createElement("button");o.setAttribute("type","button"),o.title=Contao.lang.expand,o.innerHTML="<span>...</span>",o.classList.add("unselectable"),o.addEventListener("click",(function(){"auto"==e.style.height?(e.style.height=n+"px",o.title=Contao.lang.expand):(e.style.height="auto",o.title=Contao.lang.collapse)}));var s=document.createElement("div");s.classList.add("limit_toggler"),s.append(o),e.append(s)}}}}))}))},260:()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(){"use strict";var t=new WeakMap,n=new Event("store-scroll-offset"),r=function(e){if(!t.has(e)&&e.querySelector("button.drag-handle")){t.set(e,!0);var r=e.closest("tbody"),i=function(e){Array.from(e.children).forEach((function(e,t){e.querySelectorAll("input, select").forEach((function(e){e.name=e.name.replace(/\[[0-9]+]/g,"["+t+"]")}))})),new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){i(e)}})},o=function(e){e.querySelectorAll("button").forEach((function(s){switch(s.dataset.command){case"copy":s.addEventListener("click",(function(){window.dispatchEvent(n);for(var s=e.cloneNode(!0),a=e.querySelectorAll("select"),l=s.querySelectorAll("select"),c=0;c<a.length;c++)l[c].value=a[c].value;s.querySelectorAll("[data-original-title]").forEach((function(e){e.setAttribute("title",e.getAttribute("data-original-title")),e.removeAttribute("data-original-title")})),t.set(s,!0),e.parentNode.insertBefore(s,e.nextSibling);var u=s.querySelector("select.tl_select");u.removeAttribute("id"),s.querySelector(".chzn-container").remove(),new Chosen(u),o(s),i(r)}));break;case"delete":s.addEventListener("click",(function(){window.dispatchEvent(n),r.children.length>1?e.remove():e.querySelectorAll("select").forEach((function(e){e.value=e.children[0].value})),i(r)}));break;case"enable":s.addEventListener("click",(function(){window.dispatchEvent(n);var e=s.previousElementSibling;e.checked?e.checked="":e.checked="checked"}));break;default:s.classList.contains("drag-handle")&&s.addEventListener("keydown",(function(t){"ArrowUp"===t.code||38===t.keyCode?(t.preventDefault(),e.previousElementSibling?e.previousElementSibling.insertAdjacentElement("beforebegin",e):r.insertAdjacentElement("beforeend",e),s.focus(),i(r)):"ArrowDown"!==t.code&&40!==t.keyCode||(t.preventDefault(),e.nextElementSibling?e.nextElementSibling.insertAdjacentElement("afterend",e):r.insertAdjacentElement("afterbegin",e),s.focus(),i(r))}))}}));var s=e.querySelector("td:first-child select");if(s){var a=e.querySelector("a.module_link"),l=e.querySelectorAll("img.module_image"),c=function(){a.href=a.href.replace(/id=[0-9]+/,"id="+s.value),s.value>0?(a.classList.remove("hidden"),l.forEach((function(e){e.classList.add("hidden")}))):(a.classList.add("hidden"),l.forEach((function(e){e.classList.remove("hidden")})))};s.addEventListener("change",c),s.addEvent("change",c)}};i(r),o(e)}};document.querySelectorAll(".tl_modulewizard tr").forEach(r),new MutationObserver((function(t){var n,i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;"childList"===o.type&&o.addedNodes.forEach((function(e){e.matches&&e.matches(".tl_modulewizard tr, .tl_modulewizard tr *")&&r(e.closest("tr"))}))}}catch(e){i.e(e)}finally{i.f()}})).observe(document,{attributes:!1,childList:!0,subtree:!0})}()},672:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Request.Contao=new Class({Extends:Request.JSON,options:{followRedirects:!0,url:window.location.href},initialize:function(e){e&&!e.url&&e.field&&e.field.form&&e.field.form.action&&(this.options.url=e.field.form.action),this.parent(e)},success:function(t){var n,r=this.getHeader("X-Ajax-Location");if(r&&this.options.followRedirects)location.replace(r);else{try{n=this.response.json=JSON.decode(t,this.options.secure)}catch(e){n={content:t}}null===n?n={content:""}:"object"!=e(n)&&(n={content:t}),""!=n.content&&(n.content=n.content.stripScripts((function(e){n.javascript=e.replace(/<!--|\/\/-->|<!\[CDATA\[\/\/>|<!]]>/g,"")})),n.javascript&&this.options.evalScripts&&Browser.exec(n.javascript)),this.onSuccess(n.content,n)}},failure:function(){var e=this.getHeader("X-Ajax-Location");e&&401===this.status||e&&this.options.followRedirects&&this.status>=300&&this.status<400?location.replace(e):this.onFailure()}}),Class.refactor(Drag,{attach:function(){return this.handles.addEvent("touchstart",this.bound.start),this.previous.apply(this,arguments)},detach:function(){return this.handles.removeEvent("touchstart",this.bound.start),this.previous.apply(this,arguments)},start:function(){document.addEvents({touchmove:this.bound.check,touchend:this.bound.cancel}),this.previous.apply(this,arguments)},check:function(e){this.options.preventDefault&&e.preventDefault(),Math.round(Math.sqrt(Math.pow(e.page.x-this.mouse.start.x,2)+Math.pow(e.page.y-this.mouse.start.y,2)))>this.options.snap&&(this.cancel(),this.document.addEvents({mousemove:this.bound.drag,mouseup:this.bound.stop}),document.addEvents({touchmove:this.bound.drag,touchend:this.bound.stop}),this.fireEvent("start",[this.element,e]).fireEvent("snap",this.element))},cancel:function(){return document.removeEvents({touchmove:this.bound.check,touchend:this.bound.cancel}),this.previous.apply(this,arguments)},stop:function(){return document.removeEvents({touchmove:this.bound.drag,touchend:this.bound.stop}),this.previous.apply(this,arguments)}}),Class.refactor(Sortables,{initialize:function(e,t){return t.dragOptions=Object.merge(t.dragOptions||{},{preventDefault:t.dragOptions&&t.dragOptions.preventDefault||Browser.Features.Touch}),void 0===t.dragOptions.unDraggableTags&&(t.dragOptions.unDraggableTags=this.options.unDraggableTags.filter((function(e){return"button"!=e}))),this.previous.apply(this,arguments)},addItems:function(){return Array.flatten(arguments).each((function(e){this.elements.push(e);var t=e.retrieve("sortables:start",function(t){this.start.call(this,t,e)}.bind(this));(this.options.handle&&e.getElement(this.options.handle)||e).addEvents({mousedown:t,touchstart:t})}),this),this},removeItems:function(){return $$(Array.flatten(arguments).map((function(e){this.elements.erase(e);var t=e.retrieve("sortables:start");return(this.options.handle&&e.getElement(this.options.handle)||e).removeEvents({mousedown:t,touchend:t}),e}),this))},getClone:function(e,t){if(!this.options.clone)return new Element(t.tagName).inject(document.body);if("function"==typeOf(this.options.clone))return this.options.clone.call(this,e,t,this.list);var n=this.previous.apply(this,arguments);return n.addEvent("touchstart",(function(e){t.fireEvent("touchstart",e)})),n}}),Class.refactor(Request.Queue,{onComplete:function(){this.fireEvent("complete",arguments)},onCancel:function(){this.options.autoAdvance&&!this.error&&this.resume(),this.fireEvent("cancel",arguments)},onSuccess:function(){this.options.autoAdvance&&!this.error&&this.resume(),this.fireEvent("success",arguments),this.queue.length||this.isRunning()||this.fireEvent("end")},onFailure:function(){this.error=!0,!this.options.stopOnFailure&&this.options.autoAdvance&&this.resume(),this.fireEvent("failure",arguments),this.queue.length||this.isRunning()||this.fireEvent("end")},onException:function(){this.error=!0,!this.options.stopOnFailure&&this.options.autoAdvance&&this.resume(),this.fireEvent("exception",arguments)}}),Contao.SerpPreview=new Class({options:{id:0,trail:null,titleField:null,titleFallbackField:null,aliasField:null,descriptionField:null,descriptionFallbackField:null,titleTag:null},shorten:function(e,t){return e.length<=t?e:e.substr(0,e.lastIndexOf(" ",t))+" "},html2string:function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent.replace(/\[-]/g,"").replace(/\[nbsp]/g,"")},getTinymce:function(){if(window.tinyMCE&&this.options.descriptionFallbackField)return window.tinyMCE.get(this.options.descriptionFallbackField)},initialize:function(){this.options=Object.merge.apply(null,[{},this.options].append(arguments));var e=$("serp_title_"+this.options.id),t=$("serp_url_"+this.options.id),n=$("serp_description_"+this.options.id),r=$(this.options.titleField),i=$(this.options.titleFallbackField),o=$(this.options.aliasField),s=$(this.options.descriptionField),a=$(this.options.descriptionFallbackField),l=-1===this.options.trail.indexOf(""),c=this.options.titleTag||"%s";r&&r.addEvent("input",function(){r.value?e.set("text",this.shorten(this.html2string(c.replace(/%s/,r.value)).replace(/%%/g,"%"),64)):i&&i.value?e.set("text",this.shorten(this.html2string(c.replace(/%s/,i.value)).replace(/%%/g,"%"),64)):e.set("text","")}.bind(this)),i&&i.addEvent("input",function(){r&&r.value||e.set("text",this.shorten(this.html2string(c.replace(/%s/,i.value)).replace(/%%/g,"%"),64))}.bind(this)),o&&o.addEvent("input",function(){"index"==o.value&&l?t.set("text",this.options.trail):t.set("text",this.options.trail+"  "+(o.value||this.options.id).replace(/\//g,"  "))}.bind(this)),s&&s.addEvent("input",function(){if(s.value)n.set("text",this.shorten(s.value,160));else{var e=this.getTinymce();e?n.set("text",this.shorten(this.html2string(e.getContent()),160)):a&&a.value?n.set("text",this.shorten(this.html2string(a.value),160)):n.set("text","")}}.bind(this)),a&&a.addEvent("input",function(){s&&s.value||n.set("text",this.shorten(this.html2string(a.value),160))}.bind(this)),setTimeout(function(){var e=this.getTinymce();e&&e.on("keyup",function(){s&&s.value||n.set("text",this.shorten(this.html2string(window.tinyMCE.activeEditor.getContent()),160))}.bind(this))}.bind(this),4)}})},375:()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(){"use strict";var t=new WeakMap,n=new Event("store-scroll-offset"),r=function(e){if(!t.has(e)&&e.querySelector("button.drag-handle")){t.set(e,!0);var r=e.closest("tbody"),i=function(e){Array.from(e.children).forEach((function(e,t){e.querySelectorAll("input, select").forEach((function(e){e.name=e.name.replace(/\[[0-9]+]/g,"["+t+"]")}))})),new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){i(e)}})},o=function(e){e.querySelectorAll("button").forEach((function(t){switch(t.dataset.command){case"copy":t.addEventListener("click",(function(){window.dispatchEvent(n);for(var t=e.cloneNode(!0),s=e.querySelectorAll("select"),a=t.querySelectorAll("select"),l=0;l<s.length;l++)a[l].value=s[l].value;e.parentNode.insertBefore(t,e.nextSibling),o(t),i(r)}));break;case"delete":t.addEventListener("click",(function(){window.dispatchEvent(n),r.children.length>1?e.remove():(e.querySelectorAll("input").forEach((function(e){e.value=""})),e.querySelectorAll("select").forEach((function(e){e.value=e.children[0].value}))),i(r)}));break;default:t.classList.contains("drag-handle")&&t.addEventListener("keydown",(function(n){"ArrowUp"===n.code||38===n.keyCode?(n.preventDefault(),e.previousElementSibling?e.previousElementSibling.insertAdjacentElement("beforebegin",e):r.insertAdjacentElement("beforeend",e),t.focus(),i(r)):"ArrowDown"!==n.code&&40!==n.keyCode||(n.preventDefault(),e.nextElementSibling?e.nextElementSibling.insertAdjacentElement("afterend",e):r.insertAdjacentElement("afterbegin",e),t.focus(),i(r))}))}}))};i(r),o(e)}};document.querySelectorAll(".tl_sectionwizard tr").forEach(r),new MutationObserver((function(t){var n,i=e(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;"childList"===o.type&&o.addedNodes.forEach((function(e){e.matches&&e.matches(".tl_sectionwizard tr, .tl_sectionwizard tr *")&&r(e.closest("tr"))}))}}catch(e){i.e(e)}finally{i.f()}})).observe(document,{attributes:!1,childList:!0,subtree:!0})}()},813:()=>{function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(){var n=[],r=document.createElement("div");r.setAttribute("role","tooltip"),r.classList.add("tip"),r.style.position="absolute",r.style.display="none";var i=function(e,t,i,o){if(!n.includes(e)){var s,a;n.push(e),["mouseenter","touchend"].forEach((function(n){e.addEventListener(n,(function(n){var l;o?s=e.innerHTML:(s=e.getAttribute("title"),e.setAttribute("data-original-title",s),e.removeAttribute("title"),s=null===(l=s)||void 0===l?void 0:l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"));s&&(clearTimeout(a),r.style.willChange="display,contents",a=setTimeout((function(){var n=e.getBoundingClientRect(),o="rtl"===getComputedStyle(e).direction,a=document.html.clientWidth;o&&n.x<200||!o&&n.x<a-200?(r.style.left="".concat(window.scrollX+n.left+t,"px"),r.style.right="auto",r.classList.remove("tip--rtl")):(r.style.left="auto",r.style.right="".concat(a-window.scrollX-n.right+t,"px"),r.classList.add("tip--rtl")),r.innerHTML="<div>".concat(s,"</div>"),r.style.top="".concat(window.scrollY+n.top+i,"px"),r.style.display="block",r.style.willChange="auto",!r.parentNode&&document.body&&document.body.append(r)}),"mouseenter"===n.type?1e3:0))}))}));var l=function(t){e.hasAttribute("data-original-title")&&(e.hasAttribute("title")||e.setAttribute("title",e.getAttribute("data-original-title")),e.removeAttribute("data-original-title")),clearTimeout(a),r.style.willChange="auto","block"===r.style.display&&(r.style.willChange="display",a=setTimeout((function(){r.style.display="none",r.style.willChange="auto"}),"mouseleave"===t.type?100:0))};e.addEventListener("mouseleave",l),document.addEventListener("touchstart",(function(t){e.contains(t.target)||l(t)}));var c=e.closest("button, a");c&&c.addEventListener("click",(function(){clearTimeout(a),r.style.display="none",r.style.willChange="auto"}))}};function o(t,n){return t.matches(n)?[t].concat(e(t.querySelectorAll(n))):t.querySelectorAll(n)}function s(e){o(e,"p.tl_tip").forEach((function(e){i(e,0,23,!0)})),o(e,"#home").forEach((function(e){i(e,6,42)})),o(e,"#tmenu a[title]").forEach((function(e){i(e,0,42)})),o(e,'a[title][class^="group-"]').forEach((function(e){i(e,-6,27)})),o(e,"a[title].navigation").forEach((function(e){i(e,25,32)})),o(e,"img[title]").forEach((function(e){i(e,-9,e.classList.contains("gimage")?60:30)})),o(e,"a[title]").forEach((function(e){e.classList.contains("picker-wizard")?i(e,-4,30):i(e,-9,30)})),o(e,"button[title]").forEach((function(e){e.classList.contains("unselectable")?i(e,-4,20):i(e,-9,30)})),["input[title]","time[title]","span[title]"].forEach((function(t){o(e,t).forEach((function(e){i(e,-9,"time[title]"===t||"span[title]"===t?26:30)}))}))}s(document.documentElement),new MutationObserver((function(e){var n,r=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw s}}}}(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;"childList"===i.type&&i.addedNodes.forEach((function(e){e.matches&&e.querySelectorAll&&s(e)}))}}catch(e){r.e(e)}finally{r.f()}})).observe(document,{attributes:!1,childList:!0,subtree:!0})}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(891);function t(e,t){const n=e.default;if("function"==typeof n)return{identifier:t,controllerConstructor:n}}function r(e){const t=(e.match(/^(?:\.\/)?(.+)(?:[_-]controller\..+?)$/)||[])[1];if(t)return t.replace(/_/g,"-").replace(/\//g,"--")}n(672),n(420),n(338),n(260),n(375),n(813);var i=e.lg.start();i.debug=!1;var o=n(520);i.load(o.keys().map((function(e){var n=r(e);if(n)return t(o(e),"contao--".concat(n))})).filter((function(e){return e})))})()})();