{"version":3,"file":"backend.3ca4cd23.js","mappings":"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","sources":["webpack:///./core-bundle/assets/controllers/ sync \\.js$","webpack:///./core-bundle/node_modules/@hotwired/stimulus/dist/stimulus.js","webpack:///./core-bundle/assets/controllers/clipboard-controller.js","webpack:///./core-bundle/assets/controllers/color-scheme-controller.js","webpack:///./core-bundle/assets/controllers/image-size-controller.js","webpack:///./core-bundle/assets/controllers/jump-targets-controller.js","webpack:///./core-bundle/assets/controllers/limit-height-controller.js","webpack:///./core-bundle/assets/controllers/metawizard-controller.js","webpack:///./core-bundle/assets/controllers/scroll-offset-controller.js","webpack:///./core-bundle/assets/controllers/tinymce-controller.js","webpack:///./core-bundle/assets/controllers/toggle-fieldset-controller.js","webpack:///./core-bundle/assets/controllers/toggle-navigation-controller.js","webpack:///./core-bundle/assets/controllers/toggle-nodes-controller.js","webpack:///./core-bundle/assets/scripts/core.js","webpack:///./core-bundle/assets/scripts/limit-height.js","webpack:///./core-bundle/assets/scripts/modulewizard.js","webpack:///./core-bundle/assets/scripts/mootao.js","webpack:///./core-bundle/assets/scripts/sectionwizard.js","webpack:///./core-bundle/assets/scripts/tips.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./core-bundle/node_modules/@hotwired/stimulus-webpack-helpers/dist/stimulus-webpack-helpers.js","webpack:///./core-bundle/node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js","webpack:///./core-bundle/assets/backend.js"],"sourcesContent":["var map = {\n\t\"./clipboard-controller.js\": 294,\n\t\"./color-scheme-controller.js\": 191,\n\t\"./image-size-controller.js\": 35,\n\t\"./jump-targets-controller.js\": 161,\n\t\"./limit-height-controller.js\": 139,\n\t\"./metawizard-controller.js\": 74,\n\t\"./scroll-offset-controller.js\": 9,\n\t\"./tinymce-controller.js\": 779,\n\t\"./toggle-fieldset-controller.js\": 989,\n\t\"./toggle-navigation-controller.js\": 247,\n\t\"./toggle-nodes-controller.js\": 968\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 520;","/*\nStimulus 3.1.1\nCopyright  2022 Basecamp, LLC\n */\nclass EventListener {\n    constructor(eventTarget, eventName, eventOptions) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.eventOptions = eventOptions;\n        this.unorderedBindings = new Set();\n    }\n    connect() {\n        this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);\n    }\n    disconnect() {\n        this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);\n    }\n    bindingConnected(binding) {\n        this.unorderedBindings.add(binding);\n    }\n    bindingDisconnected(binding) {\n        this.unorderedBindings.delete(binding);\n    }\n    handleEvent(event) {\n        const extendedEvent = extendEvent(event);\n        for (const binding of this.bindings) {\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    }\n    hasBindings() {\n        return this.unorderedBindings.size > 0;\n    }\n    get bindings() {\n        return Array.from(this.unorderedBindings).sort((left, right) => {\n            const leftIndex = left.index, rightIndex = right.index;\n            return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n        });\n    }\n}\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        const { stopImmediatePropagation } = event;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation() {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation.call(this);\n            },\n        });\n    }\n}\n\nclass Dispatcher {\n    constructor(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map();\n        this.started = false;\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach((eventListener) => eventListener.connect());\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach((eventListener) => eventListener.disconnect());\n        }\n    }\n    get eventListeners() {\n        return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);\n    }\n    bindingConnected(binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    }\n    bindingDisconnected(binding, clearEventListeners = false) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n        if (clearEventListeners)\n            this.clearEventListenersForBinding(binding);\n    }\n    handleError(error, message, detail = {}) {\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    clearEventListenersForBinding(binding) {\n        const eventListener = this.fetchEventListenerForBinding(binding);\n        if (!eventListener.hasBindings()) {\n            eventListener.disconnect();\n            this.removeMappedEventListenerFor(binding);\n        }\n    }\n    removeMappedEventListenerFor(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        eventListenerMap.delete(cacheKey);\n        if (eventListenerMap.size == 0)\n            this.eventListenerMaps.delete(eventTarget);\n    }\n    fetchEventListenerForBinding(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        return this.fetchEventListener(eventTarget, eventName, eventOptions);\n    }\n    fetchEventListener(eventTarget, eventName, eventOptions) {\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        let eventListener = eventListenerMap.get(cacheKey);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName, eventOptions);\n            eventListenerMap.set(cacheKey, eventListener);\n        }\n        return eventListener;\n    }\n    createEventListener(eventTarget, eventName, eventOptions) {\n        const eventListener = new EventListener(eventTarget, eventName, eventOptions);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    }\n    fetchEventListenerMapForEventTarget(eventTarget) {\n        let eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map();\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    }\n    cacheKey(eventName, eventOptions) {\n        const parts = [eventName];\n        Object.keys(eventOptions)\n            .sort()\n            .forEach((key) => {\n            parts.push(`${eventOptions[key] ? \"\" : \"!\"}${key}`);\n        });\n        return parts.join(\":\");\n    }\n}\n\nconst defaultActionDescriptorFilters = {\n    stop({ event, value }) {\n        if (value)\n            event.stopPropagation();\n        return true;\n    },\n    prevent({ event, value }) {\n        if (value)\n            event.preventDefault();\n        return true;\n    },\n    self({ event, value, element }) {\n        if (value) {\n            return element === event.target;\n        }\n        else {\n            return true;\n        }\n    },\n};\nconst descriptorPattern = /^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;\nfunction parseActionDescriptorString(descriptorString) {\n    const source = descriptorString.trim();\n    const matches = source.match(descriptorPattern) || [];\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName: matches[2],\n        eventOptions: matches[9] ? parseEventOptions(matches[9]) : {},\n        identifier: matches[5],\n        methodName: matches[7],\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nfunction parseEventOptions(eventOptions) {\n    return eventOptions\n        .split(\":\")\n        .reduce((options, token) => Object.assign(options, { [token.replace(/^!/, \"\")]: !/^!/.test(token) }), {});\n}\nfunction stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n\nfunction camelize(value) {\n    return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());\n}\nfunction capitalize(value) {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n}\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);\n}\nfunction tokenize(value) {\n    return value.match(/[^\\s]+/g) || [];\n}\n\nclass Action {\n    constructor(element, index, descriptor) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.eventOptions = descriptor.eventOptions || {};\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n    }\n    static forToken(token) {\n        return new this(token.element, token.index, parseActionDescriptorString(token.content));\n    }\n    toString() {\n        const eventNameSuffix = this.eventTargetName ? `@${this.eventTargetName}` : \"\";\n        return `${this.eventName}${eventNameSuffix}->${this.identifier}#${this.methodName}`;\n    }\n    get params() {\n        const params = {};\n        const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, \"i\");\n        for (const { name, value } of Array.from(this.element.attributes)) {\n            const match = name.match(pattern);\n            const key = match && match[1];\n            if (key) {\n                params[camelize(key)] = typecast(value);\n            }\n        }\n        return params;\n    }\n    get eventTargetName() {\n        return stringifyEventTarget(this.eventTarget);\n    }\n}\nconst defaultEventNames = {\n    a: () => \"click\",\n    button: () => \"click\",\n    form: () => \"submit\",\n    details: () => \"toggle\",\n    input: (e) => (e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\"),\n    select: () => \"change\",\n    textarea: () => \"input\",\n};\nfunction getDefaultEventNameForElement(element) {\n    const tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\nfunction typecast(value) {\n    try {\n        return JSON.parse(value);\n    }\n    catch (o_O) {\n        return value;\n    }\n}\n\nclass Binding {\n    constructor(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    get index() {\n        return this.action.index;\n    }\n    get eventTarget() {\n        return this.action.eventTarget;\n    }\n    get eventOptions() {\n        return this.action.eventOptions;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    handleEvent(event) {\n        if (this.willBeInvokedByEvent(event) && this.applyEventModifiers(event)) {\n            this.invokeWithEvent(event);\n        }\n    }\n    get eventName() {\n        return this.action.eventName;\n    }\n    get method() {\n        const method = this.controller[this.methodName];\n        if (typeof method == \"function\") {\n            return method;\n        }\n        throw new Error(`Action \"${this.action}\" references undefined method \"${this.methodName}\"`);\n    }\n    applyEventModifiers(event) {\n        const { element } = this.action;\n        const { actionDescriptorFilters } = this.context.application;\n        let passes = true;\n        for (const [name, value] of Object.entries(this.eventOptions)) {\n            if (name in actionDescriptorFilters) {\n                const filter = actionDescriptorFilters[name];\n                passes = passes && filter({ name, value, event, element });\n            }\n            else {\n                continue;\n            }\n        }\n        return passes;\n    }\n    invokeWithEvent(event) {\n        const { target, currentTarget } = event;\n        try {\n            const { params } = this.action;\n            const actionEvent = Object.assign(event, { params });\n            this.method.call(this.controller, actionEvent);\n            this.context.logDebugActivity(this.methodName, { event, target, currentTarget, action: this.methodName });\n        }\n        catch (error) {\n            const { identifier, controller, element, index } = this;\n            const detail = { identifier, controller, element, index, event };\n            this.context.handleError(error, `invoking action \"${this.action}\"`, detail);\n        }\n    }\n    willBeInvokedByEvent(event) {\n        const eventTarget = event.target;\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return this.scope.containsElement(this.action.element);\n        }\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    get methodName() {\n        return this.action.methodName;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nclass ElementObserver {\n    constructor(element, delegate) {\n        this.mutationObserverInit = { attributes: true, childList: true, subtree: true };\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.refresh();\n        }\n    }\n    pause(callback) {\n        if (this.started) {\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n        callback();\n        if (!this.started) {\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            const matches = new Set(this.matchElementsInTree());\n            for (const element of Array.from(this.elements)) {\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (const element of Array.from(matches)) {\n                this.addElement(element);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    }\n    processAttributeChange(node, attributeName) {\n        const element = node;\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    }\n    processRemovedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    }\n    processAddedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    }\n    matchElement(element) {\n        return this.delegate.matchElement(element);\n    }\n    matchElementsInTree(tree = this.element) {\n        return this.delegate.matchElementsInTree(tree);\n    }\n    processTree(tree, processor) {\n        for (const element of this.matchElementsInTree(tree)) {\n            processor.call(this, element);\n        }\n    }\n    elementFromNode(node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    }\n    elementIsActive(element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    }\n    addElement(element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    }\n    removeElement(element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    }\n}\n\nclass AttributeObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    get selector() {\n        return `[${this.attributeName}]`;\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    matchElement(element) {\n        return element.hasAttribute(this.attributeName);\n    }\n    matchElementsInTree(tree) {\n        const match = this.matchElement(tree) ? [tree] : [];\n        const matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    }\n    elementMatched(element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementUnmatched(element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementAttributeChanged(element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    }\n}\n\nclass StringMapObserver {\n    constructor(element, delegate) {\n        this.element = element;\n        this.delegate = delegate;\n        this.started = false;\n        this.stringMap = new Map();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });\n            this.refresh();\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            for (const attributeName of this.knownAttributeNames) {\n                this.refreshAttribute(attributeName, null);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        const attributeName = mutation.attributeName;\n        if (attributeName) {\n            this.refreshAttribute(attributeName, mutation.oldValue);\n        }\n    }\n    refreshAttribute(attributeName, oldValue) {\n        const key = this.delegate.getStringMapKeyForAttribute(attributeName);\n        if (key != null) {\n            if (!this.stringMap.has(attributeName)) {\n                this.stringMapKeyAdded(key, attributeName);\n            }\n            const value = this.element.getAttribute(attributeName);\n            if (this.stringMap.get(attributeName) != value) {\n                this.stringMapValueChanged(value, key, oldValue);\n            }\n            if (value == null) {\n                const oldValue = this.stringMap.get(attributeName);\n                this.stringMap.delete(attributeName);\n                if (oldValue)\n                    this.stringMapKeyRemoved(key, attributeName, oldValue);\n            }\n            else {\n                this.stringMap.set(attributeName, value);\n            }\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        if (this.delegate.stringMapKeyAdded) {\n            this.delegate.stringMapKeyAdded(key, attributeName);\n        }\n    }\n    stringMapValueChanged(value, key, oldValue) {\n        if (this.delegate.stringMapValueChanged) {\n            this.delegate.stringMapValueChanged(value, key, oldValue);\n        }\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        if (this.delegate.stringMapKeyRemoved) {\n            this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);\n        }\n    }\n    get knownAttributeNames() {\n        return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));\n    }\n    get currentAttributeNames() {\n        return Array.from(this.element.attributes).map((attribute) => attribute.name);\n    }\n    get recordedAttributeNames() {\n        return Array.from(this.stringMap.keys());\n    }\n}\n\nfunction add(map, key, value) {\n    fetch(map, key).add(value);\n}\nfunction del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nfunction fetch(map, key) {\n    let values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nfunction prune(map, key) {\n    const values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n\nclass Multimap {\n    constructor() {\n        this.valuesByKey = new Map();\n    }\n    get keys() {\n        return Array.from(this.valuesByKey.keys());\n    }\n    get values() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((values, set) => values.concat(Array.from(set)), []);\n    }\n    get size() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((size, set) => size + set.size, 0);\n    }\n    add(key, value) {\n        add(this.valuesByKey, key, value);\n    }\n    delete(key, value) {\n        del(this.valuesByKey, key, value);\n    }\n    has(key, value) {\n        const values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    }\n    hasKey(key) {\n        return this.valuesByKey.has(key);\n    }\n    hasValue(value) {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.some((set) => set.has(value));\n    }\n    getValuesForKey(key) {\n        const values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    }\n    getKeysForValue(value) {\n        return Array.from(this.valuesByKey)\n            .filter(([_key, values]) => values.has(value))\n            .map(([key, _values]) => key);\n    }\n}\n\nclass IndexedMultimap extends Multimap {\n    constructor() {\n        super();\n        this.keysByValue = new Map();\n    }\n    get values() {\n        return Array.from(this.keysByValue.keys());\n    }\n    add(key, value) {\n        super.add(key, value);\n        add(this.keysByValue, value, key);\n    }\n    delete(key, value) {\n        super.delete(key, value);\n        del(this.keysByValue, value, key);\n    }\n    hasValue(value) {\n        return this.keysByValue.has(value);\n    }\n    getKeysForValue(value) {\n        const set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    }\n}\n\nclass TokenListObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap();\n    }\n    get started() {\n        return this.attributeObserver.started;\n    }\n    start() {\n        this.attributeObserver.start();\n    }\n    pause(callback) {\n        this.attributeObserver.pause(callback);\n    }\n    stop() {\n        this.attributeObserver.stop();\n    }\n    refresh() {\n        this.attributeObserver.refresh();\n    }\n    get element() {\n        return this.attributeObserver.element;\n    }\n    get attributeName() {\n        return this.attributeObserver.attributeName;\n    }\n    elementMatchedAttribute(element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    }\n    elementAttributeValueChanged(element) {\n        const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    }\n    elementUnmatchedAttribute(element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    }\n    tokensMatched(tokens) {\n        tokens.forEach((token) => this.tokenMatched(token));\n    }\n    tokensUnmatched(tokens) {\n        tokens.forEach((token) => this.tokenUnmatched(token));\n    }\n    tokenMatched(token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    }\n    tokenUnmatched(token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    }\n    refreshTokensForElement(element) {\n        const previousTokens = this.tokensByElement.getValuesForKey(element);\n        const currentTokens = this.readTokensForElement(element);\n        const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    }\n    readTokensForElement(element) {\n        const attributeName = this.attributeName;\n        const tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    }\n}\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString\n        .trim()\n        .split(/\\s+/)\n        .filter((content) => content.length)\n        .map((content, index) => ({ element, attributeName, content, index }));\n}\nfunction zip(left, right) {\n    const length = Math.max(left.length, right.length);\n    return Array.from({ length }, (_, index) => [left[index], right[index]]);\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n\nclass ValueListObserver {\n    constructor(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap();\n        this.valuesByTokenByElement = new WeakMap();\n    }\n    get started() {\n        return this.tokenListObserver.started;\n    }\n    start() {\n        this.tokenListObserver.start();\n    }\n    stop() {\n        this.tokenListObserver.stop();\n    }\n    refresh() {\n        this.tokenListObserver.refresh();\n    }\n    get element() {\n        return this.tokenListObserver.element;\n    }\n    get attributeName() {\n        return this.tokenListObserver.attributeName;\n    }\n    tokenMatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    }\n    tokenUnmatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    }\n    fetchParseResultForToken(token) {\n        let parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    }\n    fetchValuesByTokenForElement(element) {\n        let valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map();\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    }\n    parseToken(token) {\n        try {\n            const value = this.delegate.parseValueForToken(token);\n            return { value };\n        }\n        catch (error) {\n            return { error };\n        }\n    }\n}\n\nclass BindingObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map();\n    }\n    start() {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    }\n    stop() {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    }\n    get element() {\n        return this.context.element;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get actionAttribute() {\n        return this.schema.actionAttribute;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get bindings() {\n        return Array.from(this.bindingsByAction.values());\n    }\n    connectAction(action) {\n        const binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    }\n    disconnectAction(action) {\n        const binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    }\n    disconnectAllActions() {\n        this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));\n        this.bindingsByAction.clear();\n    }\n    parseValueForToken(token) {\n        const action = Action.forToken(token);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    }\n    elementMatchedValue(element, action) {\n        this.connectAction(action);\n    }\n    elementUnmatchedValue(element, action) {\n        this.disconnectAction(action);\n    }\n}\n\nclass ValueObserver {\n    constructor(context, receiver) {\n        this.context = context;\n        this.receiver = receiver;\n        this.stringMapObserver = new StringMapObserver(this.element, this);\n        this.valueDescriptorMap = this.controller.valueDescriptorMap;\n    }\n    start() {\n        this.stringMapObserver.start();\n        this.invokeChangedCallbacksForDefaultValues();\n    }\n    stop() {\n        this.stringMapObserver.stop();\n    }\n    get element() {\n        return this.context.element;\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    getStringMapKeyForAttribute(attributeName) {\n        if (attributeName in this.valueDescriptorMap) {\n            return this.valueDescriptorMap[attributeName].name;\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        const descriptor = this.valueDescriptorMap[attributeName];\n        if (!this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));\n        }\n    }\n    stringMapValueChanged(value, name, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[name];\n        if (value === null)\n            return;\n        if (oldValue === null) {\n            oldValue = descriptor.writer(descriptor.defaultValue);\n        }\n        this.invokeChangedCallback(name, value, oldValue);\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[key];\n        if (this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);\n        }\n        else {\n            this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);\n        }\n    }\n    invokeChangedCallbacksForDefaultValues() {\n        for (const { key, name, defaultValue, writer } of this.valueDescriptors) {\n            if (defaultValue != undefined && !this.controller.data.has(key)) {\n                this.invokeChangedCallback(name, writer(defaultValue), undefined);\n            }\n        }\n    }\n    invokeChangedCallback(name, rawValue, rawOldValue) {\n        const changedMethodName = `${name}Changed`;\n        const changedMethod = this.receiver[changedMethodName];\n        if (typeof changedMethod == \"function\") {\n            const descriptor = this.valueDescriptorNameMap[name];\n            try {\n                const value = descriptor.reader(rawValue);\n                let oldValue = rawOldValue;\n                if (rawOldValue) {\n                    oldValue = descriptor.reader(rawOldValue);\n                }\n                changedMethod.call(this.receiver, value, oldValue);\n            }\n            catch (error) {\n                if (error instanceof TypeError) {\n                    error.message = `Stimulus Value \"${this.context.identifier}.${descriptor.name}\" - ${error.message}`;\n                }\n                throw error;\n            }\n        }\n    }\n    get valueDescriptors() {\n        const { valueDescriptorMap } = this;\n        return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);\n    }\n    get valueDescriptorNameMap() {\n        const descriptors = {};\n        Object.keys(this.valueDescriptorMap).forEach((key) => {\n            const descriptor = this.valueDescriptorMap[key];\n            descriptors[descriptor.name] = descriptor;\n        });\n        return descriptors;\n    }\n    hasValue(attributeName) {\n        const descriptor = this.valueDescriptorNameMap[attributeName];\n        const hasMethodName = `has${capitalize(descriptor.name)}`;\n        return this.receiver[hasMethodName];\n    }\n}\n\nclass TargetObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.targetsByName = new Multimap();\n    }\n    start() {\n        if (!this.tokenListObserver) {\n            this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);\n            this.tokenListObserver.start();\n        }\n    }\n    stop() {\n        if (this.tokenListObserver) {\n            this.disconnectAllTargets();\n            this.tokenListObserver.stop();\n            delete this.tokenListObserver;\n        }\n    }\n    tokenMatched({ element, content: name }) {\n        if (this.scope.containsElement(element)) {\n            this.connectTarget(element, name);\n        }\n    }\n    tokenUnmatched({ element, content: name }) {\n        this.disconnectTarget(element, name);\n    }\n    connectTarget(element, name) {\n        var _a;\n        if (!this.targetsByName.has(name, element)) {\n            this.targetsByName.add(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));\n        }\n    }\n    disconnectTarget(element, name) {\n        var _a;\n        if (this.targetsByName.has(name, element)) {\n            this.targetsByName.delete(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));\n        }\n    }\n    disconnectAllTargets() {\n        for (const name of this.targetsByName.keys) {\n            for (const element of this.targetsByName.getValuesForKey(name)) {\n                this.disconnectTarget(element, name);\n            }\n        }\n    }\n    get attributeName() {\n        return `data-${this.context.identifier}-target`;\n    }\n    get element() {\n        return this.context.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nclass Context {\n    constructor(module, scope) {\n        this.logDebugActivity = (functionName, detail = {}) => {\n            const { identifier, controller, element } = this;\n            detail = Object.assign({ identifier, controller, element }, detail);\n            this.application.logDebugActivity(this.identifier, functionName, detail);\n        };\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        this.valueObserver = new ValueObserver(this, this.controller);\n        this.targetObserver = new TargetObserver(this, this);\n        try {\n            this.controller.initialize();\n            this.logDebugActivity(\"initialize\");\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    connect() {\n        this.bindingObserver.start();\n        this.valueObserver.start();\n        this.targetObserver.start();\n        try {\n            this.controller.connect();\n            this.logDebugActivity(\"connect\");\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    }\n    disconnect() {\n        try {\n            this.controller.disconnect();\n            this.logDebugActivity(\"disconnect\");\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.targetObserver.stop();\n        this.valueObserver.stop();\n        this.bindingObserver.stop();\n    }\n    get application() {\n        return this.module.application;\n    }\n    get identifier() {\n        return this.module.identifier;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get dispatcher() {\n        return this.application.dispatcher;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get parentElement() {\n        return this.element.parentElement;\n    }\n    handleError(error, message, detail = {}) {\n        const { identifier, controller, element } = this;\n        detail = Object.assign({ identifier, controller, element }, detail);\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    targetConnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetConnected`, element);\n    }\n    targetDisconnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetDisconnected`, element);\n    }\n    invokeControllerMethod(methodName, ...args) {\n        const controller = this.controller;\n        if (typeof controller[methodName] == \"function\") {\n            controller[methodName](...args);\n        }\n    }\n}\n\nfunction readInheritableStaticArrayValues(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce((values, constructor) => {\n        getOwnStaticArrayValues(constructor, propertyName).forEach((name) => values.add(name));\n        return values;\n    }, new Set()));\n}\nfunction readInheritableStaticObjectPairs(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return ancestors.reduce((pairs, constructor) => {\n        pairs.push(...getOwnStaticObjectPairs(constructor, propertyName));\n        return pairs;\n    }, []);\n}\nfunction getAncestorsForConstructor(constructor) {\n    const ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors.reverse();\n}\nfunction getOwnStaticArrayValues(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction getOwnStaticObjectPairs(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];\n}\n\nfunction bless(constructor) {\n    return shadow(constructor, getBlessedProperties(constructor));\n}\nfunction shadow(constructor, properties) {\n    const shadowConstructor = extend(constructor);\n    const shadowProperties = getShadowProperties(constructor.prototype, properties);\n    Object.defineProperties(shadowConstructor.prototype, shadowProperties);\n    return shadowConstructor;\n}\nfunction getBlessedProperties(constructor) {\n    const blessings = readInheritableStaticArrayValues(constructor, \"blessings\");\n    return blessings.reduce((blessedProperties, blessing) => {\n        const properties = blessing(constructor);\n        for (const key in properties) {\n            const descriptor = blessedProperties[key] || {};\n            blessedProperties[key] = Object.assign(descriptor, properties[key]);\n        }\n        return blessedProperties;\n    }, {});\n}\nfunction getShadowProperties(prototype, properties) {\n    return getOwnKeys(properties).reduce((shadowProperties, key) => {\n        const descriptor = getShadowedDescriptor(prototype, properties, key);\n        if (descriptor) {\n            Object.assign(shadowProperties, { [key]: descriptor });\n        }\n        return shadowProperties;\n    }, {});\n}\nfunction getShadowedDescriptor(prototype, properties, key) {\n    const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);\n    const shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor;\n    if (!shadowedByValue) {\n        const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;\n        if (shadowingDescriptor) {\n            descriptor.get = shadowingDescriptor.get || descriptor.get;\n            descriptor.set = shadowingDescriptor.set || descriptor.set;\n        }\n        return descriptor;\n    }\n}\nconst getOwnKeys = (() => {\n    if (typeof Object.getOwnPropertySymbols == \"function\") {\n        return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];\n    }\n    else {\n        return Object.getOwnPropertyNames;\n    }\n})();\nconst extend = (() => {\n    function extendWithReflect(constructor) {\n        function extended() {\n            return Reflect.construct(constructor, arguments, new.target);\n        }\n        extended.prototype = Object.create(constructor.prototype, {\n            constructor: { value: extended },\n        });\n        Reflect.setPrototypeOf(extended, constructor);\n        return extended;\n    }\n    function testReflectExtension() {\n        const a = function () {\n            this.a.call(this);\n        };\n        const b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b();\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return (constructor) => class extended extends constructor {\n        };\n    }\n})();\n\nfunction blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: bless(definition.controllerConstructor),\n    };\n}\n\nclass Module {\n    constructor(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap();\n        this.connectedContexts = new Set();\n    }\n    get identifier() {\n        return this.definition.identifier;\n    }\n    get controllerConstructor() {\n        return this.definition.controllerConstructor;\n    }\n    get contexts() {\n        return Array.from(this.connectedContexts);\n    }\n    connectContextForScope(scope) {\n        const context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    }\n    disconnectContextForScope(scope) {\n        const context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    }\n    fetchContextForScope(scope) {\n        let context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    }\n}\n\nclass ClassMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    has(name) {\n        return this.data.has(this.getDataKey(name));\n    }\n    get(name) {\n        return this.getAll(name)[0];\n    }\n    getAll(name) {\n        const tokenString = this.data.get(this.getDataKey(name)) || \"\";\n        return tokenize(tokenString);\n    }\n    getAttributeName(name) {\n        return this.data.getAttributeNameForKey(this.getDataKey(name));\n    }\n    getDataKey(name) {\n        return `${name}-class`;\n    }\n    get data() {\n        return this.scope.data;\n    }\n}\n\nclass DataMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.getAttribute(name);\n    }\n    set(key, value) {\n        const name = this.getAttributeNameForKey(key);\n        this.element.setAttribute(name, value);\n        return this.get(key);\n    }\n    has(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.hasAttribute(name);\n    }\n    delete(key) {\n        if (this.has(key)) {\n            const name = this.getAttributeNameForKey(key);\n            this.element.removeAttribute(name);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    getAttributeNameForKey(key) {\n        return `data-${this.identifier}-${dasherize(key)}`;\n    }\n}\n\nclass Guide {\n    constructor(logger) {\n        this.warnedKeysByObject = new WeakMap();\n        this.logger = logger;\n    }\n    warn(object, key, message) {\n        let warnedKeys = this.warnedKeysByObject.get(object);\n        if (!warnedKeys) {\n            warnedKeys = new Set();\n            this.warnedKeysByObject.set(object, warnedKeys);\n        }\n        if (!warnedKeys.has(key)) {\n            warnedKeys.add(key);\n            this.logger.warn(message, object);\n        }\n    }\n}\n\nfunction attributeValueContainsToken(attributeName, token) {\n    return `[${attributeName}~=\"${token}\"]`;\n}\n\nclass TargetSet {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(targetName) {\n        return this.find(targetName) != null;\n    }\n    find(...targetNames) {\n        return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), undefined);\n    }\n    findAll(...targetNames) {\n        return targetNames.reduce((targets, targetName) => [\n            ...targets,\n            ...this.findAllTargets(targetName),\n            ...this.findAllLegacyTargets(targetName),\n        ], []);\n    }\n    findTarget(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findElement(selector);\n    }\n    findAllTargets(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector);\n    }\n    getSelectorForTargetName(targetName) {\n        const attributeName = this.schema.targetAttributeForScope(this.identifier);\n        return attributeValueContainsToken(attributeName, targetName);\n    }\n    findLegacyTarget(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.deprecate(this.scope.findElement(selector), targetName);\n    }\n    findAllLegacyTargets(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));\n    }\n    getLegacySelectorForTargetName(targetName) {\n        const targetDescriptor = `${this.identifier}.${targetName}`;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    }\n    deprecate(element, targetName) {\n        if (element) {\n            const { identifier } = this;\n            const attributeName = this.schema.targetAttribute;\n            const revisedAttributeName = this.schema.targetAttributeForScope(identifier);\n            this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}=\"${identifier}.${targetName}\" with ${revisedAttributeName}=\"${targetName}\". ` +\n                `The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);\n        }\n        return element;\n    }\n    get guide() {\n        return this.scope.guide;\n    }\n}\n\nclass Scope {\n    constructor(schema, element, identifier, logger) {\n        this.targets = new TargetSet(this);\n        this.classes = new ClassMap(this);\n        this.data = new DataMap(this);\n        this.containsElement = (element) => {\n            return element.closest(this.controllerSelector) === this.element;\n        };\n        this.schema = schema;\n        this.element = element;\n        this.identifier = identifier;\n        this.guide = new Guide(logger);\n    }\n    findElement(selector) {\n        return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);\n    }\n    findAllElements(selector) {\n        return [\n            ...(this.element.matches(selector) ? [this.element] : []),\n            ...this.queryElements(selector).filter(this.containsElement),\n        ];\n    }\n    queryElements(selector) {\n        return Array.from(this.element.querySelectorAll(selector));\n    }\n    get controllerSelector() {\n        return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n    }\n}\n\nclass ScopeObserver {\n    constructor(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap();\n        this.scopeReferenceCounts = new WeakMap();\n    }\n    start() {\n        this.valueListObserver.start();\n    }\n    stop() {\n        this.valueListObserver.stop();\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    parseValueForToken(token) {\n        const { element, content: identifier } = token;\n        const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        let scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = this.delegate.createScopeForElementAndIdentifier(element, identifier);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    }\n    elementMatchedValue(element, value) {\n        const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    }\n    elementUnmatchedValue(element, value) {\n        const referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    }\n    fetchScopesByIdentifierForElement(element) {\n        let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map();\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    }\n}\n\nclass Router {\n    constructor(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap();\n        this.modulesByIdentifier = new Map();\n    }\n    get element() {\n        return this.application.element;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get logger() {\n        return this.application.logger;\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    get modules() {\n        return Array.from(this.modulesByIdentifier.values());\n    }\n    get contexts() {\n        return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);\n    }\n    start() {\n        this.scopeObserver.start();\n    }\n    stop() {\n        this.scopeObserver.stop();\n    }\n    loadDefinition(definition) {\n        this.unloadIdentifier(definition.identifier);\n        const module = new Module(this.application, definition);\n        this.connectModule(module);\n    }\n    unloadIdentifier(identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    }\n    getContextForElementAndIdentifier(element, identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find((context) => context.element == element);\n        }\n    }\n    handleError(error, message, detail) {\n        this.application.handleError(error, message, detail);\n    }\n    createScopeForElementAndIdentifier(element, identifier) {\n        return new Scope(this.schema, element, identifier, this.logger);\n    }\n    scopeConnected(scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    }\n    scopeDisconnected(scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    }\n    connectModule(module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.connectContextForScope(scope));\n    }\n    disconnectModule(module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.disconnectContextForScope(scope));\n    }\n}\n\nconst defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\",\n    targetAttributeForScope: (identifier) => `data-${identifier}-target`,\n};\n\nclass Application {\n    constructor(element = document.documentElement, schema = defaultSchema) {\n        this.logger = console;\n        this.debug = false;\n        this.logDebugActivity = (identifier, functionName, detail = {}) => {\n            if (this.debug) {\n                this.logFormattedMessage(identifier, functionName, detail);\n            }\n        };\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n        this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);\n    }\n    static start(element, schema) {\n        const application = new Application(element, schema);\n        application.start();\n        return application;\n    }\n    async start() {\n        await domReady();\n        this.logDebugActivity(\"application\", \"starting\");\n        this.dispatcher.start();\n        this.router.start();\n        this.logDebugActivity(\"application\", \"start\");\n    }\n    stop() {\n        this.logDebugActivity(\"application\", \"stopping\");\n        this.dispatcher.stop();\n        this.router.stop();\n        this.logDebugActivity(\"application\", \"stop\");\n    }\n    register(identifier, controllerConstructor) {\n        this.load({ identifier, controllerConstructor });\n    }\n    registerActionOption(name, filter) {\n        this.actionDescriptorFilters[name] = filter;\n    }\n    load(head, ...rest) {\n        const definitions = Array.isArray(head) ? head : [head, ...rest];\n        definitions.forEach((definition) => {\n            if (definition.controllerConstructor.shouldLoad) {\n                this.router.loadDefinition(definition);\n            }\n        });\n    }\n    unload(head, ...rest) {\n        const identifiers = Array.isArray(head) ? head : [head, ...rest];\n        identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));\n    }\n    get controllers() {\n        return this.router.contexts.map((context) => context.controller);\n    }\n    getControllerForElementAndIdentifier(element, identifier) {\n        const context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    }\n    handleError(error, message, detail) {\n        var _a;\n        this.logger.error(`%s\\n\\n%o\\n\\n%o`, message, error, detail);\n        (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, \"\", 0, 0, error);\n    }\n    logFormattedMessage(identifier, functionName, detail = {}) {\n        detail = Object.assign({ application: this }, detail);\n        this.logger.groupCollapsed(`${identifier} #${functionName}`);\n        this.logger.log(\"details:\", Object.assign({}, detail));\n        this.logger.groupEnd();\n    }\n}\nfunction domReady() {\n    return new Promise((resolve) => {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", () => resolve());\n        }\n        else {\n            resolve();\n        }\n    });\n}\n\nfunction ClassPropertiesBlessing(constructor) {\n    const classes = readInheritableStaticArrayValues(constructor, \"classes\");\n    return classes.reduce((properties, classDefinition) => {\n        return Object.assign(properties, propertiesForClassDefinition(classDefinition));\n    }, {});\n}\nfunction propertiesForClassDefinition(key) {\n    return {\n        [`${key}Class`]: {\n            get() {\n                const { classes } = this;\n                if (classes.has(key)) {\n                    return classes.get(key);\n                }\n                else {\n                    const attribute = classes.getAttributeName(key);\n                    throw new Error(`Missing attribute \"${attribute}\"`);\n                }\n            },\n        },\n        [`${key}Classes`]: {\n            get() {\n                return this.classes.getAll(key);\n            },\n        },\n        [`has${capitalize(key)}Class`]: {\n            get() {\n                return this.classes.has(key);\n            },\n        },\n    };\n}\n\nfunction TargetPropertiesBlessing(constructor) {\n    const targets = readInheritableStaticArrayValues(constructor, \"targets\");\n    return targets.reduce((properties, targetDefinition) => {\n        return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));\n    }, {});\n}\nfunction propertiesForTargetDefinition(name) {\n    return {\n        [`${name}Target`]: {\n            get() {\n                const target = this.targets.find(name);\n                if (target) {\n                    return target;\n                }\n                else {\n                    throw new Error(`Missing target element \"${name}\" for \"${this.identifier}\" controller`);\n                }\n            },\n        },\n        [`${name}Targets`]: {\n            get() {\n                return this.targets.findAll(name);\n            },\n        },\n        [`has${capitalize(name)}Target`]: {\n            get() {\n                return this.targets.has(name);\n            },\n        },\n    };\n}\n\nfunction ValuePropertiesBlessing(constructor) {\n    const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, \"values\");\n    const propertyDescriptorMap = {\n        valueDescriptorMap: {\n            get() {\n                return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {\n                    const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);\n                    const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);\n                    return Object.assign(result, { [attributeName]: valueDescriptor });\n                }, {});\n            },\n        },\n    };\n    return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {\n        return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));\n    }, propertyDescriptorMap);\n}\nfunction propertiesForValueDefinitionPair(valueDefinitionPair, controller) {\n    const definition = parseValueDefinitionPair(valueDefinitionPair, controller);\n    const { key, name, reader: read, writer: write } = definition;\n    return {\n        [name]: {\n            get() {\n                const value = this.data.get(key);\n                if (value !== null) {\n                    return read(value);\n                }\n                else {\n                    return definition.defaultValue;\n                }\n            },\n            set(value) {\n                if (value === undefined) {\n                    this.data.delete(key);\n                }\n                else {\n                    this.data.set(key, write(value));\n                }\n            },\n        },\n        [`has${capitalize(name)}`]: {\n            get() {\n                return this.data.has(key) || definition.hasCustomDefaultValue;\n            },\n        },\n    };\n}\nfunction parseValueDefinitionPair([token, typeDefinition], controller) {\n    return valueDescriptorForTokenAndTypeDefinition({\n        controller,\n        token,\n        typeDefinition,\n    });\n}\nfunction parseValueTypeConstant(constant) {\n    switch (constant) {\n        case Array:\n            return \"array\";\n        case Boolean:\n            return \"boolean\";\n        case Number:\n            return \"number\";\n        case Object:\n            return \"object\";\n        case String:\n            return \"string\";\n    }\n}\nfunction parseValueTypeDefault(defaultValue) {\n    switch (typeof defaultValue) {\n        case \"boolean\":\n            return \"boolean\";\n        case \"number\":\n            return \"number\";\n        case \"string\":\n            return \"string\";\n    }\n    if (Array.isArray(defaultValue))\n        return \"array\";\n    if (Object.prototype.toString.call(defaultValue) === \"[object Object]\")\n        return \"object\";\n}\nfunction parseValueTypeObject(payload) {\n    const typeFromObject = parseValueTypeConstant(payload.typeObject.type);\n    if (!typeFromObject)\n        return;\n    const defaultValueType = parseValueTypeDefault(payload.typeObject.default);\n    if (typeFromObject !== defaultValueType) {\n        const propertyPath = payload.controller ? `${payload.controller}.${payload.token}` : payload.token;\n        throw new Error(`The specified default value for the Stimulus Value \"${propertyPath}\" must match the defined type \"${typeFromObject}\". The provided default value of \"${payload.typeObject.default}\" is of type \"${defaultValueType}\".`);\n    }\n    return typeFromObject;\n}\nfunction parseValueTypeDefinition(payload) {\n    const typeFromObject = parseValueTypeObject({\n        controller: payload.controller,\n        token: payload.token,\n        typeObject: payload.typeDefinition,\n    });\n    const typeFromDefaultValue = parseValueTypeDefault(payload.typeDefinition);\n    const typeFromConstant = parseValueTypeConstant(payload.typeDefinition);\n    const type = typeFromObject || typeFromDefaultValue || typeFromConstant;\n    if (type)\n        return type;\n    const propertyPath = payload.controller ? `${payload.controller}.${payload.typeDefinition}` : payload.token;\n    throw new Error(`Unknown value type \"${propertyPath}\" for \"${payload.token}\" value`);\n}\nfunction defaultValueForDefinition(typeDefinition) {\n    const constant = parseValueTypeConstant(typeDefinition);\n    if (constant)\n        return defaultValuesByType[constant];\n    const defaultValue = typeDefinition.default;\n    if (defaultValue !== undefined)\n        return defaultValue;\n    return typeDefinition;\n}\nfunction valueDescriptorForTokenAndTypeDefinition(payload) {\n    const key = `${dasherize(payload.token)}-value`;\n    const type = parseValueTypeDefinition(payload);\n    return {\n        type,\n        key,\n        name: camelize(key),\n        get defaultValue() {\n            return defaultValueForDefinition(payload.typeDefinition);\n        },\n        get hasCustomDefaultValue() {\n            return parseValueTypeDefault(payload.typeDefinition) !== undefined;\n        },\n        reader: readers[type],\n        writer: writers[type] || writers.default,\n    };\n}\nconst defaultValuesByType = {\n    get array() {\n        return [];\n    },\n    boolean: false,\n    number: 0,\n    get object() {\n        return {};\n    },\n    string: \"\",\n};\nconst readers = {\n    array(value) {\n        const array = JSON.parse(value);\n        if (!Array.isArray(array)) {\n            throw new TypeError(`expected value of type \"array\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(array)}\"`);\n        }\n        return array;\n    },\n    boolean(value) {\n        return !(value == \"0\" || String(value).toLowerCase() == \"false\");\n    },\n    number(value) {\n        return Number(value);\n    },\n    object(value) {\n        const object = JSON.parse(value);\n        if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n            throw new TypeError(`expected value of type \"object\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(object)}\"`);\n        }\n        return object;\n    },\n    string(value) {\n        return value;\n    },\n};\nconst writers = {\n    default: writeString,\n    array: writeJSON,\n    object: writeJSON,\n};\nfunction writeJSON(value) {\n    return JSON.stringify(value);\n}\nfunction writeString(value) {\n    return `${value}`;\n}\n\nclass Controller {\n    constructor(context) {\n        this.context = context;\n    }\n    static get shouldLoad() {\n        return true;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get targets() {\n        return this.scope.targets;\n    }\n    get classes() {\n        return this.scope.classes;\n    }\n    get data() {\n        return this.scope.data;\n    }\n    initialize() {\n    }\n    connect() {\n    }\n    disconnect() {\n    }\n    dispatch(eventName, { target = this.element, detail = {}, prefix = this.identifier, bubbles = true, cancelable = true } = {}) {\n        const type = prefix ? `${prefix}:${eventName}` : eventName;\n        const event = new CustomEvent(type, { detail, bubbles, cancelable });\n        target.dispatchEvent(event);\n        return event;\n    }\n}\nController.blessings = [ClassPropertiesBlessing, TargetPropertiesBlessing, ValuePropertiesBlessing];\nController.targets = [];\nController.values = {};\n\nexport { Application, AttributeObserver, Context, Controller, ElementObserver, IndexedMultimap, Multimap, StringMapObserver, TokenListObserver, ValueListObserver, add, defaultSchema, del, fetch, prune };\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static values = {\n        content: String\n    }\n\n    write () {\n        if (navigator.clipboard && navigator.clipboard.writeText) {\n            navigator.clipboard.writeText(this.contentValue).catch(this.clipboardFallback.bind(this));\n        } else {\n            this.clipboardFallback();\n        }\n    }\n\n    clipboardFallback  () {\n        const input = document.createElement('input');\n        input.value = this.contentValue;\n        document.body.appendChild(input);\n        input.select();\n        input.setSelectionRange(0, 99999);\n        document.execCommand('copy');\n        document.body.removeChild(input);\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nconst prefersDark = () => {\n    const prefersDark = localStorage.getItem('contao--prefers-dark');\n\n    if (null === prefersDark) {\n        return !!window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n\n    return prefersDark === 'true';\n}\n\nconst setColorScheme = () => {\n    document.documentElement.dataset.colorScheme = prefersDark() ? 'dark' : 'light';\n};\n\nwindow.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', setColorScheme);\nsetColorScheme();\n\nexport default class extends Controller {\n    static targets = ['label'];\n\n    static values = {\n        i18n: {\n            type: Object,\n            default: { light: 'Disable dark mode', dark: 'Enable dark mode' }\n        }\n    };\n\n    initialize () {\n        this.toggle = this.toggle.bind(this);\n        this.setLabel = this.setLabel.bind(this);\n    }\n\n    connect () {\n        this.element.addEventListener('click', this.toggle);\n\n        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', this.setLabel);\n        this.setLabel();\n    }\n\n    disconnect () {\n        this.element.removeEventListener('click', this.toggle);\n    }\n\n    toggle (e) {\n        e.preventDefault();\n\n        const isDark = !prefersDark();\n\n        if (isDark === window.matchMedia('(prefers-color-scheme: dark)').matches) {\n            localStorage.removeItem('contao--prefers-dark');\n        } else {\n            localStorage.setItem('contao--prefers-dark', String(isDark));\n        }\n\n        setColorScheme();\n\n        // Change the label after the dropdown is hidden\n        setTimeout(this.setLabel, 300);\n    }\n\n    setLabel () {\n        if (!this.hasLabelTarget) {\n            return;\n        }\n\n        const label = this.i18nValue[prefersDark() ? 'light' : 'dark'];\n\n        this.labelTarget.title = label;\n        this.labelTarget.innerText = label;\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static values = {\n        config: Object,\n    }\n\n    initialize () {\n        this.updateWizard = this.updateWizard.bind(this);\n        this.openModal = this.openModal.bind(this);\n    }\n\n    connect () {\n        this.select = this.element.querySelector('select');\n        this.button = document.createElement('button');\n        this.button.type = 'button';\n        this.button.title = '';\n        this.buttonImage = document.createElement('img');\n        this.button.append(this.buttonImage);\n        this.element.parentNode.classList.add('wizard');\n        this.element.after(this.button);\n\n        this.select.addEventListener('change', this.updateWizard);\n        this.button.addEventListener('click', this.openModal);\n\n        this.updateWizard();\n    }\n\n    disconnect () {\n        this.element.parentNode.classList.remove('wizard');\n        this.select.removeEventListener('change', this.updateWizard);\n        this.buttonImage.remove();\n        this.button.remove();\n    }\n\n    updateWizard () {\n        if (this.canEdit()) {\n            this.button.title = this.configValue.title;\n            this.button.disabled = false;\n            this.buttonImage.src = this.configValue.icon;\n        } else {\n            this.button.title = '';\n            this.button.disabled = true;\n            this.buttonImage.src = this.configValue.iconDisabled;\n        }\n    }\n\n    openModal () {\n        Backend.openModalIframe({\n            title: this.configValue.title,\n            url: `${ this.configValue.href }&id=${ this.select.value }`\n        });\n    }\n\n    canEdit () {\n        return this.configValue.ids.includes(Number(this.select.value));\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static targets = ['navigation', 'section'];\n\n    connect () {\n        this.rebuildNavigation();\n        this.connected = true;\n    }\n\n    sectionTargetConnected () {\n        if (!this.connected) {\n            return;\n        }\n\n        this.rebuildNavigation();\n    }\n\n    rebuildNavigation () {\n        if (!this.hasNavigationTarget) {\n            return;\n        }\n\n        const links = document.createElement('ul');\n\n        this.sectionTargets.forEach((el) => {\n            const action = document.createElement('button');\n            action.innerText = el.getAttribute(`data-${this.identifier}-label-value`);\n\n            action.addEventListener('click', (event) => {\n                event.preventDefault();\n                this.dispatch('scrollto', { target: el });\n                el.scrollIntoView();\n            });\n\n            const li = document.createElement('li');\n            li.append(action);\n\n            links.append(li);\n        });\n\n        this.navigationTarget.replaceChildren(links);\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static values = {\n        max: Number,\n        expand: String,\n        collapse: String,\n        expandAll: String,\n        expandAllTitle: String,\n        collapseAll: String,\n        collapseAllTitle: String,\n    }\n\n    static targets = ['operation', 'node'];\n\n    initialize () {\n        super.initialize();\n        this.togglerMap = new WeakMap();\n        this.nextId = 1;\n    }\n\n    operationTargetConnected () {\n        this.updateOperation();\n    }\n\n    nodeTargetConnected (node) {\n        const style = window.getComputedStyle(node, null);\n        const padding = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);\n        const height = node.clientHeight - padding;\n\n        // Resize the element if it is higher than the maximum height\n        if (this.maxValue > height) {\n            return;\n        }\n\n        if (!node.id) {\n            node.id = `limit-height-${this.nextId++}`;\n        }\n\n        node.style.overflow = 'hidden';\n        node.style.maxHeight = `${this.maxValue}px`;\n\n        const button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.title = this.expandValue;\n        button.innerHTML = '<span>...</span>';\n        button.classList.add('unselectable');\n        button.setAttribute('aria-expanded', 'false');\n        button.setAttribute('aria-controls', node.id);\n\n        button.addEventListener('click', (event) => {\n            event.preventDefault();\n            this.toggle(node);\n            this.updateOperation(event);\n        });\n\n        const toggler = document.createElement('div');\n        toggler.classList.add('limit_toggler');\n        toggler.append(button);\n\n        this.togglerMap.set(node, toggler);\n\n        node.append(toggler);\n        this.updateOperation();\n    }\n\n    nodeTargetDisconnected (node) {\n        if (!this.togglerMap.has(node)) {\n            return;\n        }\n\n        this.togglerMap.get(node).remove();\n        this.togglerMap.delete(node);\n        node.style.overflow = '';\n        node.style.maxHeight = '';\n    }\n\n    toggle (node) {\n        if (node.style.maxHeight === '') {\n            this.collapse(node);\n        } else {\n            this.expand(node);\n        }\n    }\n\n    expand (node) {\n        if (!this.togglerMap.has(node)) {\n            return;\n        }\n\n        node.style.maxHeight = '';\n        const button = this.togglerMap.get(node).querySelector('button');\n        button.title = this.collapseValue;\n        button.setAttribute('aria-expanded', 'true');\n    }\n\n    collapse (node) {\n        if (!this.togglerMap.has(node)) {\n            return;\n        }\n\n        node.style.maxHeight = `${this.maxValue}px`;\n        const button = this.togglerMap.get(node).querySelector('button');\n        button.title = this.expandValue;\n        button.setAttribute('aria-expanded', 'false');\n    }\n\n    toggleAll (event) {\n        event.preventDefault();\n        const isExpanded = this.hasExpanded() ^ event.altKey;\n\n        this.nodeTargets.forEach((node) => {\n            if (isExpanded) {\n                this.collapse(node);\n            } else {\n                this.expand(node);\n            }\n        });\n\n        this.updateOperation(event);\n    }\n\n    keypress (event) {\n        this.updateOperation(event);\n    }\n\n    updateOperation (event) {\n        if (!this.hasOperationTarget) {\n            return;\n        }\n\n        const hasTogglers = !!this.nodeTargets.find((el) => this.togglerMap.has(el));\n        const expanded = this.hasExpanded();\n\n        this.operationTarget.style.display = hasTogglers ? '' : 'none';\n        this.operationTarget.setAttribute('aria-controls', this.nodeTargets.map((el) => el.id).join(' '));\n        this.operationTarget.setAttribute('aria-expanded', expanded ? 'true' : 'false');\n\n        if (expanded ^ (event ? event.altKey : false)) {\n            this.operationTarget.innerText = this.collapseAllValue;\n            this.operationTarget.title = this.collapseAllTitleValue;\n        } else {\n            this.operationTarget.innerText = this.expandAllValue;\n            this.operationTarget.title = this.expandAllTitleValue;\n        }\n    }\n\n    hasExpanded () {\n        return !!this.nodeTargets.find((el) => this.togglerMap.has(el) && el.style.maxHeight === '');\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static targets = ['input']\n\n    delete () {\n        this.inputTargets.forEach((input) => {\n            input.value = '';\n        })\n    }\n}\n","import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n    static targets = ['scrollTo', 'autoFocus'];\n\n    static values = {\n        sessionKey: {\n            type: String,\n            default: 'contao_backend_offset'\n        },\n        behavior: {\n            type: String,\n            default: 'instant'\n        },\n        block: {\n            type: String,\n            default: 'center'\n        }\n    };\n\n    // Backwards compatibility: automatically register the Stimulus controller if the legacy methods are used\n    static afterLoad(identifier, application) {\n        const loadFallback = () => {\n            return new Promise((resolve, reject) => {\n                const controller = application.getControllerForElementAndIdentifier(document.documentElement, identifier);\n\n                if (controller) {\n                    resolve(controller);\n                    return;\n                }\n\n                const { controllerAttribute } = application.schema;\n                document.documentElement.setAttribute(controllerAttribute, `${document.documentElement.getAttribute(controllerAttribute) || ''} ${ identifier }`);\n\n                setTimeout(() => {\n                    const controller = application.getControllerForElementAndIdentifier(document.documentElement, identifier);\n                    controller && resolve(controller) || reject(controller);\n                }, 100);\n            });\n        }\n\n        if (window.Backend && !window.Backend.initScrollOffset) {\n            window.Backend.initScrollOffset = () => {\n                console.warn('Backend.initScrollOffset() is deprecated. Please use the Stimulus controller instead.');\n                loadFallback();\n            }\n        }\n\n        if (window.Backend && !window.Backend.getScrollOffset) {\n            window.Backend.getScrollOffset = () => {\n                console.warn('Backend.getScrollOffset() is deprecated. Please use the Stimulus controller instead.');\n                loadFallback().then((controller) => controller.discard());\n            }\n        }\n    }\n\n    initialize () {\n        this.store = this.store.bind(this);\n    }\n\n    connect () {\n        if (!this.offset) return;\n\n        window.scrollTo({\n            top: this.offset,\n            behavior: this.behaviorValue,\n            block: this.blockValue\n        });\n\n        this.offset = null;\n    }\n\n    scrollToTargetConnected() {\n        this.scrollToTarget.scrollIntoView({\n            behavior: this.behaviorValue,\n            block: this.blockValue\n        });\n    }\n\n    autoFocusTargetConnected() {\n        if (this.offset || this.autoFocus) return;\n\n        const input = this.autoFocusTarget;\n\n        if (\n            input.disabled || input.readonly\n            || !input.offsetWidth || !input.offsetHeight\n            || input.closest('.chzn-search')\n            || input.autocomplete && input.autocomplete !== 'off'\n        ) {\n            return;\n        }\n\n        this.autoFocus = true;\n        input.focus();\n    }\n\n    store () {\n        this.offset = this.element.scrollTop;\n    }\n\n    discard () {\n        this.offset = null;\n    }\n\n    get offset () {\n        const value = window.sessionStorage.getItem(this.sessionKeyValue);\n\n        return value ? parseInt(value) : null;\n    }\n\n    set offset (value) {\n        if (value === null || value === undefined) {\n            window.sessionStorage.removeItem(this.sessionKeyValue);\n        } else {\n            window.sessionStorage.setItem(this.sessionKeyValue, String(value));\n        }\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static values = {\n        config: String\n    }\n\n    connect() {\n        tinymce?.init(JSON.parse(this.configValue));\n    }\n\n    disconnect() {\n        tinymce?.remove(this.element);\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static values = {\n        id: String,\n        table: String,\n    }\n\n    static classes = ['collapsed'];\n\n    static afterLoad (identifier, application) {\n        const addController = (el, id, table) => {\n            const fs = el.parentNode;\n\n            fs.dataset.controller = `${fs.dataset.controller || ''} ${identifier}`;\n            fs.setAttribute(`data-${identifier}-id-value`, id);\n            fs.setAttribute(`data-${identifier}-table-value`, table);\n            fs.setAttribute(`data-${identifier}-collapsed-class`, 'collapsed');\n            el.setAttribute('data-action', `click->${identifier}#toggle`);\n        }\n\n        const migrateLegacy = () => {\n            document.querySelectorAll('legend[data-toggle-fieldset]').forEach(function(el) {\n                if (window.console) {\n                    console.warn(`Using the \"data-toggle-fieldset\" attribute on fieldset legends is deprecated and will be removed in Contao 6. Apply the \"${identifier}\" Stimulus controller instead.`);\n                }\n\n                const { id, table } = JSON.parse(el.getAttribute('data-toggle-fieldset'));\n                addController(el, id, table);\n            });\n\n            AjaxRequest.toggleFieldset = (el, id, table) => {\n                const fs = el.parentNode;\n\n                // Already clicked, Stimulus controller was added dynamically\n                if (application.getControllerForElementAndIdentifier(fs, identifier)) {\n                    return;\n                }\n\n                if (window.console) {\n                    console.warn('Using AjaxRequest.toggleFieldset() is deprecated and will be removed in Contao 6. Apply the Stimulus actions instead.');\n                }\n\n                addController(el, id, table);\n\n                // Optimistically wait until Stimulus has registered the new controller\n                setTimeout(() => { application.getControllerForElementAndIdentifier(fs, identifier).toggle(); }, 100);\n            };\n        }\n\n        // Called as soon as registered, so DOM may not have been loaded yet\n        if (document.readyState === \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", migrateLegacy)\n        } else {\n            migrateLegacy();\n        }\n    }\n\n    connect () {\n        if (this.element.querySelectorAll('label.error, label.mandatory').length) {\n            this.element.classList.remove(this.collapsedClass);\n        } else if (this.element.classList.contains('hide')) {\n            if (window.console) {\n                console.warn(`Using class \"hide\" on a fieldset is deprecated and will be removed in Contao 6. Use class \"${this.collapsedClass}\" instead.`);\n            }\n\n            this.element.classList.add(this.collapsedClass);\n        }\n    }\n\n    toggle () {\n        if (this.element.classList.contains(this.collapsedClass)) {\n            this.open();\n        } else {\n            this.close();\n        }\n    }\n\n    open () {\n        if (!this.element.classList.contains(this.collapsedClass)) {\n            return;\n        }\n\n        this.element.classList.remove(this.collapsedClass);\n        this.storeState(1);\n    }\n\n    close () {\n        if (this.element.classList.contains(this.collapsedClass)) {\n            return;\n        }\n\n        const form = this.element.closest('form');\n        const input = this.element.querySelectorAll('[required]');\n\n        let collapse = true;\n        for (let i = 0; i < input.length; i++) {\n            if (!input[i].value) {\n                collapse = false;\n                break;\n            }\n        }\n\n        if (!collapse) {\n            if (typeof(form.checkValidity) == 'function') {\n                form.querySelector('button[type=\"submit\"]').click();\n            }\n        } else {\n            this.element.classList.add(this.collapsedClass);\n            this.storeState(0);\n        }\n    }\n\n    storeState (state) {\n        if (!this.hasIdValue || !this.hasTableValue) {\n            return;\n        }\n\n        fetch(window.location.href, {\n            method: 'POST',\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest'\n            },\n            body: new URLSearchParams({\n                action: 'toggleFieldset',\n                id: this.idValue,\n                table: this.tableValue,\n                state: state,\n            })\n        });\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static classes = ['collapsed']\n\n    static values = {\n        url: String,\n        requestToken: String,\n        expandTitle: String,\n        collapseTitle: String,\n    }\n\n    toggle ({ currentTarget, params: { category }}) {\n        const el = currentTarget.parentNode;\n        const collapsed = el.classList.toggle(this.collapsedClass);\n\n        currentTarget.setAttribute('aria-expanded', collapsed ? 'false' : 'true');\n        currentTarget.setAttribute('title', collapsed ? this.expandTitleValue : this.collapseTitleValue);\n\n        this.sendRequest(category, collapsed)\n    }\n\n    sendRequest (category, collapsed) {\n        fetch(this.urlValue, {\n            method: 'POST',\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest'\n            },\n            body: new URLSearchParams({\n                action: 'toggleNavigation',\n                id: category,\n                state: collapsed ? 0 : 1,\n                REQUEST_TOKEN: this.requestTokenValue\n            })\n        });\n    }\n}\n","import { Controller } from '@hotwired/stimulus';\n\nexport default class extends Controller {\n    static values = {\n        mode: {\n            type: Number,\n            default: 5\n        },\n        toggleAction: String,\n        loadAction: String,\n        requestToken: String,\n        refererId: String,\n        expand: String,\n        collapse: String,\n        expandAll: String,\n        expandAllTitle: String,\n        collapseAll: String,\n        collapseAllTitle: String,\n    }\n\n    static targets = ['operation', 'node', 'toggle', 'child', 'rootChild'];\n\n    operationTargetConnected () {\n        this.updateOperation();\n    }\n\n    childTargetConnected () {\n        this.updateOperation();\n    }\n\n    toggle (event) {\n        event.preventDefault();\n\n        const el = event.currentTarget;\n        el.blur();\n\n        this.toggleToggler(el, event.params.id, event.params.level, event.params.folder);\n    }\n\n    toggleToggler (el, id, level, folder) {\n        const item = document.id(id);\n\n        if (item && item.style.display === 'none') {\n            this.showChild(item);\n            this.expandToggler(el);\n            this.updateState(el, id, 1);\n        } else if (item) {\n            this.hideChild(item);\n            this.collapseToggler(el);\n            this.updateState(el, id, 0);\n        } else {\n            this.fetchChild(el, id, level, folder)\n        }\n\n        this.updateOperation();\n    }\n\n    expandToggler (el) {\n        el.classList.add('foldable--open');\n        el.title = this.collapseValue;\n    }\n\n    collapseToggler (el) {\n        el.classList.remove('foldable--open');\n        el.title = this.expandValue;\n    }\n\n    loadToggler (el, enabled) {\n        el.classList[enabled ? 'add' : 'remove']('foldable--loading');\n    }\n\n    showChild (item) {\n        item.style.display = '';\n    }\n\n    hideChild (item) {\n        item.style.display = 'none';\n    }\n\n    async fetchChild (el, id, level, folder) {\n        this.loadToggler(el, true);\n\n        const url = new URL(location.href);\n        const search = url.searchParams;\n        search.set('ref', this.refererIdValue);\n        url.search = search.toString();\n\n        const response = await fetch(url, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'X-Requested-With': 'XMLHttpRequest'\n            },\n            body: new URLSearchParams({\n                'action': this.loadActionValue,\n                'id': id,\n                'level': level,\n                'folder': folder,\n                'state': 1,\n                'REQUEST_TOKEN': this.requestTokenValue\n            })\n        });\n\n        if (response.ok) {\n            const txt = await response.text();\n\n            const li = document.createElement('li');\n            li.id = id;\n            li.classList.add('parent');\n            li.style.display = 'inline';\n            li.setAttribute(`data-${this.identifier}-target`, level === 0 ? 'child rootChild' : 'child')\n\n            const ul = document.createElement('ul');\n            ul.classList.add('level_' + level);\n            ul.innerHTML = txt;\n            li.append(ul);\n\n            if (this.modeValue === 5) {\n                el.closest('li').after(li);\n            } else {\n                let isFolder = false,\n                    parent = el.closest('li'),\n                    next;\n\n                while (typeOf(parent) === 'element' && parent.tagName === 'LI' && (next = parent.nextElementSibling)) {\n                    parent = next;\n                    if (parent.classList.contains('tl_folder')) {\n                        isFolder = true;\n                        break;\n                    }\n                }\n\n                if (isFolder) {\n                    parent.before(li);\n                } else {\n                    parent.after(li);\n                }\n            }\n\n            window.dispatchEvent(new CustomEvent('structure'));\n            this.expandToggler(el);\n\n            // HOOK (see #6752)\n            window.fireEvent('ajax_change')\n        }\n\n        this.loadToggler(el, false);\n    }\n\n    async toggleAll (event) {\n        event.preventDefault();\n\n        const href = event.currentTarget.href;\n\n        if (this.hasExpandedRoot() ^ (event ? event.altKey : false)) {\n            this.updateAllState(href, 0);\n            this.toggleTargets.forEach((el) => this.collapseToggler(el));\n            this.childTargets.forEach((item) => item.style.display = 'none');\n        } else {\n            this.childTargets.forEach((el) => el.remove());\n            this.toggleTargets.forEach((el) => this.loadToggler(el, true));\n\n            await this.updateAllState(href, 1);\n            const promises = [];\n\n            this.toggleTargets.forEach((el) => {\n                promises.push(this.fetchChild(\n                    el,\n                    el.getAttribute(`data-${this.identifier}-id-param`),\n                    0,\n                    el.getAttribute(`data-${this.identifier}-folder-param`)\n                ));\n            });\n\n            await Promise.all(promises);\n        }\n\n        this.updateOperation();\n    }\n\n    keypress (event) {\n        this.updateOperation(event)\n    }\n\n    async updateState (el, id, state) {\n        await fetch(location.href, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'X-Requested-With': 'XMLHttpRequest'\n            },\n            body: new URLSearchParams({\n                'action': this.toggleActionValue,\n                'id': id,\n                'state': state,\n                'REQUEST_TOKEN': this.requestTokenValue\n            })\n        });\n    }\n\n    async updateAllState (href, state) {\n        await fetch(`${href}&state=${state}`);\n    }\n\n    updateOperation (event) {\n        if (!this.hasOperationTarget) {\n            return;\n        }\n\n        if (this.hasExpandedRoot() ^ (event ? event.altKey : false)) {\n            this.operationTarget.innerText = this.collapseAllValue;\n            this.operationTarget.title = this.collapseAllTitleValue;\n        } else {\n            this.operationTarget.innerText = this.expandAllValue;\n            this.operationTarget.title = this.expandAllTitleValue;\n        }\n    }\n\n    hasExpandedRoot () {\n        return !!this.rootChildTargets.find((el) => el.style.display !== 'none')\n    }\n}\n","/**\n * Provide methods to handle Ajax requests.\n *\n * @author Leo Feyer <https://github.com/leofeyer>\n */\nwindow.AjaxRequest =\n{\n\t/**\n\t * Toggle the navigation menu\n\t *\n\t * @param {object} el  The DOM element\n\t * @param {string} id  The ID of the menu item\n\t * @param {string} url The Ajax URL\n\t *\n\t * @returns {boolean}\n\t */\n\ttoggleNavigation: function(el, id, url) {\n\t\tif (window.console) {\n\t\t\tconsole.warn('AjaxRequest.toggleNavigation() is deprecated. Please use the stimulus controller instead.');\n\t\t}\n\n\t\tvar item = $(id),\n\t\t\tparent = $(el).getParent('li');\n\n\t\tif (item) {\n\t\t\tif (parent.hasClass('collapsed')) {\n\t\t\t\tparent.removeClass('collapsed');\n\t\t\t\t$(el).setAttribute('aria-expanded', 'true');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.collapse);\n\t\t\t\tnew Request.Contao({ url: url }).post({'action':'toggleNavigation', 'id':id, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t} else {\n\t\t\t\tparent.addClass('collapsed');\n\t\t\t\t$(el).setAttribute('aria-expanded', 'false');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.expand);\n\t\t\t\tnew Request.Contao({ url: url }).post({'action':'toggleNavigation', 'id':id, 'state':0, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Toggle the page tree\n\t *\n\t * @param {object} el    The DOM element\n\t * @param {string} id    The ID of the target element\n\t * @param {int}    level The indentation level\n\t * @param {int}    mode  The insert mode\n\t *\n\t * @returns {boolean}\n\t */\n\ttoggleStructure: function(el, id, level, mode) {\n\t\tif (window.console) {\n\t\t\tconsole.warn('AjaxRequest.toggleStructure() is deprecated. Please use the stimulus controller instead.');\n\t\t}\n\n\t\tel.blur();\n\n\t\tvar item = $(id);\n\n\t\tif (item) {\n\t\t\tif (item.getStyle('display') == 'none') {\n\t\t\t\titem.setStyle('display', null);\n\n\t\t\t\t$(el).addClass('foldable--open');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.collapse);\n\n\t\t\t\tnew Request.Contao({field:el}).post({'action':'toggleStructure', 'id':id, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t} else {\n\t\t\t\titem.setStyle('display', 'none');\n\n\t\t\t\t$(el).removeClass('foldable--open');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.expand);\n\n\t\t\t\tnew Request.Contao({field:el}).post({'action':'toggleStructure', 'id':id, 'state':0, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tnew Request.Contao({\n\t\t\tfield: el,\n\t\t\tevalScripts: true,\n\t\t\tonRequest: function() {\n\t\t\t\tAjaxRequest.displayBox(Contao.lang.loading + ' ');\n\t\t\t},\n\t\t\tonSuccess: function(txt) {\n\t\t\t\tvar li = new Element('li', {\n\t\t\t\t\t'id': id,\n\t\t\t\t\t'class': 'parent',\n\t\t\t\t\t'styles': {\n\t\t\t\t\t\t'display': 'inline'\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tnew Element('ul', {\n\t\t\t\t\t'class': 'level_' + level,\n\t\t\t\t\t'html': txt\n\t\t\t\t}).inject(li, 'bottom');\n\n\t\t\t\tif (mode == 5) {\n\t\t\t\t\tli.inject($(el).getParent('li'), 'after');\n\t\t\t\t} else {\n\t\t\t\t\tvar folder = false,\n\t\t\t\t\t\tparent = $(el).getParent('li'),\n\t\t\t\t\t\tnext;\n\n\t\t\t\t\twhile (typeOf(parent) == 'element' && (next = parent.getNext('li'))) {\n\t\t\t\t\t\tparent = next;\n\t\t\t\t\t\tif (parent.hasClass('tl_folder')) {\n\t\t\t\t\t\t\tfolder = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (folder) {\n\t\t\t\t\t\tli.inject(parent, 'before');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tli.inject(parent, 'after');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update the referer ID\n\t\t\t\tli.getElements('a').each(function(el) {\n\t\t\t\t\tel.href = el.href.replace(/&ref=[a-f0-9]+/, '&ref=' + Contao.referer_id);\n\t\t\t\t});\n\n\t\t\t\t$(el).addClass('foldable--open');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.collapse);\n\n\t\t\t\twindow.fireEvent('structure');\n\t\t\t\tAjaxRequest.hideBox();\n\n\t\t\t\t// HOOK\n\t\t\t\twindow.fireEvent('ajax_change');\n   \t\t\t}\n\t\t}).post({'action':'loadStructure', 'id':id, 'level':level, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Toggle the file tree\n\t *\n\t * @param {object} el     The DOM element\n\t * @param {string} id     The ID of the target element\n\t * @param {string} folder The folder's path\n\t * @param {int}    level  The indentation level\n\t *\n\t * @returns {boolean}\n\t */\n\ttoggleFileManager: function(el, id, folder, level) {\n\t\tif (window.console) {\n\t\t\tconsole.warn('AjaxRequest.toggleFileManager() is deprecated. Please use the stimulus controller instead.');\n\t\t}\n\n\t\tel.blur();\n\n\t\tvar item = $(id);\n\n\t\tif (item) {\n\t\t\tif (item.getStyle('display') == 'none') {\n\t\t\t\titem.setStyle('display', null);\n\n\t\t\t\t$(el).addClass('foldable--open');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.collapse);\n\n\t\t\t\tnew Request.Contao({field:el}).post({'action':'toggleFileManager', 'id':id, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t} else {\n\t\t\t\titem.setStyle('display', 'none');\n\n\t\t\t\t$(el).removeClass('foldable--open');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.expand);\n\n\t\t\t\tnew Request.Contao({field:el}).post({'action':'toggleFileManager', 'id':id, 'state':0, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tnew Request.Contao({\n\t\t\tfield: el,\n\t\t\tevalScripts: true,\n\t\t\tonRequest: function() {\n\t\t\t\tAjaxRequest.displayBox(Contao.lang.loading + ' ');\n\t\t\t},\n\t\t\tonSuccess: function(txt) {\n\t\t\t\tvar li = new Element('li', {\n\t\t\t\t\t'id': id,\n\t\t\t\t\t'class': 'parent',\n\t\t\t\t\t'styles': {\n\t\t\t\t\t\t'display': 'inline'\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tnew Element('ul', {\n\t\t\t\t\t'class': 'level_' + level,\n\t\t\t\t\t'html': txt\n\t\t\t\t}).inject(li, 'bottom');\n\n\t\t\t\tli.inject($(el).getParent('li'), 'after');\n\n\t\t\t\t// Update the referer ID\n\t\t\t\tli.getElements('a').each(function(el) {\n\t\t\t\t\tel.href = el.href.replace(/&ref=[a-f0-9]+/, '&ref=' + Contao.referer_id);\n\t\t\t\t});\n\n\t\t\t\t$(el).addClass('foldable--open');\n\t\t\t\t$(el).setAttribute('title', Contao.lang.collapse);\n\n\t\t\t\tAjaxRequest.hideBox();\n\n\t\t\t\t// HOOK\n\t\t\t\twindow.fireEvent('ajax_change');\n   \t\t\t}\n\t\t}).post({'action':'loadFileManager', 'id':id, 'level':level, 'folder':folder, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Toggle sub-palettes in edit mode\n\t *\n\t * @param {object} el    The DOM element\n\t * @param {string} id    The ID of the target element\n\t * @param {string} field The field name\n\t */\n\ttoggleSubpalette: function(el, id, field) {\n\t\tel.blur();\n\t\tvar item = $(id);\n\n\t\tif (item) {\n\t\t\tif (!el.value) {\n\t\t\t\tel.value = 1;\n\t\t\t\tel.checked = 'checked';\n\t\t\t\titem.setStyle('display', null);\n\t\t\t\titem.getElements('[data-required]').each(function(el) {\n\t\t\t\t\tel.set('required', '').set('data-required', null);\n\t\t\t\t});\n\t\t\t\tnew Request.Contao({field: el, onSuccess:updateVersionNumber}).post({'action':'toggleSubpalette', 'id':id, 'field':field, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t} else {\n\t\t\t\tel.value = '';\n\t\t\t\tel.checked = '';\n\t\t\t\titem.setStyle('display', 'none');\n\t\t\t\titem.getElements('[required]').each(function(el) {\n\t\t\t\t\tel.set('required', null).set('data-required', '');\n\t\t\t\t});\n\t\t\t\tnew Request.Contao({field: el, onSuccess:updateVersionNumber}).post({'action':'toggleSubpalette', 'id':id, 'field':field, 'state':0, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tnew Request.Contao({\n\t\t\tfield: el,\n\t\t\tevalScripts: false,\n\t\t\tonRequest: function() {\n\t\t\t\tAjaxRequest.displayBox(Contao.lang.loading + ' ');\n\t\t\t},\n\t\t\tonSuccess: function(txt, json) {\n\t\t\t\tvar div = new Element('div', {\n\t\t\t\t\t'id': id,\n\t\t\t\t\t'class': 'subpal cf',\n\t\t\t\t\t'html': txt,\n\t\t\t\t\t'styles': {\n\t\t\t\t\t\t'display': 'block'\n\t\t\t\t\t}\n\t\t\t\t}).inject($(el).getParent('div').getParent('div'), 'after');\n\n\t\t\t\t// Execute scripts after the DOM has been updated\n\t\t\t\tif (json.javascript) {\n\n\t\t\t\t\t// Use Asset.javascript() instead of document.write() to load a\n\t\t\t\t\t// JavaScript file and re-execute the code after it has been loaded\n\t\t\t\t\tdocument.write = function(str) {\n\t\t\t\t\t\tvar src = '';\n\t\t\t\t\t\tstr.replace(/<script src=\"([^\"]+)\"/i, function(all, match){\n\t\t\t\t\t\t\tsrc = match;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsrc && Asset.javascript(src, {\n\t\t\t\t\t\t\tonLoad: function() {\n\t\t\t\t\t\t\t\tBrowser.exec(json.javascript);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tBrowser.exec(json.javascript);\n\t\t\t\t}\n\n\t\t\t\tel.value = 1;\n\t\t\t\tel.checked = 'checked';\n\n\t\t\t\t// Update the referer ID\n\t\t\t\tdiv.getElements('a').each(function(el) {\n\t\t\t\t\tel.href = el.href.replace(/&ref=[a-f0-9]+/, '&ref=' + Contao.referer_id);\n\t\t\t\t});\n\n\t\t\t\tupdateVersionNumber(txt);\n\n\t\t\t\tAjaxRequest.hideBox();\n\t\t\t\twindow.fireEvent('ajax_change');\n\t\t\t}\n\t\t}).post({'action':'toggleSubpalette', 'id':id, 'field':field, 'load':1, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\n\t\tfunction updateVersionNumber(html) {\n\t\t\tvar fields = el.form.elements.VERSION_NUMBER || [];\n\t\t\tif (!fields.forEach) {\n\t\t\t\tfields = [fields];\n\t\t\t}\n\t\t\tfields.forEach(function(field) {\n\t\t\t\tfield.value = /<input\\s+[^>]*?name=\"VERSION_NUMBER\"\\s+[^>]*?value=\"([^\"]*)\"/i.exec(html)[1];\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Toggle the state of a checkbox field\n\t *\n\t * @param {object}  el      The DOM element\n\t * @param {boolean} rowIcon Whether the row icon should be toggled as well\n\t *\n\t * @returns {boolean}\n\t */\n\ttoggleField: function(el, rowIcon) {\n\t\tel.blur();\n\n\t\tvar img = null,\n\t\t\timages = $(el).getElements('img'),\n\t\t\tpublished = (images[0].get('data-state') == 1),\n\t\t\tdiv = el.getParent('div'),\n\t\t\tnext, pa;\n\n\t\tif (rowIcon) {\n\t\t\t// Find the icon depending on the view (tree view, list view, parent view)\n\t\t\tif (div.hasClass('tl_right')) {\n\t\t\t\timg = div.getPrevious('div').getElements('img');\n\t\t\t} else if (div.hasClass('tl_listing_container')) {\n\t\t\t\timg = el.getParent('td').getPrevious('td').getFirst('div.list_icon');\n\t\t\t\tif (img === null) { // comments\n\t\t\t\t\timg = el.getParent('td').getPrevious('td').getElement('div.cte_type');\n\t\t\t\t}\n\t\t\t\tif (img === null) { // showColumns\n\t\t\t\t\timg = el.getParent('tr').getFirst('td').getElement('div.list_icon_new');\n\t\t\t\t}\n\t\t\t} else if (next = div.getNext('div')) {\n\t\t\t\tif (next.hasClass('cte_type')) {\n\t\t\t\t\timg = next;\n\t\t\t\t}\n\t\t\t\tif (img === null) { // newsletter recipients\n\t\t\t\t\timg = next.getFirst('div.list_icon');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Change the row icon\n\t\t\tif (img !== null) {\n\t\t\t\t// Tree view\n\t\t\t\tif (!(img instanceof HTMLElement) && img.forEach) {\n\t\t\t\t\timg.forEach((img) => {\n\t\t\t\t\t\tif (img.nodeName.toLowerCase() == 'img') {\n\t\t\t\t\t\t\tif (!img.getParent('ul.tl_listing').hasClass('tl_tree_xtnd')) {\n\t\t\t\t\t\t\t\tpa = img.getParent('a');\n\n\t\t\t\t\t\t\t\tif (pa && pa.href.indexOf('contao/preview') == -1) {\n\t\t\t\t\t\t\t\t\tif (next = pa.getNext('a')) {\n\t\t\t\t\t\t\t\t\t\timg = next.getElement('img');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\timg = new Element('img'); // no icons used (see #2286)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst newSrc = !published ? img.get('data-icon') : img.get('data-icon-disabled');\n\t\t\t\t\t\t\timg.src = (img.src.includes('/') && !newSrc.includes('/')) ? img.src.slice(0, img.src.lastIndexOf('/') + 1) + newSrc : newSrc;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// Parent view\n\t\t\t\telse if (img.hasClass('cte_type')) {\n\t\t\t\t\tif (!published) {\n\t\t\t\t\t\timg.addClass('published');\n\t\t\t\t\t\timg.removeClass('unpublished');\n\t\t\t\t\t} else {\n\t\t\t\t\t\timg.addClass('unpublished');\n\t\t\t\t\t\timg.removeClass('published');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// List view\n\t\t\t\telse {\n\t\t\t\t\timg.setStyle('background-image', 'url(' + (!published ? img.get('data-icon') : img.get('data-icon-disabled')) + ')');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Send request\n\t\timages.forEach(function(image) {\n\t\t\tconst newSrc = !published ? image.get('data-icon') : image.get('data-icon-disabled');\n\t\t\timage.src = (image.src.includes('/') && !newSrc.includes('/')) ? image.src.slice(0, image.src.lastIndexOf('/') + 1) + newSrc : newSrc;\n\t\t\timage.set('data-state', !published ? 1 : 0);\n\t\t});\n\n\t\tif (!published && $(el).get('data-title')) {\n\t\t\tel.title = $(el).get('data-title');\n\t\t} else if (published && $(el).get('data-title-disabled')) {\n\t\t\tel.title = $(el).get('data-title-disabled');\n\t\t}\n\n\t\tnew Request.Contao({'url':el.href, 'followRedirects':false}).get();\n\n\t\t// Return false to stop the click event on link\n\t\treturn false;\n\t},\n\n\t/**\n\t * Toggle a group of a multi-checkbox field\n\t *\n\t * @param {object} el The DOM element\n\t * @param {string} id The ID of the target element\n\t *\n\t * @returns {boolean}\n\t */\n\ttoggleCheckboxGroup: function(el, id) {\n\t\tel.blur();\n\n\t\tvar item = $(id);\n\n\t\tif (item) {\n\t\t\tif (item.getStyle('display') == 'none') {\n\t\t\t\titem.setStyle('display', null);\n\t\t\t\t$(el).addClass('foldable--open');\n\n\t\t\t\tnew Request.Contao().post({'action':'toggleCheckboxGroup', 'id':id, 'state':1, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t} else {\n\t\t\t\titem.setStyle('display', 'none');\n\t\t\t\t$(el).removeClass('foldable--open');\n\n\t\t\t\tnew Request.Contao().post({'action':'toggleCheckboxGroup', 'id':id, 'state':0, 'REQUEST_TOKEN':Contao.request_token});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Display the \"loading data\" message\n\t *\n\t * @param {string} message The message text\n\t */\n\tdisplayBox: function(message) {\n\t\tvar box = $('tl_ajaxBox'),\n\t\t\toverlay = $('tl_ajaxOverlay'),\n\t\t\tscroll = window.getScroll();\n\n\t\tif (overlay === null) {\n\t\t\toverlay = new Element('div', {\n\t\t\t\t'id': 'tl_ajaxOverlay'\n\t\t\t}).inject($(document.body), 'bottom');\n\t\t}\n\n\t\toverlay.set({\n\t\t\t'styles': {\n\t\t\t\t'display': 'block',\n\t\t\t\t'top': scroll.y + 'px'\n\t\t\t}\n\t\t});\n\n\t\tif (box === null) {\n\t\t\tbox = new Element('div', {\n\t\t\t\t'id': 'tl_ajaxBox'\n\t\t\t}).inject($(document.body), 'bottom');\n\t\t}\n\n\t\tbox.set({\n\t\t\t'html': message,\n\t\t\t'styles': {\n\t\t\t\t'display': 'block',\n\t\t\t\t'top': (scroll.y + 100) + 'px'\n\t\t\t}\n\t\t})\n\t},\n\n\t/**\n\t * Hide the \"loading data\" message\n\t */\n\thideBox: function() {\n\t\tvar box = $('tl_ajaxBox'),\n\t\t\toverlay = $('tl_ajaxOverlay');\n\n\t\tif (overlay) {\n\t\t\toverlay.setStyle('display', 'none');\n\t\t}\n\n\t\tif (box) {\n\t\t\tbox.setStyle('display', 'none');\n\t\t}\n\t}\n};\n\n/**\n * Provide methods to handle back end tasks.\n *\n * @author Leo Feyer <https://github.com/leofeyer>\n */\nwindow.Backend =\n{\n\t/**\n\t * The current ID\n\t * @member {(string|null)}\n\t */\n\tcurrentId: null,\n\n\t/**\n\t * The popup window\n\t * @member {object}\n\t */\n\tpopupWindow: null,\n\n\t/**\n\t * The theme path\n\t * @member {string}\n\t */\n\tthemePath: Contao.script_url + 'system/themes/' + Contao.theme + '/',\n\n\t/**\n\t * Open a modal window\n\t *\n\t * @param {int}    width   The width in pixels\n\t * @param {string} title   The window's title\n\t * @param {string} content The window's content\n\t */\n\topenModalWindow: function(width, title, content) {\n\t\tnew SimpleModal({\n\t\t\t'width': width,\n\t\t\t'hideFooter': true,\n\t\t\t'draggable': false,\n\t\t\t'overlayOpacity': .7,\n\t\t\t'onShow': function() { document.body.setStyle('overflow', 'hidden'); },\n\t\t\t'onHide': function() { document.body.setStyle('overflow', 'auto'); }\n\t\t}).show({\n\t\t\t'title': title,\n\t\t\t'contents': content\n\t\t});\n\t},\n\n\t/**\n\t * Open an image in a modal window\n\t *\n\t * @param {object} options An optional options object\n\t */\n\topenModalImage: function(options) {\n\t\tvar opt = options || {},\n\t\t\tmaxWidth = (window.getSize().x - 20).toInt();\n\t\tif (!opt.width || opt.width > maxWidth) opt.width = Math.min(maxWidth, 900);\n\t\tvar M = new SimpleModal({\n\t\t\t'width': opt.width,\n\t\t\t'hideFooter': true,\n\t\t\t'draggable': false,\n\t\t\t'overlayOpacity': .7,\n\t\t\t'onShow': function() { document.body.setStyle('overflow', 'hidden'); },\n\t\t\t'onHide': function() { document.body.setStyle('overflow', 'auto'); }\n\t\t});\n\t\tM.show({\n\t\t\t'title': opt.title?.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;'),\n\t\t\t'contents': '<img src=\"' + opt.url + '\" alt=\"\">'\n\t\t});\n\t},\n\n\t/**\n\t * Open an iframe in a modal window\n\t *\n\t * @param {object} options An optional options object\n\t */\n\topenModalIframe: function(options) {\n\t\tvar opt = options || {},\n\t\t\tmaxWidth = (window.getSize().x - 20).toInt(),\n\t\t\tmaxHeight = (window.getSize().y - 137).toInt();\n\t\tif (!opt.width || opt.width > maxWidth) opt.width = Math.min(maxWidth, 900);\n\t\tif (!opt.height || opt.height > maxHeight) opt.height = maxHeight;\n\t\tvar M = new SimpleModal({\n\t\t\t'width': opt.width,\n\t\t\t'hideFooter': true,\n\t\t\t'draggable': false,\n\t\t\t'overlayOpacity': .7,\n\t\t\t'onShow': function() { document.body.setStyle('overflow', 'hidden'); },\n\t\t\t'onHide': function() { document.body.setStyle('overflow', 'auto'); }\n\t\t});\n\t\tM.show({\n\t\t\t'title': opt.title?.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;'),\n\t\t\t'contents': '<iframe src=\"' + opt.url + '\" width=\"100%\" height=\"' + opt.height + '\" frameborder=\"0\"></iframe>',\n\t\t\t'model': 'modal'\n\t\t});\n\t},\n\n\t/**\n\t * Open a selector page in a modal window\n\t *\n\t * @param {object} options An optional options object\n\t */\n\topenModalSelector: function(options) {\n\t\tvar opt = options || {},\n\t\t\tmaxWidth = (window.getSize().x - 20).toInt(),\n\t\t\tmaxHeight = (window.getSize().y - 192).toInt();\n\t\tif (!opt.id) opt.id = 'tl_select';\n\t\tif (!opt.width || opt.width > maxWidth) opt.width = Math.min(maxWidth, 900);\n\t\tif (!opt.height || opt.height > maxHeight) opt.height = maxHeight;\n\t\tvar M = new SimpleModal({\n\t\t\t'width': opt.width,\n\t\t\t'draggable': false,\n\t\t\t'overlayOpacity': .7,\n\t\t\t'onShow': function() { document.body.setStyle('overflow', 'hidden'); },\n\t\t\t'onHide': function() { document.body.setStyle('overflow', 'auto'); }\n\t\t});\n\t\tM.addButton(Contao.lang.cancel, 'btn', function() {\n\t\t\tif (this.buttons[0].hasClass('btn-disabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hide();\n\t\t});\n\t\tM.addButton(Contao.lang.apply, 'btn primary', function() {\n\t\t\tif (this.buttons[1].hasClass('btn-disabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar frm = window.frames['simple-modal-iframe'],\n\t\t\t\tval = [], ul, inp, i, pickerValue, sIndex;\n\t\t\tif (frm === undefined) {\n\t\t\t\talert('Could not find the SimpleModal frame');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tul = frm.document.getElementById(opt.id);\n\t\t\t// Load the previous values (#1816)\n\t\t\tif (pickerValue = ul.get('data-picker-value')) {\n\t\t\t\tval = JSON.parse(pickerValue);\n\t\t\t}\n\t\t\tinp = ul.getElementsByTagName('input');\n\t\t\tfor (i=0; i<inp.length; i++) {\n\t\t\t\tif (inp[i].id.match(/^(check_all_|reset_)/)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// Add currently selected value, otherwise remove (#1816)\n\t\t\t\tsIndex = val.indexOf(inp[i].get('value'));\n\t\t\t\tif (inp[i].checked) {\n\t\t\t\t\tif (sIndex == -1) {\n\t\t\t\t\t\tval.push(inp[i].get('value'));\n\t\t\t\t\t}\n\t\t\t\t} else if (sIndex != -1) {\n\t\t\t\t\tval.splice(sIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\topt.callback(ul.get('data-table'), val);\n\t\t\tthis.hide();\n\t\t});\n\t\tM.show({\n\t\t\t'title': opt.title?.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;'),\n\t\t\t'contents': '<iframe src=\"' + opt.url + '\" name=\"simple-modal-iframe\" width=\"100%\" height=\"' + opt.height + '\" frameborder=\"0\"></iframe>',\n\t\t\t'model': 'modal'\n\t\t});\n\t},\n\n\t/**\n\t * Open a TinyMCE file browser in a modal window\n\t *\n\t * @param {string} field_name The field name\n\t * @param {string} url        The URL\n\t * @param {string} type       The picker type\n\t * @param {object} win        The window object\n\t * @param {string} source     The source record\n\t */\n\topenModalBrowser: function(field_name, url, type, win, source) {\n\t\tBackend.openModalSelector({\n\t\t\t'id': 'tl_listing',\n\t\t\t'title': win.document.getElement('div.mce-title').get('text'),\n\t\t\t'url': Contao.routes.backend_picker + '?context=' + (type == 'file' ? 'link' : 'file') + '&amp;extras[fieldType]=radio&amp;extras[filesOnly]=true&amp;extras[source]=' + source + '&amp;value=' + url + '&amp;popup=1',\n\t\t\t'callback': function(table, value) {\n\t\t\t\twin.document.getElementById(field_name).value = value.join(',');\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Automatically submit a form\n\t *\n\t * @param {object} el The DOM element\n\t */\n\tautoSubmit: function(el) {\n\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\n\t\tvar hidden = new Element('input', {\n\t\t\t'type': 'hidden',\n\t\t\t'name': 'SUBMIT_TYPE',\n\t\t\t'value': 'auto'\n\t\t});\n\n\t\tvar form = $(el) || el;\n\t\thidden.inject(form, 'bottom');\n\t\tform.submit();\n\t},\n\n\t/**\n\t * Scroll the window to a certain vertical position\n\t *\n\t * @param {int} offset The offset to scroll to\n\t */\n\tvScrollTo: function(offset) {\n\t\twindow.addEvent('load', function() {\n\t\t\twindow.scrollTo(null, parseInt(offset));\n\t\t});\n\t},\n\n\t/**\n\t * Toggle checkboxes\n\t *\n\t * @param {object} el   The DOM element\n\t * @param {string} [id] The ID of the target element\n\t */\n\ttoggleCheckboxes: function(el, id) {\n\t\tvar items = $$('input'),\n\t\t\tstatus = $(el).checked ? 'checked' : '';\n\n\t\tfor (var i=0; i<items.length; i++) {\n\t\t\tif (items[i].type.toLowerCase() != 'checkbox') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (id !== undefined && id != items[i].id.substr(0, id.length)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\titems[i].checked = status;\n\t\t}\n\t},\n\n\t/**\n\t * Toggle a checkbox group\n\t *\n\t * @param {object} el The DOM element\n\t * @param {string} id The ID of the target element\n\t */\n\ttoggleCheckboxGroup: function(el, id) {\n\t\tvar cls = $(el).className,\n\t\t\tstatus = $(el).checked ? 'checked' : '';\n\n\t\tif (cls == 'tl_checkbox') {\n\t\t\tvar cbx = $(id) ? $$('#' + id + ' .tl_checkbox') : $(el).getParent('fieldset').getElements('.tl_checkbox');\n\t\t\tcbx.each(function(checkbox) {\n\t\t\t\tcheckbox.checked = status;\n\t\t\t});\n\t\t} else if (cls == 'tl_tree_checkbox') {\n\t\t\t$$('#' + id + ' .parent .tl_tree_checkbox').each(function(checkbox) {\n\t\t\t\tcheckbox.checked = status;\n\t\t\t});\n\t\t}\n\n\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t},\n\n\t/**\n\t * Toggle checkbox elements\n\t *\n\t * @param {string} el  The DOM element\n\t * @param {string} cls The CSS class name\n\t */\n\ttoggleCheckboxElements: function(el, cls) {\n\t\tvar status = $(el).checked ? 'checked' : '';\n\n\t\t$$('.' + cls).each(function(checkbox) {\n\t\t\tif (checkbox.hasClass('tl_checkbox')) {\n\t\t\t\tcheckbox.checked = status;\n\t\t\t}\n\t\t});\n\n\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t},\n\n\t/**\n\t * Make parent view items sortable\n\t *\n\t * @param {object} ul The DOM element\n\t *\n\t * @author Joe Ray Gregory\n\t * @author Martin Auswger\n\t */\n\tmakeParentViewSortable: function(ul) {\n\t\tvar ds = new Scroller(document.getElement('body'), {\n\t\t\tonChange: function(x, y) {\n\t\t\t\tthis.element.scrollTo(this.element.getScroll().x, y);\n\t\t\t}\n\t\t});\n\n\t\tvar list = new Sortables(ul, {\n\t\t\tconstrain: true,\n\t\t\topacity: 0.6,\n\t\t\tonStart: function() {\n\t\t\t\tds.start();\n\t\t\t},\n\t\t\tonComplete: function() {\n\t\t\t\tds.stop();\n\t\t\t},\n\t\t\tonSort: function(el) {\n\t\t\t\tvar ul = el.getParent('ul'),\n\t\t\t\t\twrapLevel = 0, divs, i;\n\n\t\t\t\tif (!ul) return;\n\n\t\t\t\tdivs = ul.getChildren('li > div:first-child');\n\n\t\t\t\tif (!divs) return;\n\n\t\t\t\tfor (i=0; i<divs.length; i++) {\n\t\t\t\t\tif (divs[i].hasClass('wrapper_stop') && wrapLevel > 0) {\n\t\t\t\t\t\twrapLevel--;\n\t\t\t\t\t}\n\n\t\t\t\t\tdivs[i].className = divs[i].className.replace(/(^|\\s)indent[^\\s]*/g, '');\n\n\t\t\t\t\tif (wrapLevel > 0) {\n\t\t\t\t\t\tdivs[i].addClass('indent').addClass('indent_' + wrapLevel);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (divs[i].hasClass('wrapper_start')) {\n\t\t\t\t\t\twrapLevel++;\n\t\t\t\t\t}\n\n\t\t\t\t\tdivs[i].removeClass('indent_first');\n\t\t\t\t\tdivs[i].removeClass('indent_last');\n\n\t\t\t\t\tif (divs[i-1] && divs[i-1].hasClass('wrapper_start')) {\n\t\t\t\t\t\tdivs[i].addClass('indent_first');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (divs[i+1] && divs[i+1].hasClass('wrapper_stop')) {\n\t\t\t\t\t\tdivs[i].addClass('indent_last');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thandle: '.drag-handle'\n\t\t});\n\n\t\tlist.active = false;\n\n\t\tlist.addEvent('start', function() {\n\t\t\tlist.active = true;\n\t\t});\n\n\t\tlist.addEvent('complete', function(el) {\n\t\t\tif (!list.active) return;\n\t\t\tvar id, pid, req, href;\n\n\t\t\tif (el.getPrevious('li')) {\n\t\t\t\tid = el.get('id').replace(/li_/, '');\n\t\t\t\tpid = el.getPrevious('li').get('id').replace(/li_/, '');\n\t\t\t\treq = window.location.search.replace(/id=[0-9]*/, 'id=' + id) + '&act=cut&mode=1&pid=' + pid;\n\t\t\t\thref = window.location.href.replace(/\\?.*$/, '');\n\t\t\t\tnew Request.Contao({'url':href + req, 'followRedirects':false}).get();\n\t\t\t} else if (el.getParent('ul')) {\n\t\t\t\tid = el.get('id').replace(/li_/, '');\n\t\t\t\tpid = el.getParent('ul').get('id').replace(/ul_/, '');\n\t\t\t\treq = window.location.search.replace(/id=[0-9]*/, 'id=' + id) + '&act=cut&mode=2&pid=' + pid;\n\t\t\t\thref = window.location.href.replace(/\\?.*$/, '');\n\t\t\t\tnew Request.Contao({'url':href + req, 'followRedirects':false}).get();\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Make multiSRC items sortable\n\t *\n\t * @param {string} id  The ID of the target element\n\t * @param {string} oid The order field\n\t * @param {string} val The value field\n\t */\n\tmakeMultiSrcSortable: function(id, oid, val) {\n\t\tvar list = new Sortables($(id), {\n\t\t\tconstrain: true,\n\t\t\topacity: 0.6\n\t\t}).addEvent('complete', function() {\n\t\t\tvar els = [],\n\t\t\t\tlis = $(id).getChildren('[data-id]'),\n\t\t\t\ti;\n\t\t\tfor (i=0; i<lis.length; i++) {\n\t\t\t\tels.push(lis[i].get('data-id'));\n\t\t\t}\n\t\t\tif (oid === val) {\n\t\t\t\t$(val).value.split(',').forEach(function(j) {\n\t\t\t\t\tif (els.indexOf(j) === -1) {\n\t\t\t\t\t\tels.push(j);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t$(oid).value = els.join(',');\n\t\t});\n\t\t$(id).getElements('.gimage').each(function(el) {\n\t\t\tif (el.hasClass('removable')) {\n\t\t\t\tnew Element('button', {\n\t\t\t\t\ttype: 'button',\n\t\t\t\t\thtml: '&times;',\n\t\t\t\t\t'class': 'tl_red'\n\t\t\t\t}).addEvent('click', function() {\n\t\t\t\t\tvar li = el.getParent('li'),\n\t\t\t\t\t\tdid = li.get('data-id');\n\t\t\t\t\t$(val).value = $(val).value.split(',').filter(function(j) { return j != did; }).join(',');\n\t\t\t\t\t$(oid).value = $(oid).value.split(',').filter(function(j) { return j != did; }).join(',');\n\t\t\t\t\tli.dispose();\n\t\t\t\t}).inject(el, 'after');\n\t\t\t} else {\n\t\t\t\tnew Element('button', {\n\t\t\t\t\ttype: 'button',\n\t\t\t\t\thtml: '&times',\n\t\t\t\t\tdisabled: true\n\t\t\t\t}).inject(el, 'after');\n\t\t\t}\n\t\t});\n\t\tlist.fireEvent(\"complete\"); // Initial sorting\n\t},\n\n\t/**\n\t * Enable drag and drop for the file tree\n\t *\n\t * @param {object} ul      The DOM element\n\t * @param {object} options An optional options object\n\t */\n\tenableFileTreeDragAndDrop: function(ul, options) {\n\t\tvar ds = new Scroller(document.getElement('body'), {\n\t\t\tonChange: function(x, y) {\n\t\t\t\tthis.element.scrollTo(this.element.getScroll().x, y);\n\t\t\t}\n\t\t});\n\n\t\tul.addEvent('mousedown', function(event) {\n\t\t\tvar dragHandle = event.target.hasClass('drag-handle') ? event.target : event.target.getParent('.drag-handle');\n\t\t\tvar dragElement = event.target.getParent('.tl_file,.tl_folder');\n\n\t\t\tif (!dragHandle || !dragElement || event.rightClick) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tds.start();\n\t\t\tul.addClass('tl_listing_dragging');\n\n\t\t\tvar cloneBase = (dragElement.getElements('.tl_left')[0] || dragElement),\n\t\t\t\tclone = cloneBase.clone(true)\n\t\t\t\t\t.inject(ul)\n\t\t\t\t\t.addClass('tl_left_dragging'),\n\t\t\t\tcurrentHover, currentHoverTime, expandLink;\n\n\t\t\tclone.setPosition({\n\t\t\t\tx: event.page.x - cloneBase.getOffsetParent().getPosition().x - clone.getSize().x,\n\t\t\t\ty: cloneBase.getPosition(cloneBase.getOffsetParent()).y\n\t\t\t}).setStyle('display', 'none');\n\n\t\t\tvar move = new Drag.Move(clone, {\n\t\t\t\tdroppables: $$([ul]).append(ul.getElements('.tl_folder,li.parent,.tl_folder_top')),\n\t\t\t\tunDraggableTags: [],\n\t\t\t\tmodifiers: {\n\t\t\t\t\tx: 'left',\n\t\t\t\t\ty: 'top'\n\t\t\t\t},\n\t\t\t\tonStart: function() {\n\t\t\t\t\tclone.setStyle('display', '');\n\t\t\t\t},\n\t\t\t\tonEnter: function(element, droppable) {\n\t\t\t\t\tdroppable = fixDroppable(droppable);\n\t\t\t\t\tdroppable.addClass('tl_folder_dropping');\n\n\t\t\t\t\tif (droppable.hasClass('tl_folder') && currentHover !== droppable) {\n\t\t\t\t\t\tcurrentHover = droppable;\n\t\t\t\t\t\tcurrentHoverTime = new Date().getTime();\n\t\t\t\t\t\texpandLink = droppable.getElement('a.foldable');\n\n\t\t\t\t\t\tif (expandLink && !expandLink.hasClass('foldable--open')) {\n\t\t\t\t\t\t\t// Expand the folder after one second hover time\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tif (currentHover === droppable && currentHoverTime + 900 < new Date().getTime()) {\n\t\t\t\t\t\t\t\t\tvar event = document.createEvent('HTMLEvents');\n\t\t\t\t\t\t\t\t\tevent.initEvent('click', true, true);\n\t\t\t\t\t\t\t\t\texpandLink.dispatchEvent(event);\n\n\t\t\t\t\t\t\t\t\tcurrentHover = undefined;\n\t\t\t\t\t\t\t\t\tcurrentHoverTime = undefined;\n\n\t\t\t\t\t\t\t\t\twindow.addEvent('ajax_change', function onAjax() {\n\t\t\t\t\t\t\t\t\t\tif (move && move.droppables && ul && ul.getElements) {\n\t\t\t\t\t\t\t\t\t\t\tmove.droppables = $$([ul]).append(ul.getElements('.tl_folder,li.parent'));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twindow.removeEvent('ajax_change', onAjax);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonCancel: function() {\n\t\t\t\t\tcurrentHover = undefined;\n\t\t\t\t\tcurrentHoverTime = undefined;\n\n\t\t\t\t\tds.stop();\n\t\t\t\t\tclone.destroy();\n\t\t\t\t\twindow.removeEvent('keyup', onKeyup);\n\t\t\t\t\tul.getElements('.tl_folder_dropping').removeClass('tl_folder_dropping');\n\t\t\t\t\tul.removeClass('tl_listing_dragging');\n\t\t\t\t},\n\t\t\t\tonDrop: function(element, droppable) {\n\t\t\t\t\tcurrentHover = undefined;\n\t\t\t\t\tcurrentHoverTime = undefined;\n\n\t\t\t\t\tds.stop();\n\t\t\t\t\tclone.destroy();\n\t\t\t\t\twindow.removeEvent('keyup', onKeyup);\n\t\t\t\t\tul.getElements('.tl_folder_dropping').removeClass('tl_folder_dropping');\n\t\t\t\t\tul.removeClass('tl_listing_dragging');\n\n\t\t\t\t\tdroppable = fixDroppable(droppable);\n\n\t\t\t\t\tif (!droppable) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar id = dragElement.get('data-id'),\n\t\t\t\t\t\tpid = droppable.get('data-id') || decodeURIComponent(options.url.split(/[?&]pid=/)[1].split('&')[0]);\n\n\t\t\t\t\t// Ignore invalid move operations\n\t\t\t\t\tif (id && pid && ((pid+'/').indexOf(id+'/') === 0 || pid+'/' === id.replace(/[^/]+$/, ''))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\tdocument.location.href = options.url + '&id=' + encodeURIComponent(id) + '&pid=' + encodeURIComponent(pid);\n\t\t\t\t},\n\t\t\t\tonLeave: function(element, droppable) {\n\t\t\t\t\tdroppable = fixDroppable(droppable);\n\t\t\t\t\tdroppable.removeClass('tl_folder_dropping');\n\t\t\t\t\tcurrentHover = undefined;\n\t\t\t\t\tcurrentHoverTime = undefined;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmove.start(event);\n\t\t\twindow.addEvent('keyup', onKeyup);\n\n\t\t\tfunction onKeyup(event) {\n\t\t\t\tif (event.key === 'esc' && move && move.stop) {\n\t\t\t\t\tmove.droppables = $$([]);\n\t\t\t\t\tmove.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction fixDroppable(droppable) {\n\t\t\tif (droppable && droppable.hasClass('parent') && droppable.getPrevious('.tl_folder')) {\n\t\t\t\treturn droppable.getPrevious('.tl_folder');\n\t\t\t}\n\n\t\t\treturn droppable;\n\t\t}\n\t},\n\n\t/**\n\t * List wizard\n\t *\n\t * @param {string} id The ID of the target element\n\t */\n\tlistWizard: function(id) {\n\t\tvar ul = $(id),\n\t\t\tmakeSortable = function(ul) {\n\t\t\t\tnew Sortables(ul, {\n\t\t\t\t\tconstrain: true,\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\thandle: '.drag-handle'\n\t\t\t\t});\n\t\t\t},\n\t\t\taddEventsTo = function(li) {\n\t\t\t\tvar command, clone, input, previous, next;\n\n\t\t\t\tli.getElements('button').each(function(bt) {\n\t\t\t\t\tif (bt.hasEvent('click')) return;\n\t\t\t\t\tcommand = bt.getProperty('data-command');\n\n\t\t\t\t\tswitch (command) {\n\t\t\t\t\t\tcase 'copy':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tclone = li.clone(true).inject(li, 'before');\n\t\t\t\t\t\t\t\tif (input = li.getFirst('input')) {\n\t\t\t\t\t\t\t\t\tclone.getFirst('input').value = input.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taddEventsTo(clone);\n\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tif (ul.getChildren().length > 1) {\n\t\t\t\t\t\t\t\t\tli.destroy();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase null:\n\t\t\t\t\t\t\tbt.addEvent('keydown', function(e) {\n\t\t\t\t\t\t\t\tif (e.event.keyCode == 38) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (previous = li.getPrevious('li')) {\n\t\t\t\t\t\t\t\t\t\tli.inject(previous, 'before');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tli.inject(ul, 'bottom');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t} else if (e.event.keyCode == 40) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (next = li.getNext('li')) {\n\t\t\t\t\t\t\t\t\t\tli.inject(next, 'after');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tli.inject(ul.getFirst('li'), 'before');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\tmakeSortable(ul);\n\n\t\tul.getChildren().each(function(li) {\n\t\t\taddEventsTo(li);\n\t\t});\n\t},\n\n\t/**\n\t * Table wizard\n\t *\n\t * @param {string} id The ID of the target element\n\t */\n\ttableWizard: function(id) {\n\t\tvar table = $(id),\n\t\t\tthead = table.getElement('thead'),\n\t\t\ttbody = table.getElement('tbody'),\n\t\t\tmakeSortable = function(tbody) {\n\t\t\t\tvar rows = tbody.getChildren(),\n\t\t\t\t\ttextarea, children, i, j;\n\n\t\t\t\tfor (i=0; i<rows.length; i++) {\n\t\t\t\t\tchildren = rows[i].getChildren();\n\t\t\t\t\tfor (j=0; j<children.length; j++) {\n\t\t\t\t\t\tif (textarea = children[j].getFirst('textarea')) {\n\t\t\t\t\t\t\ttextarea.name = textarea.name.replace(/\\[[0-9]+][[0-9]+]/g, '[' + i + '][' + j + ']')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnew Sortables(tbody, {\n\t\t\t\t\tconstrain: true,\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\thandle: '.drag-handle',\n\t\t\t\t\tonComplete: function() {\n\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\taddEventsTo = function(tr) {\n\t\t\t\tvar head = thead.getFirst('tr'),\n\t\t\t\t\tcommand, textarea, current, next, ntr, children, index, i;\n\n\t\t\t\ttr.getElements('button').each(function(bt) {\n\t\t\t\t\tif (bt.hasEvent('click')) return;\n\t\t\t\t\tcommand = bt.getProperty('data-command');\n\n\t\t\t\t\tswitch (command) {\n\t\t\t\t\t\tcase 'rcopy':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tntr = new Element('tr');\n\t\t\t\t\t\t\t\tchildren = tr.getChildren();\n\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\tnext = children[i].clone(true).inject(ntr, 'bottom');\n\t\t\t\t\t\t\t\t\tif (textarea = children[i].getFirst('textarea')) {\n\t\t\t\t\t\t\t\t\t\tnext.getFirst('textarea').value = textarea.value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tntr.inject(tr, 'after');\n\t\t\t\t\t\t\t\taddEventsTo(ntr);\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\tntr.getFirst('td').getFirst('textarea').select();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'rdelete':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tif (tbody.getChildren().length > 1) {\n\t\t\t\t\t\t\t\t\ttr.destroy();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'ccopy':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tindex = getIndex(bt);\n\t\t\t\t\t\t\t\tchildren = tbody.getChildren();\n\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\tcurrent = children[i].getChildren()[index];\n\t\t\t\t\t\t\t\t\tnext = current.clone(true).inject(current, 'after');\n\t\t\t\t\t\t\t\t\tif (textarea = current.getFirst('textarea')) {\n\t\t\t\t\t\t\t\t\t\tnext.getFirst('textarea').value = textarea.value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taddEventsTo(next);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar headFirst = head.getFirst('td');\n\t\t\t\t\t\t\t\tnext = headFirst.clone(true).inject(head.getLast('td'), 'before');\n\t\t\t\t\t\t\t\taddEventsTo(next);\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\tchildren[0].getChildren()[index + 1].getFirst('textarea').select();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'cmovel':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tindex = getIndex(bt);\n\t\t\t\t\t\t\t\tchildren = tbody.getChildren();\n\t\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\t\tcurrent = children[i].getChildren()[index];\n\t\t\t\t\t\t\t\t\t\tcurrent.inject(current.getPrevious(), 'before');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\t\tcurrent = children[i].getChildren()[index];\n\t\t\t\t\t\t\t\t\t\tcurrent.inject(children[i].getLast(), 'before');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'cmover':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tindex = getIndex(bt);\n\t\t\t\t\t\t\t\tchildren = tbody.getChildren();\n\t\t\t\t\t\t\t\tif (index < (tr.getChildren().length - 2)) {\n\t\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\t\tcurrent = children[i].getChildren()[index];\n\t\t\t\t\t\t\t\t\t\tcurrent.inject(current.getNext(), 'after');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\t\tcurrent = children[i].getChildren()[index];\n\t\t\t\t\t\t\t\t\t\tcurrent.inject(children[i].getFirst(), 'before');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'cdelete':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tindex = getIndex(bt);\n\t\t\t\t\t\t\t\tchildren = tbody.getChildren();\n\t\t\t\t\t\t\t\tif (tr.getChildren().length > 2) {\n\t\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\t\tchildren[i].getChildren()[index].destroy();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thead.getFirst('td').destroy();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase null:\n\t\t\t\t\t\t\tbt.addEvent('keydown', function(e) {\n\t\t\t\t\t\t\t\tif (e.event.keyCode == 38) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (ntr = tr.getPrevious('tr')) {\n\t\t\t\t\t\t\t\t\t\ttr.inject(ntr, 'before');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttr.inject(tbody, 'bottom');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\t} else if (e.event.keyCode == 40) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (ntr = tr.getNext('tr')) {\n\t\t\t\t\t\t\t\t\t\ttr.inject(ntr, 'after');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttr.inject(tbody, 'top');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetIndex = function(bt) {\n\t\t\t\tvar td = $(bt).getParent('td'),\n\t\t\t\t\ttr = td.getParent('tr'),\n\t\t\t\t\tcols = tr.getChildren(),\n\t\t\t\t\tindex = 0, i;\n\n\t\t\t\tfor (i=0; i<cols.length; i++) {\n\t\t\t\t\tif (cols[i] == td) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t\treturn index;\n\t\t\t};\n\n\t\tmakeSortable(tbody);\n\n\t\tthead.getChildren().each(function(tr) {\n\t\t\taddEventsTo(tr);\n\t\t});\n\n\t\ttbody.getChildren().each(function(tr) {\n\t\t\taddEventsTo(tr);\n\t\t});\n\n\t\tBackend.tableWizardResize();\n\t},\n\n\t/**\n\t * Resize the table wizard fields on focus\n\t *\n\t * @param {float} [factor] The resize factor\n\t */\n\ttableWizardResize: function(factor) {\n\t\tvar size = window.localStorage.getItem('contao_table_wizard_cell_size');\n\n\t\tif (factor !== undefined) {\n\t\t\tsize = '';\n\t\t\t$$('.tl_tablewizard textarea').each(function(el) {\n\t\t\t\tel.setStyle('width', (el.getStyle('width').toInt() * factor).round().limit(142, 284));\n\t\t\t\tel.setStyle('height', (el.getStyle('height').toInt() * factor).round().limit(66, 132));\n\t\t\t\tif (size == '') {\n\t\t\t\t\tsize = el.getStyle('width') + '|' + el.getStyle('height');\n\t\t\t\t}\n\t\t\t});\n\t\t\twindow.localStorage.setItem('contao_table_wizard_cell_size', size);\n\t\t} else if (size !== null) {\n\t\t\tvar chunks = size.split('|');\n\t\t\t$$('.tl_tablewizard textarea').each(function(el) {\n\t\t\t\tel.setStyle('width', chunks[0]);\n\t\t\t\tel.setStyle('height', chunks[1]);\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Set the width of the table wizard\n\t */\n\ttableWizardSetWidth: function() {\n\t\tvar wrap = $('tl_tablewizard');\n\t\tif (!wrap) return;\n\t\twrap.setStyle('width', Math.round(wrap.getParent('.tl_formbody_edit').getComputedSize().width * 0.96));\n\t},\n\n\t/**\n\t * Options wizard\n\t *\n\t * @param {string} id The ID of the target element\n\t */\n\toptionsWizard: function(id) {\n\t\tvar table = $(id),\n\t\t\ttbody = table.getElement('tbody'),\n\t\t\tmakeSortable = function(tbody) {\n\t\t\t\tvar rows = tbody.getChildren(),\n\t\t\t\t\tchildren, i, j, input;\n\n\t\t\t\tfor (i=0; i<rows.length; i++) {\n\t\t\t\t\tchildren = rows[i].getChildren();\n\t\t\t\t\tfor (j=0; j<children.length; j++) {\n\t\t\t\t\t\tif (input = children[j].getFirst('input')) {\n\t\t\t\t\t\t\tinput.name = input.name.replace(/\\[[0-9]+]/g, '[' + i + ']');\n\t\t\t\t\t\t\tif (input.type == 'checkbox') {\n\t\t\t\t\t\t\t\tinput.id = input.name.replace(/\\[[0-9]+]/g, '').replace(/\\[/g, '_').replace(/]/g, '') + '_' + i;\n\t\t\t\t\t\t\t\tinput.getNext('label').set('for', input.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnew Sortables(tbody, {\n\t\t\t\t\tconstrain: true,\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\thandle: '.drag-handle',\n\t\t\t\t\tonComplete: function() {\n\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\taddEventsTo = function(tr) {\n\t\t\t\tvar command, input, next, ntr, children, i;\n\t\t\t\ttr.getElements('button').each(function(bt) {\n\t\t\t\t\tif (bt.hasEvent('click')) return;\n\t\t\t\t\tcommand = bt.getProperty('data-command');\n\n\t\t\t\t\tswitch (command) {\n\t\t\t\t\t\tcase 'copy':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tntr = new Element('tr');\n\t\t\t\t\t\t\t\tchildren = tr.getChildren();\n\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\tnext = children[i].clone(true).inject(ntr, 'bottom');\n\t\t\t\t\t\t\t\t\tif (input = children[i].getFirst('input')) {\n\t\t\t\t\t\t\t\t\t\tnext.getFirst('input').value = input.value;\n\t\t\t\t\t\t\t\t\t\tif (input.type == 'checkbox') {\n\t\t\t\t\t\t\t\t\t\t\tnext.getFirst('input').checked = input.checked ? 'checked' : '';\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tntr.inject(tr, 'after');\n\t\t\t\t\t\t\t\taddEventsTo(ntr);\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\tntr.getFirst('td').getFirst('input').select();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tif (tbody.getChildren().length > 1) {\n\t\t\t\t\t\t\t\t\ttr.destroy();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase null:\n\t\t\t\t\t\t\tbt.addEvent('keydown', function(e) {\n\t\t\t\t\t\t\t\tif (e.event.keyCode == 38) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (ntr = tr.getPrevious('tr')) {\n\t\t\t\t\t\t\t\t\t\ttr.inject(ntr, 'before');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttr.inject(tbody, 'bottom');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\t} else if (e.event.keyCode == 40) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (ntr = tr.getNext('tr')) {\n\t\t\t\t\t\t\t\t\t\ttr.inject(ntr, 'after');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttr.inject(tbody, 'top');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\tmakeSortable(tbody);\n\n\t\ttbody.getChildren().each(function(tr) {\n\t\t\taddEventsTo(tr);\n\t\t});\n\t},\n\n\t/**\n\t * Key/value wizard\n\t *\n\t * @param {string} id The ID of the target element\n\t */\n\tkeyValueWizard: function(id) {\n\t\tvar table = $(id),\n\t\t\ttbody = table.getElement('tbody'),\n\t\t\tmakeSortable = function(tbody) {\n\t\t\t\tvar rows = tbody.getChildren(),\n\t\t\t\t\tchildren, i, j, input;\n\n\t\t\t\tfor (i=0; i<rows.length; i++) {\n\t\t\t\t\tchildren = rows[i].getChildren();\n\t\t\t\t\tfor (j=0; j<children.length; j++) {\n\t\t\t\t\t\tif (input = children[j].getFirst('input')) {\n\t\t\t\t\t\t\tinput.name = input.name.replace(/\\[[0-9]+]/g, '[' + i + ']')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnew Sortables(tbody, {\n\t\t\t\t\tconstrain: true,\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\thandle: '.drag-handle',\n\t\t\t\t\tonComplete: function() {\n\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\taddEventsTo = function(tr) {\n\t\t\t\tvar command, input, next, ntr, children, i;\n\t\t\t\ttr.getElements('button').each(function(bt) {\n\t\t\t\t\tif (bt.hasEvent('click')) return;\n\t\t\t\t\tcommand = bt.getProperty('data-command');\n\n\t\t\t\t\tswitch (command) {\n\t\t\t\t\t\tcase 'copy':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tntr = new Element('tr');\n\t\t\t\t\t\t\t\tchildren = tr.getChildren();\n\t\t\t\t\t\t\t\tfor (i=0; i<children.length; i++) {\n\t\t\t\t\t\t\t\t\tnext = children[i].clone(true).inject(ntr, 'bottom');\n\t\t\t\t\t\t\t\t\tif (input = children[i].getFirst('input')) {\n\t\t\t\t\t\t\t\t\t\tnext.getFirst().value = input.value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tntr.inject(tr, 'after');\n\t\t\t\t\t\t\t\taddEventsTo(ntr);\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\tntr.getFirst('td').getFirst('input').select();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t\tbt.addEvent('click', function() {\n\t\t\t\t\t\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t\t\t\t\t\t\tif (tbody.getChildren().length > 1) {\n\t\t\t\t\t\t\t\t\ttr.destroy();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase null:\n\t\t\t\t\t\t\tbt.addEvent('keydown', function(e) {\n\t\t\t\t\t\t\t\tif (e.event.keyCode == 38) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (ntr = tr.getPrevious('tr')) {\n\t\t\t\t\t\t\t\t\t\ttr.inject(ntr, 'before');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttr.inject(tbody, 'bottom');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\t} else if (e.event.keyCode == 40) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\tif (ntr = tr.getNext('tr')) {\n\t\t\t\t\t\t\t\t\t\ttr.inject(ntr, 'after');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttr.inject(tbody, 'top');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t\t\t\tmakeSortable(tbody);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\tmakeSortable(tbody);\n\n\t\ttbody.getChildren().each(function(tr) {\n\t\t\taddEventsTo(tr);\n\t\t});\n\t},\n\n\t/**\n\t * Checkbox wizard\n\t *\n\t * @param {string} id The ID of the target element\n\t */\n\tcheckboxWizard: function(id) {\n\t\tvar container = $(id).getElement('.sortable'),\n\t\t\tmakeSortable = function(container) {\n\t\t\t\tnew Sortables(container, {\n\t\t\t\t\tconstrain: true,\n\t\t\t\t\topacity: 0.6,\n\t\t\t\t\thandle: '.drag-handle'\n\t\t\t\t});\n\t\t\t},\n\t\t\taddEventsTo = function(span) {\n\t\t\t\tvar nspan;\n\t\t\t\tspan.getElements('button').each(function(bt) {\n\t\t\t\t\tif (bt.hasEvent('click')) return;\n\t\t\t\t\tbt.addEvent('keydown', function(e) {\n\t\t\t\t\t\tif (e.event.keyCode == 38) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif ((nspan = span.getPrevious('span'))) {\n\t\t\t\t\t\t\t\tspan.inject(nspan, 'before');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tspan.inject(container, 'bottom');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t} else if (e.event.keyCode == 40) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (nspan = span.getNext('span')) {\n\t\t\t\t\t\t\t\tspan.inject(nspan, 'after');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tspan.inject(container, 'top');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbt.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\tmakeSortable(container);\n\n\t\tcontainer.getChildren().each(function(span) {\n\t\t\taddEventsTo(span);\n\t\t});\n\t},\n\n\t/**\n\t * Update the fields of the imageSize widget upon change\n\t */\n\tenableImageSizeWidgets: function() {\n\t\t$$('.tl_image_size').each(function(el) {\n\t\t\tvar select = el.getElement('select'),\n\t\t\t\twidthInput = el.getChildren('input')[0],\n\t\t\t\theightInput = el.getChildren('input')[1],\n\t\t\t\tupdate = function() {\n\t\t\t\t\tif (select.get('value') === '' || select.get('value').indexOf('_') === 0 || select.get('value').toInt().toString() === select.get('value')) {\n\t\t\t\t\t\twidthInput.readOnly = true;\n\t\t\t\t\t\theightInput.readOnly = true;\n\t\t\t\t\t\tvar dimensions = $(select.getSelected()[0]).get('text');\n\t\t\t\t\t\tdimensions = dimensions.split('(').length > 1\n\t\t\t\t\t\t\t? dimensions.split('(').getLast().split(')')[0].split('x')\n\t\t\t\t\t\t\t: ['', ''];\n\t\t\t\t\t\twidthInput.set('value', '').set('placeholder', dimensions[0] * 1 || '');\n\t\t\t\t\t\theightInput.set('value', '').set('placeholder', dimensions[1] * 1 || '');\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidthInput.set('placeholder', '');\n\t\t\t\t\t\theightInput.set('placeholder', '');\n\t\t\t\t\t\twidthInput.readOnly = false;\n\t\t\t\t\t\theightInput.readOnly = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t;\n\n\t\t\tupdate();\n\t\t\tselect.addEvent('change', update);\n\t\t\tselect.addEvent('keyup', update);\n\t\t});\n\t},\n\n\t/**\n\t * Allow toggling checkboxes or radio buttons by clicking a row\n\t *\n\t * @author Kamil Kuzminski\n\t */\n\tenableToggleSelect: function() {\n\t\tvar container = $('tl_listing'),\n\t\t\tshiftToggle = function(el) {\n\t\t\t\tthisIndex = checkboxes.indexOf(el);\n\t\t\t\tstartIndex = checkboxes.indexOf(start);\n\t\t\t\tfrom = Math.min(thisIndex, startIndex);\n\t\t\t\tto = Math.max(thisIndex, startIndex);\n\t\t\t\tstatus = !!checkboxes[startIndex].checked;\n\n\t\t\t\tfor (from; from<=to; from++) {\n\t\t\t\t\tcheckboxes[from].checked = status;\n\t\t\t\t}\n\t\t\t},\n\t\t\tclickEvent = function(e) {\n\t\t\t\tvar input = this.getElement('input[type=\"checkbox\"],input[type=\"radio\"]'),\n\t\t\t\t\tlimitToggler = $(e.target).getParent('.limit_toggler');\n\n\t\t\t\tif (!input || input.get('disabled') || limitToggler !== null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Radio buttons\n\t\t\t\tif (input.type == 'radio') {\n\t\t\t\t\tif (!input.checked) {\n\t\t\t\t\t\tinput.checked = 'checked';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Checkboxes\n\t\t\t\tif (e.shift && start) {\n\t\t\t\t\tshiftToggle(input);\n\t\t\t\t} else {\n\t\t\t\t\tinput.checked = input.checked ? '' : 'checked';\n\n\t\t\t\t\tif (input.get('onclick') == 'Backend.toggleCheckboxes(this)') {\n\t\t\t\t\t\tBackend.toggleCheckboxes(input); // see #6399\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstart = input;\n\t\t\t},\n\t\t\tcheckboxes = [], start, thisIndex, startIndex, status, from, to;\n\n\t\tif (container) {\n\t\t\tcheckboxes = container.getElements('input[type=\"checkbox\"]');\n\t\t}\n\n\t\t// Row click\n\t\t$$('.toggle_select').each(function(el) {\n\t\t\tvar boundEvent = el.retrieve('boundEvent');\n\n\t\t\tif (boundEvent) {\n\t\t\t\tel.removeEvent('click', boundEvent);\n\t\t\t}\n\n\t\t\t// Do not propagate the form field click events\n\t\t\tel.getElements('label,input[type=\"checkbox\"],input[type=\"radio\"]').each(function(i) {\n\t\t\t\ti.addEvent('click', function(e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tboundEvent = clickEvent.bind(el);\n\n\t\t\tel.addEvent('click', boundEvent);\n\t\t\tel.store('boundEvent', boundEvent);\n\t\t});\n\n\t\t// Checkbox click\n\t\tcheckboxes.each(function(el) {\n\t\t\tel.addEvent('click', function(e) {\n\t\t\t\tif (e.shift && start) {\n\t\t\t\t\tshiftToggle(this);\n\t\t\t\t}\n\n\t\t\t\tstart = this;\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Allow to mark the important part of an image\n\t *\n\t * @param {object} el The DOM element\n\t */\n\teditPreviewWizard: function(el) {\n\t\tel = $(el);\n\t\tvar imageElement = el.getElement('img'),\n\t\t\tinputElements = {},\n\t\t\tisDrawing = false,\n\t\t\tpartElement, startPos,\n\t\t\tgetScale = function() {\n\t\t\t\treturn {\n\t\t\t\t\tx: imageElement.getComputedSize().width,\n\t\t\t\t\ty: imageElement.getComputedSize().height\n\t\t\t\t};\n\t\t\t},\n\t\t\tupdateImage = function() {\n\t\t\t\tvar scale = getScale(),\n\t\t\t\t\timageSize = imageElement.getComputedSize();\n\t\t\t\tpartElement.setStyles({\n\t\t\t\t\ttop: imageSize.computedTop + (inputElements.y.get('value') * scale.y).round() + 'px',\n\t\t\t\t\tleft: imageSize.computedLeft + (inputElements.x.get('value') * scale.x).round() + 'px',\n\t\t\t\t\twidth: (inputElements.width.get('value') * scale.x).round() + 'px',\n\t\t\t\t\theight: (inputElements.height.get('value') * scale.y).round() + 'px'\n\t\t\t\t});\n\t\t\t\tif (!inputElements.width.get('value').toFloat() || !inputElements.height.get('value').toFloat()) {\n\t\t\t\t\tpartElement.setStyle('display', 'none');\n\t\t\t\t} else {\n\t\t\t\t\tpartElement.setStyle('display', null);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdateValues = function() {\n\t\t\t\tvar scale = getScale(),\n\t\t\t\t\tstyles = partElement.getStyles('top', 'left', 'width', 'height'),\n\t\t\t\t\timageSize = imageElement.getComputedSize(),\n\t\t\t\t\tvalues = {\n\t\t\t\t\t\tx: Math.max(0, Math.min(1, (styles.left.toFloat() - imageSize.computedLeft) / scale.x)),\n\t\t\t\t\t\ty: Math.max(0, Math.min(1, (styles.top.toFloat() - imageSize.computedTop) / scale.y))\n\t\t\t\t\t};\n\t\t\t\tvalues.width = Math.min(1 - values.x, styles.width.toFloat() / scale.x);\n\t\t\t\tvalues.height = Math.min(1 - values.y, styles.height.toFloat() / scale.y);\n\t\t\t\tif (!values.width || !values.height) {\n\t\t\t\t\tvalues.x = values.y = values.width = values.height = '';\n\t\t\t\t\tpartElement.setStyle('display', 'none');\n\t\t\t\t} else {\n\t\t\t\t\tpartElement.setStyle('display', null);\n\t\t\t\t}\n\t\t\t\tObject.each(values, function(value, key) {\n\t\t\t\t\tinputElements[key].set('value', value === '' ? '' : Number(value).toFixed(15));\n\t\t\t\t});\n\t\t\t},\n\t\t\tstart = function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (isDrawing) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tisDrawing = true;\n\t\t\t\tstartPos = {\n\t\t\t\t\tx: event.page.x - el.getPosition().x - imageElement.getComputedSize().computedLeft,\n\t\t\t\t\ty: event.page.y - el.getPosition().y - imageElement.getComputedSize().computedTop\n\t\t\t\t};\n\t\t\t\tmove(event);\n\t\t\t},\n\t\t\tmove = function(event) {\n\t\t\t\tif (!isDrawing) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t\tvar imageSize = imageElement.getComputedSize();\n\t\t\t\tvar rect = {\n\t\t\t\t\tx: [\n\t\t\t\t\t\tMath.max(0, Math.min(imageSize.width, startPos.x)),\n\t\t\t\t\t\tMath.max(0, Math.min(imageSize.width, event.page.x - el.getPosition().x - imageSize.computedLeft))\n\t\t\t\t\t],\n\t\t\t\t\ty: [\n\t\t\t\t\t\tMath.max(0, Math.min(imageSize.height, startPos.y)),\n\t\t\t\t\t\tMath.max(0, Math.min(imageSize.height, event.page.y - el.getPosition().y - imageSize.computedTop))\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\tpartElement.setStyles({\n\t\t\t\t\ttop: Math.min(rect.y[0], rect.y[1]) + imageSize.computedTop + 'px',\n\t\t\t\t\tleft: Math.min(rect.x[0], rect.x[1]) + imageSize.computedLeft + 'px',\n\t\t\t\t\twidth: Math.abs(rect.x[0] - rect.x[1]) + 'px',\n\t\t\t\t\theight: Math.abs(rect.y[0] - rect.y[1]) + 'px'\n\t\t\t\t});\n\t\t\t\tupdateValues();\n\t\t\t},\n\t\t\tstop = function(event) {\n\t\t\t\tmove(event);\n\t\t\t\tisDrawing = false;\n\t\t\t},\n\t\t\tinit = function() {\n\t\t\t\tel.getParent('.tl_tbox,.tl_box').getElements('input[name^=\"importantPart\"]').each(function(input) {\n\t\t\t\t\t['x', 'y', 'width', 'height'].each(function(key) {\n\t\t\t\t\t\tif (input.get('name').substr(13, key.length) === key.capitalize()) {\n\t\t\t\t\t\t\tinputElements[key] = input = $(input);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tif (Object.getLength(inputElements) !== 4) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tObject.each(inputElements, function(input) {\n\t\t\t\t\tinput.getParent().setStyle('display', 'none');\n\t\t\t\t});\n\t\t\t\tel.addClass('tl_edit_preview_enabled');\n\t\t\t\tpartElement = new Element('div', {\n\t\t\t\t\t'class': 'tl_edit_preview_important_part'\n\t\t\t\t}).inject(el);\n\t\t\t\tupdateImage();\n\t\t\t\timageElement.addEvent('load', updateImage);\n\t\t\t\tel.addEvents({\n\t\t\t\t\tmousedown: start,\n\t\t\t\t\ttouchstart: start\n\t\t\t\t});\n\t\t\t\t$(document.documentElement).addEvents({\n\t\t\t\t\tmousemove: move,\n\t\t\t\t\ttouchmove: move,\n\t\t\t\t\tmouseup: stop,\n\t\t\t\t\ttouchend: stop,\n\t\t\t\t\ttouchcancel: stop,\n\t\t\t\t\tresize: updateImage\n\t\t\t\t});\n\t\t\t}\n\t\t;\n\n\t\twindow.addEvent('domready', init);\n\t},\n\n\t/**\n\t * Enable drag and drop file upload for the file tree\n\t *\n\t * @param {object} wrap    The DOM element\n\t * @param {object} options An optional options object\n\t */\n\tenableFileTreeUpload: function(wrap, options) {\n\t\twrap = $(wrap);\n\n\t\tvar fallbackUrl = options.url,\n\t\t\tdzElement = new Element('div', {\n\t\t\t\t'class': 'dropzone dropzone-filetree',\n\t\t\t\thtml: '<span class=\"dropzone-previews\"></span>'\n\t\t\t}).inject(wrap, 'top'),\n\t\t\tcurrentHover, currentHoverTime, expandLink;\n\n\t\toptions.previewsContainer = dzElement.getElement('.dropzone-previews');\n\t\toptions.clickable = false;\n\n\t\tvar dz = new Dropzone(wrap, options);\n\n\t\tdz.on('queuecomplete', function() {\n\t\t\twindow.location.reload();\n\t\t});\n\n\t\tdz.on('dragover', function(event) {\n\t\t\tif (!event.dataTransfer || !event.dataTransfer.types || event.dataTransfer.types.indexOf('Files') === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twrap.getElements('.tl_folder_dropping').removeClass('tl_folder_dropping');\n\t\t\tvar target = event.target && $(event.target);\n\n\t\t\tif (target) {\n\t\t\t\tvar folder = target.match('.tl_folder') ? target : target.getParent('.tl_folder');\n\n\t\t\t\tif (!folder) {\n\t\t\t\t\tfolder = target.getParent('.parent');\n\t\t\t\t\tfolder = folder && folder.getPrevious('.tl_folder');\n\t\t\t\t}\n\n\t\t\t\tif (folder) {\n\t\t\t\t\tvar link = folder.getElement('img[src$=\"/icons/new.svg\"]');\n\t\t\t\t\tlink = link && link.getParent('a');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (link && link.href) {\n\t\t\t\tdz.options.url = ''+link.href;\n\t\t\t\tfolder.addClass('tl_folder_dropping');\n\n\t\t\t\tif (currentHover !== folder) {\n\t\t\t\t\tcurrentHover = folder;\n\t\t\t\t\tcurrentHoverTime = new Date().getTime();\n\t\t\t\t\texpandLink = folder.getElement('a.foldable');\n\n\t\t\t\t\tif (expandLink && !expandLink.hasClass('foldable--open')) {\n\t\t\t\t\t\t// Expand the folder after one second hover time\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tif (currentHover === folder && currentHoverTime + 900 < new Date().getTime()) {\n\t\t\t\t\t\t\t\tvar event = document.createEvent('HTMLEvents');\n\t\t\t\t\t\t\t\tevent.initEvent('click', true, true);\n\t\t\t\t\t\t\t\texpandLink.dispatchEvent(event);\n\t\t\t\t\t\t\t\tcurrentHover = undefined;\n\t\t\t\t\t\t\t\tcurrentHoverTime = undefined;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdz.options.url = fallbackUrl;\n\t\t\t\tcurrentHover = undefined;\n\t\t\t\tcurrentHoverTime = undefined;\n\t\t\t}\n\t\t});\n\n\t\tdz.on('drop', function(event) {\n\t\t\tif (!event.dataTransfer || !event.dataTransfer.types || event.dataTransfer.types.indexOf('Files') === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdzElement.addClass('dropzone-filetree-enabled');\n\t\t\twindow.dispatchEvent(new Event('store-scroll-offset'));\n\t\t});\n\n\t\tdz.on('dragleave', function() {\n\t\t\twrap.getElements('.tl_folder_dropping').removeClass('tl_folder_dropping');\n\t\t\tcurrentHover = undefined;\n\t\t\tcurrentHoverTime = undefined;\n\t\t});\n\t},\n\n\t/**\n\t * Crawl the website\n\t */\n\tcrawl: function() {\n\t\tvar timeout = 2000,\n\t\t\tcrawl = $('tl_crawl'),\n\t\t\tprogressBar = crawl.getElement('div.progress-bar'),\n\t\t\tprogressCount = crawl.getElement('p.progress-count'),\n\t\t\tresults = crawl.getElement('div.results'),\n\t\t\tdebugLog = crawl.getElement('p.debug-log');\n\n\t\tfunction updateData(response) {\n\t\t\tvar total = response.total,\n\t\t\t\tdone = total - response.pending,\n\t\t\t\tpercentage = total > 0 ? parseInt(done / total * 100, 10) : 100,\n\t\t\t\tresult;\n\n\t\t\t// Initialize the status bar at 10%\n\t\t\tif (done < 1 && percentage < 1) {\n\t\t\t\tdone = 1;\n\t\t\t\tpercentage = 10;\n\t\t\t\ttotal = 10;\n\t\t\t}\n\n\t\t\tprogressBar.setStyle('width', percentage + '%');\n\t\t\tprogressBar.set('html', percentage + '%');\n\t\t\tprogressBar.setAttribute('aria-valuenow', percentage);\n\t\t\tprogressCount.set('html', done + ' / ' + total);\n\n\t\t\tif (response.hasDebugLog) {\n\t\t\t\tdebugLog.setStyle('display', 'block');\n\t\t\t}\n\n\t\t\tif (response.hasDebugLog) {\n\t\t\t\tdebugLog.setStyle('display', 'block');\n\t\t\t}\n\n\t\t\tif (!response.finished) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprogressBar.removeClass('running').addClass('finished');\n\t\t\tresults.removeClass('running').addClass('finished');\n\n\t\t\tfor (result in response.results) {\n\t\t\t\tif (response.results.hasOwnProperty(result)) {\n\t\t\t\t\tvar summary = results.getElement('.result[data-subscriber=\"' + result + '\"] p.summary'),\n\t\t\t\t\t\twarning = results.getElement('.result[data-subscriber=\"' + result + '\"] p.warning'),\n\t\t\t\t\t\tlog = results.getElement('.result[data-subscriber=\"' + result + '\"] p.subscriber-log'),\n\t\t\t\t\t\tsubscriberResults = response.results[result],\n\t\t\t\t\t\tsubscriberSummary = subscriberResults.summary;\n\n\t\t\t\t\tif (subscriberResults.warning) {\n\t\t\t\t\t\twarning.set('html', subscriberResults.warning);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (subscriberResults.hasLog) {\n\t\t\t\t\t\tlog.setStyle('display', 'block');\n\t\t\t\t\t}\n\n\t\t\t\t\tsummary.addClass(subscriberResults.wasSuccessful ? 'success' : 'failure');\n\t\t\t\t\tsummary.set('html', subscriberSummary);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction execRequest(onlyStatusUpdate = false) {\n\t\t\tnew Request({\n\t\t\t\turl: window.location.href,\n\t\t\t\theaders: {\n\t\t\t\t\t'Only-Status-Update': onlyStatusUpdate\n\t\t\t\t},\n\t\t\t\tonSuccess: function(responseText) {\n\t\t\t\t\tvar response = JSON.decode(responseText);\n\n\t\t\t\t\tupdateData(response);\n\n\t\t\t\t\tif (!response.finished) {\n\t\t\t\t\t\tsetTimeout(execRequest, timeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).send();\n\t\t}\n\n\t\texecRequest(true);\n\t}\n};\n\nwindow.Theme =\n{\n\t/**\n\t * Check for WebKit\n\t * @member {boolean}\n \t */\n\tisWebkit: (Browser.chrome || Browser.safari || navigator.userAgent.match(/(?:webkit|khtml)/i)),\n\n\t/**\n\t * Stop the propagation of click events of certain elements\n\t */\n\tstopClickPropagation: function() {\n\t\t// Do not propagate the click events of the icons\n\t\t$$('.picker_selector').each(function(ul) {\n\t\t\tul.getElements('a').each(function(el) {\n\t\t\t\tel.addEvent('click', function(e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\t// Do not propagate the click events of the checkboxes\n\t\t$$('.picker_selector,.click2edit').each(function(ul) {\n\t\t\tul.getElements('input[type=\"checkbox\"]').each(function(el) {\n\t\t\t\tel.addEvent('click', function(e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Set up the [Ctrl] + click to edit functionality\n\t */\n\tsetupCtrlClick: function() {\n\t\t$$('.click2edit').each(function(el) {\n\n\t\t\t// Do not propagate the click events of the default buttons (see #5731)\n\t\t\tel.getElements('a').each(function(a) {\n\t\t\t\ta.addEvent('click', function(e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Set up regular click events on touch devices\n\t\t\tif (Browser.Features.Touch) {\n\t\t\t\tel.addEvent('click', function() {\n\t\t\t\t\tif (!el.getAttribute('data-visited')) {\n\t\t\t\t\t\tel.setAttribute('data-visited', '1');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.getElements('a').each(function(a) {\n\t\t\t\t\t\t\tif (a.hasClass('edit')) {\n\t\t\t\t\t\t\t\tdocument.location.href = a.href;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tel.removeAttribute('data-visited');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tel.addEvent('click', function(e) {\n\t\t\t\t\tvar key = Browser.Platform.mac ? e.event.metaKey : e.event.ctrlKey;\n\t\t\t\t\tif (!key) return;\n\n\t\t\t\t\tif (e.event.shiftKey) {\n\t\t\t\t\t\tel.getElements('a').each(function(a) {\n\t\t\t\t\t\t\tif (a.hasClass('children')) {\n\t\t\t\t\t\t\t\tdocument.location.href = a.href;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.getElements('a').each(function(a) {\n\t\t\t\t\t\t\tif (a.hasClass('edit')) {\n\t\t\t\t\t\t\t\tdocument.location.href = a.href;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Set up the textarea resizing\n\t */\n\tsetupTextareaResizing: function() {\n\t\t$$('.tl_textarea').each(function(el) {\n\t\t\tif (Browser.ie6 || Browser.ie7 || Browser.ie8) return;\n\t\t\tif (el.hasClass('noresize') || el.retrieve('autogrow')) return;\n\n\t\t\t// Set up the dummy element\n\t\t\tvar dummy = new Element('div', {\n\t\t\t\thtml: 'X',\n\t\t\t\tstyles: {\n\t\t\t\t\t'position':'absolute',\n\t\t\t\t\t'top':0,\n\t\t\t\t\t'left':'-999em',\n\t\t\t\t\t'overflow-x':'hidden'\n\t\t\t\t}\n\t\t\t}).setStyles(\n\t\t\t\tel.getStyles('font-size', 'font-family', 'width', 'line-height')\n\t\t\t).inject(document.body);\n\n\t\t\t// Also consider the box-sizing\n\t\t\tif (el.getStyle('-moz-box-sizing') == 'border-box' || el.getStyle('-webkit-box-sizing') == 'border-box' || el.getStyle('box-sizing') == 'border-box') {\n\t\t\t\tdummy.setStyles({\n\t\t\t\t\t'padding': el.getStyle('padding'),\n\t\t\t\t\t'border': el.getStyle('border-left')\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Single line height\n\t\t\tvar line = Math.max(dummy.clientHeight, 30);\n\n\t\t\t// Respond to the \"input\" event\n\t\t\tel.addEvent('input', function() {\n\t\t\t\tdummy.set('html', this.get('value')\n\t\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t\t.replace(/\\n|\\r\\n/g, '<br>X'));\n\t\t\t\tvar height = Math.max(line, dummy.getSize().y);\n\t\t\t\tif (this.clientHeight != height) this.tween('height', height);\n\t\t\t}).set('tween', { 'duration':100 }).setStyle('height', line + 'px');\n\n\t\t\t// Fire the event\n\t\t\tel.fireEvent('input');\n\t\t\tel.store('autogrow', true);\n\t\t});\n\t},\n\n\t/**\n\t * Set up the menu toggle\n\t */\n\tsetupMenuToggle: function() {\n\t\tvar burger = $('burger');\n\t\tif (!burger) return;\n\n\t\tburger\n\t\t\t.addEvent('click', function() {\n\t\t\t\tdocument.body.toggleClass('show-navigation');\n\t\t\t\tburger.setAttribute('aria-expanded', document.body.hasClass('show-navigation') ? 'true' : 'false')\n\t\t\t})\n\t\t\t.addEvent('keydown', function(e) {\n\t\t\t\tif (e.event.keyCode == 27) {\n\t\t\t\t\tdocument.body.removeClass('show-navigation');\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tif (window.matchMedia) {\n\t\t\tvar matchMedia = window.matchMedia('(max-width:991px)');\n\t\t\tvar setAriaControls = function() {\n\t\t\t\tif (matchMedia.matches) {\n\t\t\t\t\tburger.setAttribute('aria-controls', 'left')\n\t\t\t\t\tburger.setAttribute('aria-expanded', document.body.hasClass('show-navigation') ? 'true' : 'false')\n\t\t\t\t} else {\n\t\t\t\t\tburger.removeAttribute('aria-controls');\n\t\t\t\t\tburger.removeAttribute('aria-expanded');\n\t\t\t\t}\n\t\t\t};\n\t\t\tmatchMedia.addEventListener('change', setAriaControls);\n\t\t\tsetAriaControls();\n\t\t}\n\t},\n\n\t/**\n\t * Set up the profile toggle\n\t */\n\tsetupProfileToggle: function() {\n\t\tvar tmenu = $('tmenu');\n\t\tif (!tmenu) return;\n\n\t\tvar li = tmenu.getElement('.submenu'),\n\t\t\tbutton = li.getFirst('span').getFirst('button'),\n\t\t\tmenu = li.getFirst('ul');\n\t\tif (!li || !button || !menu) return;\n\n\t\tbutton.setAttribute('aria-controls', 'tmenu__profile');\n\t\tbutton.setAttribute('aria-expanded', 'false');\n\n\t\tmenu.id = 'tmenu__profile';\n\n\t\tbutton.addEvent('click', function(e) {\n\t\t\tif (li.hasClass('active')) {\n\t\t\t\tli.removeClass('active');\n\t\t\t\tbutton.setAttribute('aria-expanded', 'false');\n\t\t\t} else {\n\t\t\t\tli.addClass('active');\n\t\t\t\tbutton.setAttribute('aria-expanded', 'true');\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$(document.body).addEvent('click', function() {\n\t\t\tif (li.hasClass('active')) {\n\t\t\t\tli.removeClass('active');\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Set up the split button toggle\n\t */\n\tsetupSplitButtonToggle: function() {\n\t\tvar toggle = $('sbtog');\n\t\tif (!toggle) return;\n\n\t\tvar ul = toggle.getParent('.split-button').getElement('ul'),\n\t\t\ttab, timer;\n\n\t\ttoggle.addEvent('click', function(e) {\n\t\t\ttab = false;\n\t\t\tul.toggleClass('invisible');\n\t\t\ttoggle.toggleClass('active');\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$(document.body).addEvent('click', function() {\n\t\t\ttab = false;\n\t\t\tul.addClass('invisible');\n\t\t\ttoggle.removeClass('active');\n\t\t});\n\n\t\t$(document.body).addEvent('keydown', function(e) {\n\t\t\ttab = (e.event.keyCode == 9);\n\t\t});\n\n\t\t[toggle].append(ul.getElements('button')).each(function(el) {\n\t\t\tel.addEvent('focus', function() {\n\t\t\t\tif (!tab) return;\n\t\t\t\tul.removeClass('invisible');\n\t\t\t\ttoggle.addClass('active');\n\t\t\t\tclearTimeout(timer);\n\t\t\t});\n\n\t\t\tel.addEvent('blur', function() {\n\t\t\t\tif (!tab) return;\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\tul.addClass('invisible');\n\t\t\t\t\ttoggle.removeClass('active');\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t});\n\n\t\ttoggle.set('tabindex', '-1');\n\t}\n};\n\n// Initialize the back end script\nwindow.addEvent('domready', function() {\n\t$(document.body).addClass('js');\n\n\t// Mark touch devices (see #5563)\n\tif (Browser.Features.Touch) {\n\t\t$(document.body).addClass('touch');\n\t}\n\n\tBackend.tableWizardSetWidth();\n\tBackend.enableImageSizeWidgets();\n\tBackend.enableToggleSelect();\n\n\t// Chosen\n\tif (Elements.chosen != undefined) {\n\t\t$$('select.tl_chosen').chosen();\n\t}\n\n\tTheme.stopClickPropagation();\n\tTheme.setupCtrlClick();\n\tTheme.setupTextareaResizing();\n\tTheme.setupMenuToggle();\n\tTheme.setupProfileToggle();\n\tTheme.setupSplitButtonToggle();\n});\n\n// Resize the table wizard\nwindow.addEvent('resize', function() {\n\tBackend.tableWizardSetWidth();\n});\n\n// Re-apply certain changes upon ajax_change\nwindow.addEvent('ajax_change', function() {\n\tBackend.enableImageSizeWidgets();\n\tBackend.enableToggleSelect();\n\n\t// Chosen\n\tif (Elements.chosen != undefined) {\n\t\t$$('select.tl_chosen').filter(function(el) {\n\t\t\treturn el.getStyle('display') != 'none';\n\t\t}).chosen();\n\t}\n\n\tTheme.stopClickPropagation();\n\tTheme.setupCtrlClick();\n\tTheme.setupTextareaResizing();\n});\n","window.addEventListener('DOMContentLoaded', function() {\n    document.querySelectorAll('div.limit_height').forEach(function(div) {\n        if (window.console) {\n            console.warn('Using \"limit_height\" class on child_record_callback is deprecated. Set a list.sorting.limitHeight in your DCA instead.');\n        }\n\n        const parent = div.parentNode.closest('.tl_content');\n\n        // Return if the element is a wrapper\n        if (parent && (parent.classList.contains('wrapper_start') || parent.classList.contains('wrapper_stop'))) return;\n\n        const hgt = Number(div.className.replace(/[^0-9]*/, ''))\n\n        // Return if there is no height value\n        if (!hgt) return;\n\n        const style = window.getComputedStyle(div, null);\n        const padding = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);\n        const height = div.clientHeight - padding;\n\n        // Do not add the toggle if the preview height is below the max-height\n        if (height <= hgt) return;\n\n        // Resize the element if it is higher than the maximum height\n        div.style.height = hgt+'px';\n\n        const button = document.createElement('button');\n        button.setAttribute('type', 'button');\n        button.title = Contao.lang.expand;\n        button.innerHTML = '<span>...</span>';\n        button.classList.add('unselectable');\n\n        button.addEventListener('click', function() {\n            if (div.style.height == 'auto') {\n                div.style.height = hgt+'px';\n                button.title = Contao.lang.expand;\n            } else {\n                div.style.height = 'auto';\n                button.title = Contao.lang.collapse;\n            }\n        });\n\n        const toggler = document.createElement('div');\n        toggler.classList.add('limit_toggler');\n        toggler.append(button);\n\n        div.append(toggler);\n    });\n});\n","(function(){\n    'use strict';\n\n    const initializedRows = new WeakMap();\n    const saveScrollOffsetEvent = new Event('store-scroll-offset');\n\n    const init = (row) => {\n        // Check if this row has already been initialized\n        if (initializedRows.has(row)) {\n            return;\n        }\n\n        // Check if the row has all necessary elements to prevent the mutation observer\n        // from initializing the incomplete widget.\n        if (!row.querySelector('button.drag-handle')) {\n            return;\n        }\n\n        initializedRows.set(row, true);\n\n        const tbody = row.closest('tbody');\n\n        const makeSortable = (tbody) => {\n            Array.from(tbody.children).forEach((tr, i) => {\n                tr.querySelectorAll('input, select').forEach((el) => {\n                    el.name = el.name.replace(/\\[[0-9]+]/g, '[' + i + ']');\n                });\n            });\n\n            // TODO: replace this with a vanilla JS solution\n            new Sortables(tbody, {\n                constrain: true,\n                opacity: 0.6,\n                handle: '.drag-handle',\n                onComplete: function() {\n                    makeSortable(tbody);\n                }\n            });\n        };\n\n        const addEventsTo = (tr) => {\n            tr.querySelectorAll('button').forEach((bt) => {\n                const command = bt.dataset.command;\n\n                switch (command) {\n                    case 'copy':\n                        bt.addEventListener('click', () => {\n                            window.dispatchEvent(saveScrollOffsetEvent)\n\n                            const ntr = tr.cloneNode(true);\n                            const selects = tr.querySelectorAll('select');\n                            const nselects = ntr.querySelectorAll('select');\n\n                            for (let j=0; j<selects.length; j++) {\n                                nselects[j].value = selects[j].value;\n                            }\n\n                            ntr.querySelectorAll('[data-original-title]').forEach((el) => {\n                                el.setAttribute('title', el.getAttribute('data-original-title'));\n                                el.removeAttribute('data-original-title');\n                            });\n\n                            initializedRows.set(ntr, true);\n                            tr.parentNode.insertBefore(ntr, tr.nextSibling);\n\n                            // Remove the ID of the select before initializing Chosen\n                            const select = ntr.querySelector('select.tl_select')\n                            select.removeAttribute('id');\n\n                            ntr.querySelector('.chzn-container').remove();\n                            new Chosen(select);\n\n                            addEventsTo(ntr);\n                            makeSortable(tbody);\n                        });\n                        break;\n\n                    case 'delete':\n                        bt.addEventListener('click', () => {\n                            window.dispatchEvent(saveScrollOffsetEvent);\n\n                            if (tbody.children.length > 1) {\n                                tr.remove();\n                            } else {\n                                // Reset values for last element (#689)\n                                tr.querySelectorAll('select').forEach((select) => {\n                                    select.value = select.children[0].value;\n                                });\n                            }\n\n                            makeSortable(tbody);\n                        });\n                        break;\n\n                    case 'enable':\n                        bt.addEventListener('click', function() {\n                            window.dispatchEvent(saveScrollOffsetEvent);\n\n                            const cbx = bt.previousElementSibling;\n\n                            if (cbx.checked) {\n                                cbx.checked = '';\n                            } else {\n                                cbx.checked = 'checked';\n                            }\n                        });\n                        break;\n\n                    default:\n                        if (bt.classList.contains('drag-handle')) {\n                            bt.addEventListener('keydown', (event) => {\n                                if (event.code === 'ArrowUp' || event.keyCode === 38) {\n                                    event.preventDefault();\n\n                                    if (tr.previousElementSibling) {\n                                        tr.previousElementSibling.insertAdjacentElement('beforebegin', tr);\n                                    } else {\n                                        tbody.insertAdjacentElement('beforeend', tr);\n                                    }\n\n                                    bt.focus();\n                                    makeSortable(tbody);\n                                } else if (event.code === 'ArrowDown' || event.keyCode === 40) {\n                                    event.preventDefault();\n\n                                    if (tr.nextElementSibling) {\n                                        tr.nextElementSibling.insertAdjacentElement('afterend', tr);\n                                    } else {\n                                        tbody.insertAdjacentElement('afterbegin', tr);\n                                    }\n\n                                    bt.focus();\n                                    makeSortable(tbody);\n                                }\n                            });\n                        }\n                        break;\n                }\n            });\n\n            const select = tr.querySelector('td:first-child select');\n\n            if (!select) {\n                return;\n            }\n\n            const link = tr.querySelector('a.module_link');\n            const images = tr.querySelectorAll('img.module_image');\n\n            const updateLink = () => {\n                link.href = link.href.replace(/id=[0-9]+/, 'id=' + select.value);\n\n                if (select.value > 0) {\n                    link.classList.remove('hidden');\n\n                    images.forEach((image) => {\n                        image.classList.add('hidden');\n                    });\n                } else {\n                    link.classList.add('hidden');\n\n                    images.forEach((image) => {\n                        image.classList.remove('hidden');\n                    });\n                }\n            };\n\n            select.addEventListener('change', updateLink);\n\n            // Backwards compatibility with MooTools \"Chosen\" script that fires non-native change event\n            select.addEvent('change', updateLink);\n        };\n\n        makeSortable(tbody);\n        addEventsTo(row);\n    };\n\n    document.querySelectorAll('.tl_modulewizard tr').forEach(init);\n\n    new MutationObserver(function(mutationsList) {\n        for (const mutation of mutationsList) {\n            if (mutation.type === 'childList') {\n                mutation.addedNodes.forEach(function(element) {\n                    if (element.matches && element.matches('.tl_modulewizard tr, .tl_modulewizard tr *')) {\n                        init(element.closest('tr'));\n                    }\n                })\n            }\n        }\n    }).observe(document, {\n        attributes: false,\n        childList: true,\n        subtree: true\n    });\n})();\n","/*\n---\n\nname: Request.Contao\n\ndescription: Extends the MooTools Request.JSON class with Contao-specific routines.\n\nlicense: LGPLv3\n\nauthors:\n - Leo Feyer\n\nrequires: [Request, JSON]\n\nprovides: Request.Contao\n\n...\n*/\n\nRequest.Contao = new Class(\n{\n\tExtends: Request.JSON,\n\n\toptions: {\n\t\tfollowRedirects: true,\n\t\turl: window.location.href\n\t},\n\n\tinitialize: function(options) {\n\t\tif (options && !options.url && options.field && options.field.form && options.field.form.action) {\n\t\t\tthis.options.url = options.field.form.action;\n\t\t}\n\t\tthis.parent(options);\n\t},\n\n\tsuccess: function(text) {\n\t\tvar url = this.getHeader('X-Ajax-Location'),\n\t\t\tjson;\n\n\t\tif (url && this.options.followRedirects) {\n\t\t\tlocation.replace(url);\n\t\t\treturn;\n\t\t}\n\n\t\t// Support both plain text and JSON responses\n\t\ttry {\n\t\t\tjson = this.response.json = JSON.decode(text, this.options.secure);\n\t\t} catch(e) {\n\t\t\tjson = {'content':text};\n\t\t}\n\n\t\t// Empty response\n\t\tif (json === null) {\n\t\t\tjson = {'content':''};\n\t\t} else if (typeof(json) != 'object') {\n\t\t\tjson = {'content':text};\n\t\t}\n\n\t\t// Isolate scripts and execute them\n\t\tif (json.content != '') {\n\t\t\tjson.content = json.content.stripScripts(function(script) {\n\t\t\t\tjson.javascript = script.replace(/<!--|\\/\\/-->|<!\\[CDATA\\[\\/\\/>|<!]]>/g, '');\n\t\t\t});\n\t\t\tif (json.javascript && this.options.evalScripts) {\n\t\t\t\tBrowser.exec(json.javascript);\n\t\t\t}\n\t\t}\n\n\t\tthis.onSuccess(json.content, json);\n\t},\n\n\tfailure: function() {\n\t\tvar url = this.getHeader('X-Ajax-Location');\n\n\t\tif (url && 401 === this.status) {\n\t\t\tlocation.replace(url);\n\t\t\treturn;\n\t\t}\n\n\t\tif (url && this.options.followRedirects && this.status >= 300 && this.status < 400) {\n\t\t\tlocation.replace(url);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onFailure();\n\t}\n});\n\n\n/*\n---\n\nname: Drag\n\ndescription: Extends the base Drag class with touch support.\n\nlicense: LGPLv3\n\nauthors:\n - Andreas Schempp\n\nrequires: [Drag]\n\nprovides: Drag\n\n...\n*/\n\nClass.refactor(Drag,\n{\n\tattach: function() {\n\t\tthis.handles.addEvent('touchstart', this.bound.start);\n\t\treturn this.previous.apply(this, arguments);\n\t},\n\n\tdetach: function() {\n\t\tthis.handles.removeEvent('touchstart', this.bound.start);\n\t\treturn this.previous.apply(this, arguments);\n\t},\n\n\tstart: function() {\n\t\tdocument.addEvents({\n\t\t\ttouchmove: this.bound.check,\n\t\t\ttouchend: this.bound.cancel\n\t\t});\n\t\tthis.previous.apply(this, arguments);\n\t},\n\n\tcheck: function(event) {\n\t\tif (this.options.preventDefault) event.preventDefault();\n\t\tvar distance = Math.round(Math.sqrt(Math.pow(event.page.x - this.mouse.start.x, 2) + Math.pow(event.page.y - this.mouse.start.y, 2)));\n\t\tif (distance > this.options.snap) {\n\t\t\tthis.cancel();\n\t\t\tthis.document.addEvents({\n\t\t\t\tmousemove: this.bound.drag,\n\t\t\t\tmouseup: this.bound.stop\n\t\t\t});\n\t\t\tdocument.addEvents({\n\t\t\t\ttouchmove: this.bound.drag,\n\t\t\t\ttouchend: this.bound.stop\n\t\t\t});\n\t\t\tthis.fireEvent('start', [this.element, event]).fireEvent('snap', this.element);\n\t\t}\n\t},\n\n\tcancel: function() {\n\t\tdocument.removeEvents({\n\t\t\ttouchmove: this.bound.check,\n\t\t\ttouchend: this.bound.cancel\n\t\t});\n\t\treturn this.previous.apply(this, arguments);\n\t},\n\n\tstop: function() {\n\t\tdocument.removeEvents({\n\t\t\ttouchmove: this.bound.drag,\n\t\t\ttouchend: this.bound.stop\n\t\t});\n\t\treturn this.previous.apply(this, arguments);\n\t}\n});\n\n/*\n---\n\nname: Sortables\n\ndescription: Extends the base Sortables class with touch support.\n\nlicense: LGPLv3\n\nauthors:\n - Andreas Schempp\n\nrequires: [Sortables]\n\nprovides: Sortables\n\n...\n*/\n\nClass.refactor(Sortables,\n{\n\tinitialize: function(lists, options) {\n\t\toptions.dragOptions = Object.merge(options.dragOptions || {}, { preventDefault: (options.dragOptions && options.dragOptions.preventDefault) || Browser.Features.Touch });\n\t\tif (options.dragOptions.unDraggableTags === undefined) {\n\t\t\toptions.dragOptions.unDraggableTags = this.options.unDraggableTags.filter(function(tag) {\n\t\t\t\treturn tag != 'button';\n\t\t\t});\n\t\t}\n\t\treturn this.previous.apply(this, arguments);\n\t},\n\n\taddItems: function() {\n\t\tArray.flatten(arguments).each(function(element) {\n\t\t\tthis.elements.push(element);\n\t\t\tvar start = element.retrieve('sortables:start', function(event) {\n\t\t\t\tthis.start.call(this, event, element);\n\t\t\t}.bind(this));\n\t\t\t(this.options.handle ? element.getElement(this.options.handle) || element : element).addEvents({\n\t\t\t\tmousedown: start,\n\t\t\t\ttouchstart: start\n\t\t\t});\n\t\t}, this);\n\t\treturn this;\n\t},\n\n\tremoveItems: function() {\n\t\treturn $$(Array.flatten(arguments).map(function(element) {\n\t\t\tthis.elements.erase(element);\n\t\t\tvar start = element.retrieve('sortables:start');\n\t\t\t(this.options.handle ? element.getElement(this.options.handle) || element : element).removeEvents({\n\t\t\t\tmousedown: start,\n\t\t\t\ttouchend: start\n\t\t\t});\n\t\t\treturn element;\n\t\t}, this));\n\t},\n\n\tgetClone: function(event, element) {\n\t\tif (!this.options.clone) return new Element(element.tagName).inject(document.body);\n\t\tif (typeOf(this.options.clone) == 'function') return this.options.clone.call(this, event, element, this.list);\n\t\tvar clone = this.previous.apply(this, arguments);\n\t\tclone.addEvent('touchstart', function(event) {\n\t\t\telement.fireEvent('touchstart', event);\n\t\t});\n\t\treturn clone;\n\t}\n});\n\n/*\n---\n\nscript: Request.Queue.js\n\nname: Request.Queue\n\ndescription: Extends the base Request.Queue class and attempts to fix some issues.\n\nlicense: MIT-style license\n\nauthors:\n - Leo Feyer\n\nrequires:\n\t- Core/Element\n\t- Core/Request\n\t- Class.Binds\n\nprovides: [Request.Queue]\n\n...\n*/\n\nClass.refactor(Request.Queue,\n{\n\t// Do not fire the \"end\" event here\n\tonComplete: function(){\n\t\tthis.fireEvent('complete', arguments);\n\t},\n\n\t// Call resume() instead of runNext()\n\tonCancel: function(){\n\t\tif (this.options.autoAdvance && !this.error) this.resume();\n\t\tthis.fireEvent('cancel', arguments);\n\t},\n\n\t// Call resume() instead of runNext() and fire the \"end\" event\n\tonSuccess: function(){\n\t\tif (this.options.autoAdvance && !this.error) this.resume();\n\t\tthis.fireEvent('success', arguments);\n\t\tif (!this.queue.length && !this.isRunning()) this.fireEvent('end');\n\t},\n\n\t// Call resume() instead of runNext() and fire the \"end\" event\n\tonFailure: function(){\n\t\tthis.error = true;\n\t\tif (!this.options.stopOnFailure && this.options.autoAdvance) this.resume();\n\t\tthis.fireEvent('failure', arguments);\n\t\tif (!this.queue.length && !this.isRunning()) this.fireEvent('end');\n\t},\n\n\t// Call resume() instead of runNext()\n\tonException: function(){\n\t\tthis.error = true;\n\t\tif (!this.options.stopOnFailure && this.options.autoAdvance) this.resume();\n\t\tthis.fireEvent('exception', arguments);\n\t}\n});\n\n/*\n---\n\nname: Contao.SerpPreview\n\ndescription: Generates a SERP preview\n\nlicense: LGPLv3\n\nauthors:\n - Leo Feyer\n\nrequires: [Request, JSON]\n\nprovides: Contao.SerpPreview\n\n...\n*/\n\nContao.SerpPreview = new Class(\n{\n\toptions: {\n\t\tid: 0,\n\t\ttrail: null,\n\t\ttitleField: null,\n\t\ttitleFallbackField: null,\n\t\taliasField: null,\n\t\tdescriptionField: null,\n\t\tdescriptionFallbackField: null,\n\t\ttitleTag: null\n\t},\n\n\tshorten: function(str, max) {\n\t\tif (str.length <= max) {\n\t\t\treturn str;\n\t\t}\n\t\treturn str.substr(0, str.lastIndexOf(' ', max)) + ' ';\n\t},\n\n\thtml2string: function(html) {\n\t\treturn new DOMParser().parseFromString(html, 'text/html').body.textContent.replace(/\\[-]/g, '\\xAD').replace(/\\[nbsp]/g, '\\xA0');\n\t},\n\n\tgetTinymce: function() {\n\t\tif (window.tinyMCE && this.options.descriptionFallbackField) {\n\t\t\treturn window.tinyMCE.get(this.options.descriptionFallbackField);\n\t\t}\n\t},\n\n\tinitialize: function() {\n\t\tthis.options = Object.merge.apply(null, [{}, this.options].append(arguments));\n\n\t\tvar serpTitle = $('serp_title_' + this.options.id),\n\t\t\tserpUrl = $('serp_url_' + this.options.id),\n\t\t\tserpDescription = $('serp_description_' + this.options.id),\n\t\t\ttitleField = $(this.options.titleField),\n\t\t\ttitleFallbackField = $(this.options.titleFallbackField),\n\t\t\taliasField = $(this.options.aliasField),\n\t\t\tdescriptionField = $(this.options.descriptionField),\n\t\t\tdescriptionFallbackField = $(this.options.descriptionFallbackField),\n\t\t\tindexEmpty = this.options.trail.indexOf('') === -1,\n\t\t\ttitleTag = this.options.titleTag || '%s';\n\n\t\ttitleField && titleField.addEvent('input', function() {\n\t\t\tif (titleField.value) {\n\t\t\t\tserpTitle.set('text', this.shorten(this.html2string(titleTag.replace(/%s/, titleField.value)).replace(/%%/g, '%'), 64));\n\t\t\t} else if (titleFallbackField && titleFallbackField.value) {\n\t\t\t\tserpTitle.set('text', this.shorten(this.html2string(titleTag.replace(/%s/, titleFallbackField.value)).replace(/%%/g, '%'), 64));\n\t\t\t} else {\n\t\t\t\tserpTitle.set('text', '');\n\t\t\t}\n\t\t}.bind(this));\n\n\t\ttitleFallbackField && titleFallbackField.addEvent('input', function() {\n\t\t\tif (titleField && titleField.value) return;\n\t\t\tserpTitle.set('text', this.shorten(this.html2string(titleTag.replace(/%s/, titleFallbackField.value)).replace(/%%/g, '%'), 64));\n\t\t}.bind(this));\n\n\t\taliasField && aliasField.addEvent('input', function() {\n\t\t\tif (aliasField.value == 'index' && indexEmpty) {\n\t\t\t\tserpUrl.set('text', this.options.trail);\n\t\t\t} else {\n\t\t\t\tserpUrl.set('text', this.options.trail + '  ' + (aliasField.value || this.options.id).replace(/\\//g, '  '));\n\t\t\t}\n\t\t}.bind(this));\n\n\t\tdescriptionField && descriptionField.addEvent('input', function() {\n\t\t\tif (descriptionField.value) {\n\t\t\t\tserpDescription.set('text', this.shorten(descriptionField.value, 160));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar editor = this.getTinymce();\n\t\t\tif (editor) {\n\t\t\t\tserpDescription.set('text', this.shorten(this.html2string(editor.getContent()), 160));\n\t\t\t} else if (descriptionFallbackField && descriptionFallbackField.value) {\n\t\t\t\tserpDescription.set('text', this.shorten(this.html2string(descriptionFallbackField.value), 160));\n\t\t\t} else {\n\t\t\t\tserpDescription.set('text', '');\n\t\t\t}\n\t\t}.bind(this));\n\n\t\tdescriptionFallbackField && descriptionFallbackField.addEvent('input', function() {\n\t\t\tif (descriptionField && descriptionField.value) return;\n\t\t\tserpDescription.set('text', this.shorten(this.html2string(descriptionFallbackField.value), 160));\n\t\t}.bind(this));\n\n\t\tsetTimeout(function() {\n\t\t\tvar editor = this.getTinymce();\n\t\t\teditor && editor.on('keyup', function() {\n\t\t\t\tif (descriptionField && descriptionField.value) return;\n\t\t\t\tserpDescription.set('text', this.shorten(this.html2string(window.tinyMCE.activeEditor.getContent()), 160));\n\t\t\t}.bind(this));\n\t\t}.bind(this), 4);\n\t}\n});\n","(function(){\n    'use strict';\n\n    const initializedRows = new WeakMap();\n    const saveScrollOffsetEvent = new Event('store-scroll-offset');\n\n    const init = (row) => {\n        // Check if this row has already been initialized\n        if (initializedRows.has(row)) {\n            return;\n        }\n\n        // Check if the row has all necessary elements to prevent the mutation observer\n        // from initializing the incomplete widget.\n        if (!row.querySelector('button.drag-handle')) {\n            return;\n        }\n\n        initializedRows.set(row, true);\n\n        const tbody = row.closest('tbody');\n\n        const makeSortable = (tbody) => {\n            Array.from(tbody.children).forEach((tr, i) => {\n                tr.querySelectorAll('input, select').forEach((el) => {\n                    el.name = el.name.replace(/\\[[0-9]+]/g, '[' + i + ']');\n                });\n            });\n\n            // TODO: replace this with a vanilla JS solution\n            new Sortables(tbody, {\n                constrain: true,\n                opacity: 0.6,\n                handle: '.drag-handle',\n                onComplete: function() {\n                    makeSortable(tbody);\n                }\n            });\n        };\n\n        const addEventsTo = (tr) => {\n            tr.querySelectorAll('button').forEach((bt) => {\n                const command = bt.dataset.command;\n\n                switch (command) {\n                    case 'copy':\n                        bt.addEventListener('click', () => {\n                            window.dispatchEvent(saveScrollOffsetEvent);\n                            const ntr = tr.cloneNode(true);\n                            const selects = tr.querySelectorAll('select');\n                            const nselects = ntr.querySelectorAll('select');\n                            for (let j=0; j<selects.length; j++) {\n                                nselects[j].value = selects[j].value;\n                            }\n                            tr.parentNode.insertBefore(ntr, tr.nextSibling);\n                            addEventsTo(ntr);\n                            makeSortable(tbody);\n                        });\n                        break;\n\n                    case 'delete':\n                        bt.addEventListener('click', () => {\n                            window.dispatchEvent(saveScrollOffsetEvent);\n                            if (tbody.children.length > 1) {\n                                tr.remove();\n                            } else {\n                                // Reset values for last element (#689)\n                                tr.querySelectorAll('input').forEach((input) => {\n                                    input.value = '';\n                                });\n\n                                tr.querySelectorAll('select').forEach((select) => {\n                                    select.value = select.children[0].value;\n                                });\n                            }\n                            makeSortable(tbody);\n                        });\n                        break;\n\n                    default:\n                        if (bt.classList.contains('drag-handle')) {\n                            bt.addEventListener('keydown', (event) => {\n                                if (event.code === 'ArrowUp' || event.keyCode === 38) {\n                                    event.preventDefault();\n                                    if (tr.previousElementSibling) {\n                                        tr.previousElementSibling.insertAdjacentElement('beforebegin', tr);\n                                    } else {\n                                        tbody.insertAdjacentElement('beforeend', tr);\n                                    }\n                                    bt.focus();\n                                    makeSortable(tbody);\n                                } else if (event.code === 'ArrowDown' || event.keyCode === 40) {\n                                    event.preventDefault();\n                                    if (tr.nextElementSibling) {\n                                        tr.nextElementSibling.insertAdjacentElement('afterend', tr);\n                                    } else {\n                                        tbody.insertAdjacentElement('afterbegin', tr);\n                                    }\n                                    bt.focus();\n                                    makeSortable(tbody);\n                                }\n                            });\n                        }\n                        break;\n                }\n            });\n        };\n\n        makeSortable(tbody);\n        addEventsTo(row);\n    };\n\n    document.querySelectorAll('.tl_sectionwizard tr').forEach(init);\n\n    new MutationObserver(function(mutationsList) {\n        for (const mutation of mutationsList) {\n            if (mutation.type === 'childList') {\n                mutation.addedNodes.forEach(function(element) {\n                    if (element.matches && element.matches('.tl_sectionwizard tr, .tl_sectionwizard tr *')) {\n                        init(element.closest('tr'));\n                    }\n                })\n            }\n        }\n    }).observe(document, {\n        attributes: false,\n        childList: true,\n        subtree: true\n    });\n})();\n","(function() {\n    const initialized = [];\n\n    const tip = document.createElement('div');\n    tip.setAttribute('role', 'tooltip');\n    tip.classList.add('tip')\n    tip.style.position = 'absolute';\n    tip.style.display = 'none';\n\n    const init = function(el, x, y, useContent) {\n        if (initialized.includes(el)) {\n            return;\n        }\n\n        initialized.push(el);\n\n        let text, timer;\n\n        el.addEventListener('mouseenter', function() {\n            if (useContent) {\n                text = el.innerHTML;\n            } else {\n                text = el.getAttribute('title');\n                el.setAttribute('data-original-title', text);\n                el.removeAttribute('title');\n                text = text?.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/'/g, '&apos;');\n            }\n\n            if (!text) {\n                return;\n            }\n\n            clearTimeout(timer);\n            tip.style.willChange = 'display,contents';\n\n            timer = setTimeout(function() {\n                const position = el.getBoundingClientRect();\n                const rtl = getComputedStyle(el).direction === 'rtl';\n                const clientWidth = document.html.clientWidth;\n\n                if ((rtl && position.x < 200) || (!rtl && position.x < (clientWidth - 200))) {\n                    tip.style.left = `${(window.scrollX + position.left + x)}px`;\n                    tip.style.right = 'auto';\n                    tip.classList.remove('tip--rtl')\n                } else {\n                    tip.style.left = 'auto';\n                    tip.style.right = `${(clientWidth - window.scrollX - position.right + x)}px`;\n                    tip.classList.add('tip--rtl')\n                }\n\n                tip.innerHTML = `<div>${text}</div>`;\n                tip.style.top = `${(window.scrollY + position.top + y)}px`;\n                tip.style.display = 'block';\n                tip.style.willChange = 'auto';\n\n                if (!tip.parentNode && document.body) {\n                    document.body.append(tip);\n                }\n            }, 1000)\n        })\n\n        el.addEventListener('mouseleave', function() {\n            if (el.hasAttribute('data-original-title')) {\n                if (!el.hasAttribute('title')) {\n                    el.setAttribute('title', el.getAttribute('data-original-title'));\n                }\n\n                el.removeAttribute('data-original-title')\n            }\n\n            clearTimeout(timer)\n            tip.style.willChange = 'auto';\n\n            if (tip.style.display === 'block') {\n                tip.style.willChange = 'display';\n                timer = setTimeout(function() {\n                    tip.style.display = 'none';\n                    tip.style.willChange = 'auto';\n                }, 100)\n            }\n        })\n\n        const action = el.closest('button, a');\n\n        // Hide tooltip when clicking a button (usually an operation icon in a wizard widget)\n        if (action) {\n            action.addEventListener('click', function() {\n                clearTimeout(timer);\n                tip.style.display = 'none';\n                tip.style.willChange = 'auto';\n            })\n        }\n    }\n\n    function select(node, selector) {\n        if (node.matches(selector)) {\n            return [node, ...node.querySelectorAll(selector)];\n        }\n\n        return node.querySelectorAll(selector);\n    }\n\n    function setup(node) {\n        select(node, 'p.tl_tip').forEach(function(el) {\n            init(el, 0, 23, true);\n        });\n\n        select(node, '#home').forEach(function(el) {\n            init(el, 6, 42);\n        });\n\n        select(node, '#tmenu a[title]').forEach(function(el) {\n            init(el, 0, 42);\n        });\n\n        select(node, 'a[title][class^=\"group-\"]').forEach(function(el) {\n            init(el, -6, 27);\n        });\n\n        select(node, 'a[title].navigation').forEach(function(el) {\n            init(el, 25, 32);\n        });\n\n        select(node, 'img[title]').forEach(function(el) {\n            init(el, -9, el.classList.contains('gimage') ? 60 : 30);\n        });\n\n        select(node, 'a[title]').forEach(function(el) {\n            if (el.classList.contains('picker-wizard')) {\n                init(el, -4, 30);\n            } else {\n                init(el, -9, 30);\n            }\n        });\n\n        select(node, 'button[title]').forEach(function(el) {\n            if (el.classList.contains('unselectable')) {\n                init(el, -4, 20);\n            } else {\n                init(el, -9, 30);\n            }\n        });\n\n        ['input[title]', 'time[title]', 'span[title]'].forEach(function(selector) {\n            select(node, selector).forEach(function(el) {\n                init(el, -9, ((selector === 'time[title]' || selector === 'span[title]') ? 26 : 30));\n            });\n        });\n    }\n\n    setup(document.documentElement);\n\n    new MutationObserver(function(mutationsList) {\n        for (const mutation of mutationsList) {\n            if (mutation.type === 'childList') {\n                mutation.addedNodes.forEach(function(element) {\n                    if (element.matches && element.querySelectorAll) {\n                        setup(element);\n                    }\n                })\n            }\n        }\n    }).observe(document, {\n        attributes: false,\n        childList: true,\n        subtree: true\n    });\n})();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\nStimulus Webpack Helpers 1.0.0\nCopyright  2021 Basecamp, LLC\n */\nfunction definitionsFromContext(context) {\n    return context.keys()\n        .map((key) => definitionForModuleWithContextAndKey(context, key))\n        .filter((value) => value);\n}\nfunction definitionForModuleWithContextAndKey(context, key) {\n    const identifier = identifierForContextKey(key);\n    if (identifier) {\n        return definitionForModuleAndIdentifier(context(key), identifier);\n    }\n}\nfunction definitionForModuleAndIdentifier(module, identifier) {\n    const controllerConstructor = module.default;\n    if (typeof controllerConstructor == \"function\") {\n        return { identifier, controllerConstructor };\n    }\n}\nfunction identifierForContextKey(key) {\n    const logicalName = (key.match(/^(?:\\.\\/)?(.+)(?:[_-]controller\\..+?)$/) || [])[1];\n    if (logicalName) {\n        return logicalName.replace(/_/g, \"-\").replace(/\\//g, \"--\");\n    }\n}\n\nexport { definitionForModuleAndIdentifier, definitionForModuleWithContextAndKey, definitionsFromContext, identifierForContextKey };\n","/*\nTurbo 7.2.4\nCopyright  2022 37signals LLC\n */\n(function () {\n    if (window.Reflect === undefined ||\n        window.customElements === undefined ||\n        window.customElements.polyfillWrapFlushCallback) {\n        return;\n    }\n    const BuiltInHTMLElement = HTMLElement;\n    const wrapperForTheName = {\n        HTMLElement: function HTMLElement() {\n            return Reflect.construct(BuiltInHTMLElement, [], this.constructor);\n        },\n    };\n    window.HTMLElement = wrapperForTheName[\"HTMLElement\"];\n    HTMLElement.prototype = BuiltInHTMLElement.prototype;\n    HTMLElement.prototype.constructor = HTMLElement;\n    Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();\n\n/**\n * The MIT License (MIT)\n * \n * Copyright (c) 2019 Javan Makhmali\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n(function(prototype) {\n  if (typeof prototype.requestSubmit == \"function\") return\n\n  prototype.requestSubmit = function(submitter) {\n    if (submitter) {\n      validateSubmitter(submitter, this);\n      submitter.click();\n    } else {\n      submitter = document.createElement(\"input\");\n      submitter.type = \"submit\";\n      submitter.hidden = true;\n      this.appendChild(submitter);\n      submitter.click();\n      this.removeChild(submitter);\n    }\n  };\n\n  function validateSubmitter(submitter, form) {\n    submitter instanceof HTMLElement || raise(TypeError, \"parameter 1 is not of type 'HTMLElement'\");\n    submitter.type == \"submit\" || raise(TypeError, \"The specified element is not a submit button\");\n    submitter.form == form || raise(DOMException, \"The specified element is not owned by this form element\", \"NotFoundError\");\n  }\n\n  function raise(errorConstructor, message, name) {\n    throw new errorConstructor(\"Failed to execute 'requestSubmit' on 'HTMLFormElement': \" + message + \".\", name)\n  }\n})(HTMLFormElement.prototype);\n\nconst submittersByForm = new WeakMap();\nfunction findSubmitterFromClickTarget(target) {\n    const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;\n    const candidate = element ? element.closest(\"input, button\") : null;\n    return (candidate === null || candidate === void 0 ? void 0 : candidate.type) == \"submit\" ? candidate : null;\n}\nfunction clickCaptured(event) {\n    const submitter = findSubmitterFromClickTarget(event.target);\n    if (submitter && submitter.form) {\n        submittersByForm.set(submitter.form, submitter);\n    }\n}\n(function () {\n    if (\"submitter\" in Event.prototype)\n        return;\n    let prototype;\n    if (\"SubmitEvent\" in window && /Apple Computer/.test(navigator.vendor)) {\n        prototype = window.SubmitEvent.prototype;\n    }\n    else if (\"SubmitEvent\" in window) {\n        return;\n    }\n    else {\n        prototype = window.Event.prototype;\n    }\n    addEventListener(\"click\", clickCaptured, true);\n    Object.defineProperty(prototype, \"submitter\", {\n        get() {\n            if (this.type == \"submit\" && this.target instanceof HTMLFormElement) {\n                return submittersByForm.get(this.target);\n            }\n        },\n    });\n})();\n\nvar FrameLoadingStyle;\n(function (FrameLoadingStyle) {\n    FrameLoadingStyle[\"eager\"] = \"eager\";\n    FrameLoadingStyle[\"lazy\"] = \"lazy\";\n})(FrameLoadingStyle || (FrameLoadingStyle = {}));\nclass FrameElement extends HTMLElement {\n    constructor() {\n        super();\n        this.loaded = Promise.resolve();\n        this.delegate = new FrameElement.delegateConstructor(this);\n    }\n    static get observedAttributes() {\n        return [\"disabled\", \"complete\", \"loading\", \"src\"];\n    }\n    connectedCallback() {\n        this.delegate.connect();\n    }\n    disconnectedCallback() {\n        this.delegate.disconnect();\n    }\n    reload() {\n        return this.delegate.sourceURLReloaded();\n    }\n    attributeChangedCallback(name) {\n        if (name == \"loading\") {\n            this.delegate.loadingStyleChanged();\n        }\n        else if (name == \"complete\") {\n            this.delegate.completeChanged();\n        }\n        else if (name == \"src\") {\n            this.delegate.sourceURLChanged();\n        }\n        else {\n            this.delegate.disabledChanged();\n        }\n    }\n    get src() {\n        return this.getAttribute(\"src\");\n    }\n    set src(value) {\n        if (value) {\n            this.setAttribute(\"src\", value);\n        }\n        else {\n            this.removeAttribute(\"src\");\n        }\n    }\n    get loading() {\n        return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\");\n    }\n    set loading(value) {\n        if (value) {\n            this.setAttribute(\"loading\", value);\n        }\n        else {\n            this.removeAttribute(\"loading\");\n        }\n    }\n    get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(value) {\n        if (value) {\n            this.setAttribute(\"disabled\", \"\");\n        }\n        else {\n            this.removeAttribute(\"disabled\");\n        }\n    }\n    get autoscroll() {\n        return this.hasAttribute(\"autoscroll\");\n    }\n    set autoscroll(value) {\n        if (value) {\n            this.setAttribute(\"autoscroll\", \"\");\n        }\n        else {\n            this.removeAttribute(\"autoscroll\");\n        }\n    }\n    get complete() {\n        return !this.delegate.isLoading;\n    }\n    get isActive() {\n        return this.ownerDocument === document && !this.isPreview;\n    }\n    get isPreview() {\n        var _a, _b;\n        return (_b = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.documentElement) === null || _b === void 0 ? void 0 : _b.hasAttribute(\"data-turbo-preview\");\n    }\n}\nfunction frameLoadingStyleFromString(style) {\n    switch (style.toLowerCase()) {\n        case \"lazy\":\n            return FrameLoadingStyle.lazy;\n        default:\n            return FrameLoadingStyle.eager;\n    }\n}\n\nfunction expandURL(locatable) {\n    return new URL(locatable.toString(), document.baseURI);\n}\nfunction getAnchor(url) {\n    let anchorMatch;\n    if (url.hash) {\n        return url.hash.slice(1);\n    }\n    else if ((anchorMatch = url.href.match(/#(.*)$/))) {\n        return anchorMatch[1];\n    }\n}\nfunction getAction(form, submitter) {\n    const action = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"formaction\")) || form.getAttribute(\"action\") || form.action;\n    return expandURL(action);\n}\nfunction getExtension(url) {\n    return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\";\n}\nfunction isHTML(url) {\n    return !!getExtension(url).match(/^(?:|\\.(?:htm|html|xhtml|php))$/);\n}\nfunction isPrefixedBy(baseURL, url) {\n    const prefix = getPrefix(url);\n    return baseURL.href === expandURL(prefix).href || baseURL.href.startsWith(prefix);\n}\nfunction locationIsVisitable(location, rootLocation) {\n    return isPrefixedBy(location, rootLocation) && isHTML(location);\n}\nfunction getRequestURL(url) {\n    const anchor = getAnchor(url);\n    return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href;\n}\nfunction toCacheKey(url) {\n    return getRequestURL(url);\n}\nfunction urlsAreEqual(left, right) {\n    return expandURL(left).href == expandURL(right).href;\n}\nfunction getPathComponents(url) {\n    return url.pathname.split(\"/\").slice(1);\n}\nfunction getLastPathComponent(url) {\n    return getPathComponents(url).slice(-1)[0];\n}\nfunction getPrefix(url) {\n    return addTrailingSlash(url.origin + url.pathname);\n}\nfunction addTrailingSlash(value) {\n    return value.endsWith(\"/\") ? value : value + \"/\";\n}\n\nclass FetchResponse {\n    constructor(response) {\n        this.response = response;\n    }\n    get succeeded() {\n        return this.response.ok;\n    }\n    get failed() {\n        return !this.succeeded;\n    }\n    get clientError() {\n        return this.statusCode >= 400 && this.statusCode <= 499;\n    }\n    get serverError() {\n        return this.statusCode >= 500 && this.statusCode <= 599;\n    }\n    get redirected() {\n        return this.response.redirected;\n    }\n    get location() {\n        return expandURL(this.response.url);\n    }\n    get isHTML() {\n        return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/);\n    }\n    get statusCode() {\n        return this.response.status;\n    }\n    get contentType() {\n        return this.header(\"Content-Type\");\n    }\n    get responseText() {\n        return this.response.clone().text();\n    }\n    get responseHTML() {\n        if (this.isHTML) {\n            return this.response.clone().text();\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    header(name) {\n        return this.response.headers.get(name);\n    }\n}\n\nfunction isAction(action) {\n    return action == \"advance\" || action == \"replace\" || action == \"restore\";\n}\n\nfunction activateScriptElement(element) {\n    if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n        return element;\n    }\n    else {\n        const createdScriptElement = document.createElement(\"script\");\n        const cspNonce = getMetaContent(\"csp-nonce\");\n        if (cspNonce) {\n            createdScriptElement.nonce = cspNonce;\n        }\n        createdScriptElement.textContent = element.textContent;\n        createdScriptElement.async = false;\n        copyElementAttributes(createdScriptElement, element);\n        return createdScriptElement;\n    }\n}\nfunction copyElementAttributes(destinationElement, sourceElement) {\n    for (const { name, value } of sourceElement.attributes) {\n        destinationElement.setAttribute(name, value);\n    }\n}\nfunction createDocumentFragment(html) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = html;\n    return template.content;\n}\nfunction dispatch(eventName, { target, cancelable, detail } = {}) {\n    const event = new CustomEvent(eventName, {\n        cancelable,\n        bubbles: true,\n        detail,\n    });\n    if (target && target.isConnected) {\n        target.dispatchEvent(event);\n    }\n    else {\n        document.documentElement.dispatchEvent(event);\n    }\n    return event;\n}\nfunction nextAnimationFrame() {\n    return new Promise((resolve) => requestAnimationFrame(() => resolve()));\n}\nfunction nextEventLoopTick() {\n    return new Promise((resolve) => setTimeout(() => resolve(), 0));\n}\nfunction nextMicrotask() {\n    return Promise.resolve();\n}\nfunction parseHTMLDocument(html = \"\") {\n    return new DOMParser().parseFromString(html, \"text/html\");\n}\nfunction unindent(strings, ...values) {\n    const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\");\n    const match = lines[0].match(/^\\s+/);\n    const indent = match ? match[0].length : 0;\n    return lines.map((line) => line.slice(indent)).join(\"\\n\");\n}\nfunction interpolate(strings, values) {\n    return strings.reduce((result, string, i) => {\n        const value = values[i] == undefined ? \"\" : values[i];\n        return result + string + value;\n    }, \"\");\n}\nfunction uuid() {\n    return Array.from({ length: 36 })\n        .map((_, i) => {\n        if (i == 8 || i == 13 || i == 18 || i == 23) {\n            return \"-\";\n        }\n        else if (i == 14) {\n            return \"4\";\n        }\n        else if (i == 19) {\n            return (Math.floor(Math.random() * 4) + 8).toString(16);\n        }\n        else {\n            return Math.floor(Math.random() * 15).toString(16);\n        }\n    })\n        .join(\"\");\n}\nfunction getAttribute(attributeName, ...elements) {\n    for (const value of elements.map((element) => element === null || element === void 0 ? void 0 : element.getAttribute(attributeName))) {\n        if (typeof value == \"string\")\n            return value;\n    }\n    return null;\n}\nfunction hasAttribute(attributeName, ...elements) {\n    return elements.some((element) => element && element.hasAttribute(attributeName));\n}\nfunction markAsBusy(...elements) {\n    for (const element of elements) {\n        if (element.localName == \"turbo-frame\") {\n            element.setAttribute(\"busy\", \"\");\n        }\n        element.setAttribute(\"aria-busy\", \"true\");\n    }\n}\nfunction clearBusyState(...elements) {\n    for (const element of elements) {\n        if (element.localName == \"turbo-frame\") {\n            element.removeAttribute(\"busy\");\n        }\n        element.removeAttribute(\"aria-busy\");\n    }\n}\nfunction waitForLoad(element, timeoutInMilliseconds = 2000) {\n    return new Promise((resolve) => {\n        const onComplete = () => {\n            element.removeEventListener(\"error\", onComplete);\n            element.removeEventListener(\"load\", onComplete);\n            resolve();\n        };\n        element.addEventListener(\"load\", onComplete, { once: true });\n        element.addEventListener(\"error\", onComplete, { once: true });\n        setTimeout(resolve, timeoutInMilliseconds);\n    });\n}\nfunction getHistoryMethodForAction(action) {\n    switch (action) {\n        case \"replace\":\n            return history.replaceState;\n        case \"advance\":\n        case \"restore\":\n            return history.pushState;\n    }\n}\nfunction getVisitAction(...elements) {\n    const action = getAttribute(\"data-turbo-action\", ...elements);\n    return isAction(action) ? action : null;\n}\nfunction getMetaElement(name) {\n    return document.querySelector(`meta[name=\"${name}\"]`);\n}\nfunction getMetaContent(name) {\n    const element = getMetaElement(name);\n    return element && element.content;\n}\nfunction setMetaContent(name, content) {\n    let element = getMetaElement(name);\n    if (!element) {\n        element = document.createElement(\"meta\");\n        element.setAttribute(\"name\", name);\n        document.head.appendChild(element);\n    }\n    element.setAttribute(\"content\", content);\n    return element;\n}\n\nvar FetchMethod;\n(function (FetchMethod) {\n    FetchMethod[FetchMethod[\"get\"] = 0] = \"get\";\n    FetchMethod[FetchMethod[\"post\"] = 1] = \"post\";\n    FetchMethod[FetchMethod[\"put\"] = 2] = \"put\";\n    FetchMethod[FetchMethod[\"patch\"] = 3] = \"patch\";\n    FetchMethod[FetchMethod[\"delete\"] = 4] = \"delete\";\n})(FetchMethod || (FetchMethod = {}));\nfunction fetchMethodFromString(method) {\n    switch (method.toLowerCase()) {\n        case \"get\":\n            return FetchMethod.get;\n        case \"post\":\n            return FetchMethod.post;\n        case \"put\":\n            return FetchMethod.put;\n        case \"patch\":\n            return FetchMethod.patch;\n        case \"delete\":\n            return FetchMethod.delete;\n    }\n}\nclass FetchRequest {\n    constructor(delegate, method, location, body = new URLSearchParams(), target = null) {\n        this.abortController = new AbortController();\n        this.resolveRequestPromise = (_value) => { };\n        this.delegate = delegate;\n        this.method = method;\n        this.headers = this.defaultHeaders;\n        this.body = body;\n        this.url = location;\n        this.target = target;\n    }\n    get location() {\n        return this.url;\n    }\n    get params() {\n        return this.url.searchParams;\n    }\n    get entries() {\n        return this.body ? Array.from(this.body.entries()) : [];\n    }\n    cancel() {\n        this.abortController.abort();\n    }\n    async perform() {\n        var _a, _b;\n        const { fetchOptions } = this;\n        (_b = (_a = this.delegate).prepareHeadersForRequest) === null || _b === void 0 ? void 0 : _b.call(_a, this.headers, this);\n        await this.allowRequestToBeIntercepted(fetchOptions);\n        try {\n            this.delegate.requestStarted(this);\n            const response = await fetch(this.url.href, fetchOptions);\n            return await this.receive(response);\n        }\n        catch (error) {\n            if (error.name !== \"AbortError\") {\n                if (this.willDelegateErrorHandling(error)) {\n                    this.delegate.requestErrored(this, error);\n                }\n                throw error;\n            }\n        }\n        finally {\n            this.delegate.requestFinished(this);\n        }\n    }\n    async receive(response) {\n        const fetchResponse = new FetchResponse(response);\n        const event = dispatch(\"turbo:before-fetch-response\", {\n            cancelable: true,\n            detail: { fetchResponse },\n            target: this.target,\n        });\n        if (event.defaultPrevented) {\n            this.delegate.requestPreventedHandlingResponse(this, fetchResponse);\n        }\n        else if (fetchResponse.succeeded) {\n            this.delegate.requestSucceededWithResponse(this, fetchResponse);\n        }\n        else {\n            this.delegate.requestFailedWithResponse(this, fetchResponse);\n        }\n        return fetchResponse;\n    }\n    get fetchOptions() {\n        var _a;\n        return {\n            method: FetchMethod[this.method].toUpperCase(),\n            credentials: \"same-origin\",\n            headers: this.headers,\n            redirect: \"follow\",\n            body: this.isIdempotent ? null : this.body,\n            signal: this.abortSignal,\n            referrer: (_a = this.delegate.referrer) === null || _a === void 0 ? void 0 : _a.href,\n        };\n    }\n    get defaultHeaders() {\n        return {\n            Accept: \"text/html, application/xhtml+xml\",\n        };\n    }\n    get isIdempotent() {\n        return this.method == FetchMethod.get;\n    }\n    get abortSignal() {\n        return this.abortController.signal;\n    }\n    acceptResponseType(mimeType) {\n        this.headers[\"Accept\"] = [mimeType, this.headers[\"Accept\"]].join(\", \");\n    }\n    async allowRequestToBeIntercepted(fetchOptions) {\n        const requestInterception = new Promise((resolve) => (this.resolveRequestPromise = resolve));\n        const event = dispatch(\"turbo:before-fetch-request\", {\n            cancelable: true,\n            detail: {\n                fetchOptions,\n                url: this.url,\n                resume: this.resolveRequestPromise,\n            },\n            target: this.target,\n        });\n        if (event.defaultPrevented)\n            await requestInterception;\n    }\n    willDelegateErrorHandling(error) {\n        const event = dispatch(\"turbo:fetch-request-error\", {\n            target: this.target,\n            cancelable: true,\n            detail: { request: this, error: error },\n        });\n        return !event.defaultPrevented;\n    }\n}\n\nclass AppearanceObserver {\n    constructor(delegate, element) {\n        this.started = false;\n        this.intersect = (entries) => {\n            const lastEntry = entries.slice(-1)[0];\n            if (lastEntry === null || lastEntry === void 0 ? void 0 : lastEntry.isIntersecting) {\n                this.delegate.elementAppearedInViewport(this.element);\n            }\n        };\n        this.delegate = delegate;\n        this.element = element;\n        this.intersectionObserver = new IntersectionObserver(this.intersect);\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.intersectionObserver.observe(this.element);\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.intersectionObserver.unobserve(this.element);\n        }\n    }\n}\n\nclass StreamMessage {\n    constructor(fragment) {\n        this.fragment = importStreamElements(fragment);\n    }\n    static wrap(message) {\n        if (typeof message == \"string\") {\n            return new this(createDocumentFragment(message));\n        }\n        else {\n            return message;\n        }\n    }\n}\nStreamMessage.contentType = \"text/vnd.turbo-stream.html\";\nfunction importStreamElements(fragment) {\n    for (const element of fragment.querySelectorAll(\"turbo-stream\")) {\n        const streamElement = document.importNode(element, true);\n        for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll(\"script\")) {\n            inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));\n        }\n        element.replaceWith(streamElement);\n    }\n    return fragment;\n}\n\nvar FormSubmissionState;\n(function (FormSubmissionState) {\n    FormSubmissionState[FormSubmissionState[\"initialized\"] = 0] = \"initialized\";\n    FormSubmissionState[FormSubmissionState[\"requesting\"] = 1] = \"requesting\";\n    FormSubmissionState[FormSubmissionState[\"waiting\"] = 2] = \"waiting\";\n    FormSubmissionState[FormSubmissionState[\"receiving\"] = 3] = \"receiving\";\n    FormSubmissionState[FormSubmissionState[\"stopping\"] = 4] = \"stopping\";\n    FormSubmissionState[FormSubmissionState[\"stopped\"] = 5] = \"stopped\";\n})(FormSubmissionState || (FormSubmissionState = {}));\nvar FormEnctype;\n(function (FormEnctype) {\n    FormEnctype[\"urlEncoded\"] = \"application/x-www-form-urlencoded\";\n    FormEnctype[\"multipart\"] = \"multipart/form-data\";\n    FormEnctype[\"plain\"] = \"text/plain\";\n})(FormEnctype || (FormEnctype = {}));\nfunction formEnctypeFromString(encoding) {\n    switch (encoding.toLowerCase()) {\n        case FormEnctype.multipart:\n            return FormEnctype.multipart;\n        case FormEnctype.plain:\n            return FormEnctype.plain;\n        default:\n            return FormEnctype.urlEncoded;\n    }\n}\nclass FormSubmission {\n    constructor(delegate, formElement, submitter, mustRedirect = false) {\n        this.state = FormSubmissionState.initialized;\n        this.delegate = delegate;\n        this.formElement = formElement;\n        this.submitter = submitter;\n        this.formData = buildFormData(formElement, submitter);\n        this.location = expandURL(this.action);\n        if (this.method == FetchMethod.get) {\n            mergeFormDataEntries(this.location, [...this.body.entries()]);\n        }\n        this.fetchRequest = new FetchRequest(this, this.method, this.location, this.body, this.formElement);\n        this.mustRedirect = mustRedirect;\n    }\n    static confirmMethod(message, _element, _submitter) {\n        return Promise.resolve(confirm(message));\n    }\n    get method() {\n        var _a;\n        const method = ((_a = this.submitter) === null || _a === void 0 ? void 0 : _a.getAttribute(\"formmethod\")) || this.formElement.getAttribute(\"method\") || \"\";\n        return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get;\n    }\n    get action() {\n        var _a;\n        const formElementAction = typeof this.formElement.action === \"string\" ? this.formElement.action : null;\n        if ((_a = this.submitter) === null || _a === void 0 ? void 0 : _a.hasAttribute(\"formaction\")) {\n            return this.submitter.getAttribute(\"formaction\") || \"\";\n        }\n        else {\n            return this.formElement.getAttribute(\"action\") || formElementAction || \"\";\n        }\n    }\n    get body() {\n        if (this.enctype == FormEnctype.urlEncoded || this.method == FetchMethod.get) {\n            return new URLSearchParams(this.stringFormData);\n        }\n        else {\n            return this.formData;\n        }\n    }\n    get enctype() {\n        var _a;\n        return formEnctypeFromString(((_a = this.submitter) === null || _a === void 0 ? void 0 : _a.getAttribute(\"formenctype\")) || this.formElement.enctype);\n    }\n    get isIdempotent() {\n        return this.fetchRequest.isIdempotent;\n    }\n    get stringFormData() {\n        return [...this.formData].reduce((entries, [name, value]) => {\n            return entries.concat(typeof value == \"string\" ? [[name, value]] : []);\n        }, []);\n    }\n    async start() {\n        const { initialized, requesting } = FormSubmissionState;\n        const confirmationMessage = getAttribute(\"data-turbo-confirm\", this.submitter, this.formElement);\n        if (typeof confirmationMessage === \"string\") {\n            const answer = await FormSubmission.confirmMethod(confirmationMessage, this.formElement, this.submitter);\n            if (!answer) {\n                return;\n            }\n        }\n        if (this.state == initialized) {\n            this.state = requesting;\n            return this.fetchRequest.perform();\n        }\n    }\n    stop() {\n        const { stopping, stopped } = FormSubmissionState;\n        if (this.state != stopping && this.state != stopped) {\n            this.state = stopping;\n            this.fetchRequest.cancel();\n            return true;\n        }\n    }\n    prepareHeadersForRequest(headers, request) {\n        if (!request.isIdempotent) {\n            const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\");\n            if (token) {\n                headers[\"X-CSRF-Token\"] = token;\n            }\n        }\n        if (this.requestAcceptsTurboStreamResponse(request)) {\n            request.acceptResponseType(StreamMessage.contentType);\n        }\n    }\n    requestStarted(_request) {\n        var _a;\n        this.state = FormSubmissionState.waiting;\n        (_a = this.submitter) === null || _a === void 0 ? void 0 : _a.setAttribute(\"disabled\", \"\");\n        dispatch(\"turbo:submit-start\", {\n            target: this.formElement,\n            detail: { formSubmission: this },\n        });\n        this.delegate.formSubmissionStarted(this);\n    }\n    requestPreventedHandlingResponse(request, response) {\n        this.result = { success: response.succeeded, fetchResponse: response };\n    }\n    requestSucceededWithResponse(request, response) {\n        if (response.clientError || response.serverError) {\n            this.delegate.formSubmissionFailedWithResponse(this, response);\n        }\n        else if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n            const error = new Error(\"Form responses must redirect to another location\");\n            this.delegate.formSubmissionErrored(this, error);\n        }\n        else {\n            this.state = FormSubmissionState.receiving;\n            this.result = { success: true, fetchResponse: response };\n            this.delegate.formSubmissionSucceededWithResponse(this, response);\n        }\n    }\n    requestFailedWithResponse(request, response) {\n        this.result = { success: false, fetchResponse: response };\n        this.delegate.formSubmissionFailedWithResponse(this, response);\n    }\n    requestErrored(request, error) {\n        this.result = { success: false, error };\n        this.delegate.formSubmissionErrored(this, error);\n    }\n    requestFinished(_request) {\n        var _a;\n        this.state = FormSubmissionState.stopped;\n        (_a = this.submitter) === null || _a === void 0 ? void 0 : _a.removeAttribute(\"disabled\");\n        dispatch(\"turbo:submit-end\", {\n            target: this.formElement,\n            detail: Object.assign({ formSubmission: this }, this.result),\n        });\n        this.delegate.formSubmissionFinished(this);\n    }\n    requestMustRedirect(request) {\n        return !request.isIdempotent && this.mustRedirect;\n    }\n    requestAcceptsTurboStreamResponse(request) {\n        return !request.isIdempotent || hasAttribute(\"data-turbo-stream\", this.submitter, this.formElement);\n    }\n}\nfunction buildFormData(formElement, submitter) {\n    const formData = new FormData(formElement);\n    const name = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"name\");\n    const value = submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"value\");\n    if (name) {\n        formData.append(name, value || \"\");\n    }\n    return formData;\n}\nfunction getCookieValue(cookieName) {\n    if (cookieName != null) {\n        const cookies = document.cookie ? document.cookie.split(\"; \") : [];\n        const cookie = cookies.find((cookie) => cookie.startsWith(cookieName));\n        if (cookie) {\n            const value = cookie.split(\"=\").slice(1).join(\"=\");\n            return value ? decodeURIComponent(value) : undefined;\n        }\n    }\n}\nfunction responseSucceededWithoutRedirect(response) {\n    return response.statusCode == 200 && !response.redirected;\n}\nfunction mergeFormDataEntries(url, entries) {\n    const searchParams = new URLSearchParams();\n    for (const [name, value] of entries) {\n        if (value instanceof File)\n            continue;\n        searchParams.append(name, value);\n    }\n    url.search = searchParams.toString();\n    return url;\n}\n\nclass Snapshot {\n    constructor(element) {\n        this.element = element;\n    }\n    get activeElement() {\n        return this.element.ownerDocument.activeElement;\n    }\n    get children() {\n        return [...this.element.children];\n    }\n    hasAnchor(anchor) {\n        return this.getElementForAnchor(anchor) != null;\n    }\n    getElementForAnchor(anchor) {\n        return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null;\n    }\n    get isConnected() {\n        return this.element.isConnected;\n    }\n    get firstAutofocusableElement() {\n        const inertDisabledOrHidden = \"[inert], :disabled, [hidden], details:not([open]), dialog:not([open])\";\n        for (const element of this.element.querySelectorAll(\"[autofocus]\")) {\n            if (element.closest(inertDisabledOrHidden) == null)\n                return element;\n            else\n                continue;\n        }\n        return null;\n    }\n    get permanentElements() {\n        return queryPermanentElementsAll(this.element);\n    }\n    getPermanentElementById(id) {\n        return getPermanentElementById(this.element, id);\n    }\n    getPermanentElementMapForSnapshot(snapshot) {\n        const permanentElementMap = {};\n        for (const currentPermanentElement of this.permanentElements) {\n            const { id } = currentPermanentElement;\n            const newPermanentElement = snapshot.getPermanentElementById(id);\n            if (newPermanentElement) {\n                permanentElementMap[id] = [currentPermanentElement, newPermanentElement];\n            }\n        }\n        return permanentElementMap;\n    }\n}\nfunction getPermanentElementById(node, id) {\n    return node.querySelector(`#${id}[data-turbo-permanent]`);\n}\nfunction queryPermanentElementsAll(node) {\n    return node.querySelectorAll(\"[id][data-turbo-permanent]\");\n}\n\nclass FormSubmitObserver {\n    constructor(delegate, eventTarget) {\n        this.started = false;\n        this.submitCaptured = () => {\n            this.eventTarget.removeEventListener(\"submit\", this.submitBubbled, false);\n            this.eventTarget.addEventListener(\"submit\", this.submitBubbled, false);\n        };\n        this.submitBubbled = ((event) => {\n            if (!event.defaultPrevented) {\n                const form = event.target instanceof HTMLFormElement ? event.target : undefined;\n                const submitter = event.submitter || undefined;\n                if (form &&\n                    submissionDoesNotDismissDialog(form, submitter) &&\n                    submissionDoesNotTargetIFrame(form, submitter) &&\n                    this.delegate.willSubmitForm(form, submitter)) {\n                    event.preventDefault();\n                    event.stopImmediatePropagation();\n                    this.delegate.formSubmitted(form, submitter);\n                }\n            }\n        });\n        this.delegate = delegate;\n        this.eventTarget = eventTarget;\n    }\n    start() {\n        if (!this.started) {\n            this.eventTarget.addEventListener(\"submit\", this.submitCaptured, true);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.eventTarget.removeEventListener(\"submit\", this.submitCaptured, true);\n            this.started = false;\n        }\n    }\n}\nfunction submissionDoesNotDismissDialog(form, submitter) {\n    const method = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"formmethod\")) || form.getAttribute(\"method\");\n    return method != \"dialog\";\n}\nfunction submissionDoesNotTargetIFrame(form, submitter) {\n    const target = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"formtarget\")) || form.target;\n    for (const element of document.getElementsByName(target)) {\n        if (element instanceof HTMLIFrameElement)\n            return false;\n    }\n    return true;\n}\n\nclass View {\n    constructor(delegate, element) {\n        this.resolveRenderPromise = (_value) => { };\n        this.resolveInterceptionPromise = (_value) => { };\n        this.delegate = delegate;\n        this.element = element;\n    }\n    scrollToAnchor(anchor) {\n        const element = this.snapshot.getElementForAnchor(anchor);\n        if (element) {\n            this.scrollToElement(element);\n            this.focusElement(element);\n        }\n        else {\n            this.scrollToPosition({ x: 0, y: 0 });\n        }\n    }\n    scrollToAnchorFromLocation(location) {\n        this.scrollToAnchor(getAnchor(location));\n    }\n    scrollToElement(element) {\n        element.scrollIntoView();\n    }\n    focusElement(element) {\n        if (element instanceof HTMLElement) {\n            if (element.hasAttribute(\"tabindex\")) {\n                element.focus();\n            }\n            else {\n                element.setAttribute(\"tabindex\", \"-1\");\n                element.focus();\n                element.removeAttribute(\"tabindex\");\n            }\n        }\n    }\n    scrollToPosition({ x, y }) {\n        this.scrollRoot.scrollTo(x, y);\n    }\n    scrollToTop() {\n        this.scrollToPosition({ x: 0, y: 0 });\n    }\n    get scrollRoot() {\n        return window;\n    }\n    async render(renderer) {\n        const { isPreview, shouldRender, newSnapshot: snapshot } = renderer;\n        if (shouldRender) {\n            try {\n                this.renderPromise = new Promise((resolve) => (this.resolveRenderPromise = resolve));\n                this.renderer = renderer;\n                await this.prepareToRenderSnapshot(renderer);\n                const renderInterception = new Promise((resolve) => (this.resolveInterceptionPromise = resolve));\n                const options = { resume: this.resolveInterceptionPromise, render: this.renderer.renderElement };\n                const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);\n                if (!immediateRender)\n                    await renderInterception;\n                await this.renderSnapshot(renderer);\n                this.delegate.viewRenderedSnapshot(snapshot, isPreview);\n                this.delegate.preloadOnLoadLinksForView(this.element);\n                this.finishRenderingSnapshot(renderer);\n            }\n            finally {\n                delete this.renderer;\n                this.resolveRenderPromise(undefined);\n                delete this.renderPromise;\n            }\n        }\n        else {\n            this.invalidate(renderer.reloadReason);\n        }\n    }\n    invalidate(reason) {\n        this.delegate.viewInvalidated(reason);\n    }\n    async prepareToRenderSnapshot(renderer) {\n        this.markAsPreview(renderer.isPreview);\n        await renderer.prepareToRender();\n    }\n    markAsPreview(isPreview) {\n        if (isPreview) {\n            this.element.setAttribute(\"data-turbo-preview\", \"\");\n        }\n        else {\n            this.element.removeAttribute(\"data-turbo-preview\");\n        }\n    }\n    async renderSnapshot(renderer) {\n        await renderer.render();\n    }\n    finishRenderingSnapshot(renderer) {\n        renderer.finishRendering();\n    }\n}\n\nclass FrameView extends View {\n    invalidate() {\n        this.element.innerHTML = \"\";\n    }\n    get snapshot() {\n        return new Snapshot(this.element);\n    }\n}\n\nclass LinkInterceptor {\n    constructor(delegate, element) {\n        this.clickBubbled = (event) => {\n            if (this.respondsToEventTarget(event.target)) {\n                this.clickEvent = event;\n            }\n            else {\n                delete this.clickEvent;\n            }\n        };\n        this.linkClicked = ((event) => {\n            if (this.clickEvent && this.respondsToEventTarget(event.target) && event.target instanceof Element) {\n                if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url, event.detail.originalEvent)) {\n                    this.clickEvent.preventDefault();\n                    event.preventDefault();\n                    this.delegate.linkClickIntercepted(event.target, event.detail.url, event.detail.originalEvent);\n                }\n            }\n            delete this.clickEvent;\n        });\n        this.willVisit = ((_event) => {\n            delete this.clickEvent;\n        });\n        this.delegate = delegate;\n        this.element = element;\n    }\n    start() {\n        this.element.addEventListener(\"click\", this.clickBubbled);\n        document.addEventListener(\"turbo:click\", this.linkClicked);\n        document.addEventListener(\"turbo:before-visit\", this.willVisit);\n    }\n    stop() {\n        this.element.removeEventListener(\"click\", this.clickBubbled);\n        document.removeEventListener(\"turbo:click\", this.linkClicked);\n        document.removeEventListener(\"turbo:before-visit\", this.willVisit);\n    }\n    respondsToEventTarget(target) {\n        const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null;\n        return element && element.closest(\"turbo-frame, html\") == this.element;\n    }\n}\n\nclass LinkClickObserver {\n    constructor(delegate, eventTarget) {\n        this.started = false;\n        this.clickCaptured = () => {\n            this.eventTarget.removeEventListener(\"click\", this.clickBubbled, false);\n            this.eventTarget.addEventListener(\"click\", this.clickBubbled, false);\n        };\n        this.clickBubbled = (event) => {\n            if (event instanceof MouseEvent && this.clickEventIsSignificant(event)) {\n                const target = (event.composedPath && event.composedPath()[0]) || event.target;\n                const link = this.findLinkFromClickTarget(target);\n                if (link && doesNotTargetIFrame(link)) {\n                    const location = this.getLocationForLink(link);\n                    if (this.delegate.willFollowLinkToLocation(link, location, event)) {\n                        event.preventDefault();\n                        this.delegate.followedLinkToLocation(link, location);\n                    }\n                }\n            }\n        };\n        this.delegate = delegate;\n        this.eventTarget = eventTarget;\n    }\n    start() {\n        if (!this.started) {\n            this.eventTarget.addEventListener(\"click\", this.clickCaptured, true);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.eventTarget.removeEventListener(\"click\", this.clickCaptured, true);\n            this.started = false;\n        }\n    }\n    clickEventIsSignificant(event) {\n        return !((event.target && event.target.isContentEditable) ||\n            event.defaultPrevented ||\n            event.which > 1 ||\n            event.altKey ||\n            event.ctrlKey ||\n            event.metaKey ||\n            event.shiftKey);\n    }\n    findLinkFromClickTarget(target) {\n        if (target instanceof Element) {\n            return target.closest(\"a[href]:not([target^=_]):not([download])\");\n        }\n    }\n    getLocationForLink(link) {\n        return expandURL(link.getAttribute(\"href\") || \"\");\n    }\n}\nfunction doesNotTargetIFrame(anchor) {\n    for (const element of document.getElementsByName(anchor.target)) {\n        if (element instanceof HTMLIFrameElement)\n            return false;\n    }\n    return true;\n}\n\nclass FormLinkClickObserver {\n    constructor(delegate, element) {\n        this.delegate = delegate;\n        this.linkInterceptor = new LinkClickObserver(this, element);\n    }\n    start() {\n        this.linkInterceptor.start();\n    }\n    stop() {\n        this.linkInterceptor.stop();\n    }\n    willFollowLinkToLocation(link, location, originalEvent) {\n        return (this.delegate.willSubmitFormLinkToLocation(link, location, originalEvent) &&\n            link.hasAttribute(\"data-turbo-method\"));\n    }\n    followedLinkToLocation(link, location) {\n        const action = location.href;\n        const form = document.createElement(\"form\");\n        form.setAttribute(\"data-turbo\", \"true\");\n        form.setAttribute(\"action\", action);\n        form.setAttribute(\"hidden\", \"\");\n        const method = link.getAttribute(\"data-turbo-method\");\n        if (method)\n            form.setAttribute(\"method\", method);\n        const turboFrame = link.getAttribute(\"data-turbo-frame\");\n        if (turboFrame)\n            form.setAttribute(\"data-turbo-frame\", turboFrame);\n        const turboAction = link.getAttribute(\"data-turbo-action\");\n        if (turboAction)\n            form.setAttribute(\"data-turbo-action\", turboAction);\n        const turboConfirm = link.getAttribute(\"data-turbo-confirm\");\n        if (turboConfirm)\n            form.setAttribute(\"data-turbo-confirm\", turboConfirm);\n        const turboStream = link.hasAttribute(\"data-turbo-stream\");\n        if (turboStream)\n            form.setAttribute(\"data-turbo-stream\", \"\");\n        this.delegate.submittedFormLinkToLocation(link, location, form);\n        document.body.appendChild(form);\n        form.addEventListener(\"turbo:submit-end\", () => form.remove(), { once: true });\n        requestAnimationFrame(() => form.requestSubmit());\n    }\n}\n\nclass Bardo {\n    constructor(delegate, permanentElementMap) {\n        this.delegate = delegate;\n        this.permanentElementMap = permanentElementMap;\n    }\n    static preservingPermanentElements(delegate, permanentElementMap, callback) {\n        const bardo = new this(delegate, permanentElementMap);\n        bardo.enter();\n        callback();\n        bardo.leave();\n    }\n    enter() {\n        for (const id in this.permanentElementMap) {\n            const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id];\n            this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);\n            this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);\n        }\n    }\n    leave() {\n        for (const id in this.permanentElementMap) {\n            const [currentPermanentElement] = this.permanentElementMap[id];\n            this.replaceCurrentPermanentElementWithClone(currentPermanentElement);\n            this.replacePlaceholderWithPermanentElement(currentPermanentElement);\n            this.delegate.leavingBardo(currentPermanentElement);\n        }\n    }\n    replaceNewPermanentElementWithPlaceholder(permanentElement) {\n        const placeholder = createPlaceholderForPermanentElement(permanentElement);\n        permanentElement.replaceWith(placeholder);\n    }\n    replaceCurrentPermanentElementWithClone(permanentElement) {\n        const clone = permanentElement.cloneNode(true);\n        permanentElement.replaceWith(clone);\n    }\n    replacePlaceholderWithPermanentElement(permanentElement) {\n        const placeholder = this.getPlaceholderById(permanentElement.id);\n        placeholder === null || placeholder === void 0 ? void 0 : placeholder.replaceWith(permanentElement);\n    }\n    getPlaceholderById(id) {\n        return this.placeholders.find((element) => element.content == id);\n    }\n    get placeholders() {\n        return [...document.querySelectorAll(\"meta[name=turbo-permanent-placeholder][content]\")];\n    }\n}\nfunction createPlaceholderForPermanentElement(permanentElement) {\n    const element = document.createElement(\"meta\");\n    element.setAttribute(\"name\", \"turbo-permanent-placeholder\");\n    element.setAttribute(\"content\", permanentElement.id);\n    return element;\n}\n\nclass Renderer {\n    constructor(currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {\n        this.activeElement = null;\n        this.currentSnapshot = currentSnapshot;\n        this.newSnapshot = newSnapshot;\n        this.isPreview = isPreview;\n        this.willRender = willRender;\n        this.renderElement = renderElement;\n        this.promise = new Promise((resolve, reject) => (this.resolvingFunctions = { resolve, reject }));\n    }\n    get shouldRender() {\n        return true;\n    }\n    get reloadReason() {\n        return;\n    }\n    prepareToRender() {\n        return;\n    }\n    finishRendering() {\n        if (this.resolvingFunctions) {\n            this.resolvingFunctions.resolve();\n            delete this.resolvingFunctions;\n        }\n    }\n    preservingPermanentElements(callback) {\n        Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);\n    }\n    focusFirstAutofocusableElement() {\n        const element = this.connectedSnapshot.firstAutofocusableElement;\n        if (elementIsFocusable(element)) {\n            element.focus();\n        }\n    }\n    enteringBardo(currentPermanentElement) {\n        if (this.activeElement)\n            return;\n        if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {\n            this.activeElement = this.currentSnapshot.activeElement;\n        }\n    }\n    leavingBardo(currentPermanentElement) {\n        if (currentPermanentElement.contains(this.activeElement) && this.activeElement instanceof HTMLElement) {\n            this.activeElement.focus();\n            this.activeElement = null;\n        }\n    }\n    get connectedSnapshot() {\n        return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot;\n    }\n    get currentElement() {\n        return this.currentSnapshot.element;\n    }\n    get newElement() {\n        return this.newSnapshot.element;\n    }\n    get permanentElementMap() {\n        return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot);\n    }\n}\nfunction elementIsFocusable(element) {\n    return element && typeof element.focus == \"function\";\n}\n\nclass FrameRenderer extends Renderer {\n    constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {\n        super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);\n        this.delegate = delegate;\n    }\n    static renderElement(currentElement, newElement) {\n        var _a;\n        const destinationRange = document.createRange();\n        destinationRange.selectNodeContents(currentElement);\n        destinationRange.deleteContents();\n        const frameElement = newElement;\n        const sourceRange = (_a = frameElement.ownerDocument) === null || _a === void 0 ? void 0 : _a.createRange();\n        if (sourceRange) {\n            sourceRange.selectNodeContents(frameElement);\n            currentElement.appendChild(sourceRange.extractContents());\n        }\n    }\n    get shouldRender() {\n        return true;\n    }\n    async render() {\n        await nextAnimationFrame();\n        this.preservingPermanentElements(() => {\n            this.loadFrameElement();\n        });\n        this.scrollFrameIntoView();\n        await nextAnimationFrame();\n        this.focusFirstAutofocusableElement();\n        await nextAnimationFrame();\n        this.activateScriptElements();\n    }\n    loadFrameElement() {\n        this.delegate.willRenderFrame(this.currentElement, this.newElement);\n        this.renderElement(this.currentElement, this.newElement);\n    }\n    scrollFrameIntoView() {\n        if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n            const element = this.currentElement.firstElementChild;\n            const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\");\n            const behavior = readScrollBehavior(this.currentElement.getAttribute(\"data-autoscroll-behavior\"), \"auto\");\n            if (element) {\n                element.scrollIntoView({ block, behavior });\n                return true;\n            }\n        }\n        return false;\n    }\n    activateScriptElements() {\n        for (const inertScriptElement of this.newScriptElements) {\n            const activatedScriptElement = activateScriptElement(inertScriptElement);\n            inertScriptElement.replaceWith(activatedScriptElement);\n        }\n    }\n    get newScriptElements() {\n        return this.currentElement.querySelectorAll(\"script\");\n    }\n}\nfunction readScrollLogicalPosition(value, defaultValue) {\n    if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n        return value;\n    }\n    else {\n        return defaultValue;\n    }\n}\nfunction readScrollBehavior(value, defaultValue) {\n    if (value == \"auto\" || value == \"smooth\") {\n        return value;\n    }\n    else {\n        return defaultValue;\n    }\n}\n\nclass ProgressBar {\n    constructor() {\n        this.hiding = false;\n        this.value = 0;\n        this.visible = false;\n        this.trickle = () => {\n            this.setValue(this.value + Math.random() / 100);\n        };\n        this.stylesheetElement = this.createStylesheetElement();\n        this.progressElement = this.createProgressElement();\n        this.installStylesheetElement();\n        this.setValue(0);\n    }\n    static get defaultCSS() {\n        return unindent `\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 2147483647;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this.installProgressElement();\n            this.startTrickling();\n        }\n    }\n    hide() {\n        if (this.visible && !this.hiding) {\n            this.hiding = true;\n            this.fadeProgressElement(() => {\n                this.uninstallProgressElement();\n                this.stopTrickling();\n                this.visible = false;\n                this.hiding = false;\n            });\n        }\n    }\n    setValue(value) {\n        this.value = value;\n        this.refresh();\n    }\n    installStylesheetElement() {\n        document.head.insertBefore(this.stylesheetElement, document.head.firstChild);\n    }\n    installProgressElement() {\n        this.progressElement.style.width = \"0\";\n        this.progressElement.style.opacity = \"1\";\n        document.documentElement.insertBefore(this.progressElement, document.body);\n        this.refresh();\n    }\n    fadeProgressElement(callback) {\n        this.progressElement.style.opacity = \"0\";\n        setTimeout(callback, ProgressBar.animationDuration * 1.5);\n    }\n    uninstallProgressElement() {\n        if (this.progressElement.parentNode) {\n            document.documentElement.removeChild(this.progressElement);\n        }\n    }\n    startTrickling() {\n        if (!this.trickleInterval) {\n            this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration);\n        }\n    }\n    stopTrickling() {\n        window.clearInterval(this.trickleInterval);\n        delete this.trickleInterval;\n    }\n    refresh() {\n        requestAnimationFrame(() => {\n            this.progressElement.style.width = `${10 + this.value * 90}%`;\n        });\n    }\n    createStylesheetElement() {\n        const element = document.createElement(\"style\");\n        element.type = \"text/css\";\n        element.textContent = ProgressBar.defaultCSS;\n        if (this.cspNonce) {\n            element.nonce = this.cspNonce;\n        }\n        return element;\n    }\n    createProgressElement() {\n        const element = document.createElement(\"div\");\n        element.className = \"turbo-progress-bar\";\n        return element;\n    }\n    get cspNonce() {\n        return getMetaContent(\"csp-nonce\");\n    }\n}\nProgressBar.animationDuration = 300;\n\nclass HeadSnapshot extends Snapshot {\n    constructor() {\n        super(...arguments);\n        this.detailsByOuterHTML = this.children\n            .filter((element) => !elementIsNoscript(element))\n            .map((element) => elementWithoutNonce(element))\n            .reduce((result, element) => {\n            const { outerHTML } = element;\n            const details = outerHTML in result\n                ? result[outerHTML]\n                : {\n                    type: elementType(element),\n                    tracked: elementIsTracked(element),\n                    elements: [],\n                };\n            return Object.assign(Object.assign({}, result), { [outerHTML]: Object.assign(Object.assign({}, details), { elements: [...details.elements, element] }) });\n        }, {});\n    }\n    get trackedElementSignature() {\n        return Object.keys(this.detailsByOuterHTML)\n            .filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked)\n            .join(\"\");\n    }\n    getScriptElementsNotInSnapshot(snapshot) {\n        return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot);\n    }\n    getStylesheetElementsNotInSnapshot(snapshot) {\n        return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot);\n    }\n    getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {\n        return Object.keys(this.detailsByOuterHTML)\n            .filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML))\n            .map((outerHTML) => this.detailsByOuterHTML[outerHTML])\n            .filter(({ type }) => type == matchedType)\n            .map(({ elements: [element] }) => element);\n    }\n    get provisionalElements() {\n        return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n            const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];\n            if (type == null && !tracked) {\n                return [...result, ...elements];\n            }\n            else if (elements.length > 1) {\n                return [...result, ...elements.slice(1)];\n            }\n            else {\n                return result;\n            }\n        }, []);\n    }\n    getMetaValue(name) {\n        const element = this.findMetaElementByName(name);\n        return element ? element.getAttribute(\"content\") : null;\n    }\n    findMetaElementByName(name) {\n        return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n            const { elements: [element], } = this.detailsByOuterHTML[outerHTML];\n            return elementIsMetaElementWithName(element, name) ? element : result;\n        }, undefined);\n    }\n}\nfunction elementType(element) {\n    if (elementIsScript(element)) {\n        return \"script\";\n    }\n    else if (elementIsStylesheet(element)) {\n        return \"stylesheet\";\n    }\n}\nfunction elementIsTracked(element) {\n    return element.getAttribute(\"data-turbo-track\") == \"reload\";\n}\nfunction elementIsScript(element) {\n    const tagName = element.localName;\n    return tagName == \"script\";\n}\nfunction elementIsNoscript(element) {\n    const tagName = element.localName;\n    return tagName == \"noscript\";\n}\nfunction elementIsStylesheet(element) {\n    const tagName = element.localName;\n    return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\");\n}\nfunction elementIsMetaElementWithName(element, name) {\n    const tagName = element.localName;\n    return tagName == \"meta\" && element.getAttribute(\"name\") == name;\n}\nfunction elementWithoutNonce(element) {\n    if (element.hasAttribute(\"nonce\")) {\n        element.setAttribute(\"nonce\", \"\");\n    }\n    return element;\n}\n\nclass PageSnapshot extends Snapshot {\n    constructor(element, headSnapshot) {\n        super(element);\n        this.headSnapshot = headSnapshot;\n    }\n    static fromHTMLString(html = \"\") {\n        return this.fromDocument(parseHTMLDocument(html));\n    }\n    static fromElement(element) {\n        return this.fromDocument(element.ownerDocument);\n    }\n    static fromDocument({ head, body }) {\n        return new this(body, new HeadSnapshot(head));\n    }\n    clone() {\n        const clonedElement = this.element.cloneNode(true);\n        const selectElements = this.element.querySelectorAll(\"select\");\n        const clonedSelectElements = clonedElement.querySelectorAll(\"select\");\n        for (const [index, source] of selectElements.entries()) {\n            const clone = clonedSelectElements[index];\n            for (const option of clone.selectedOptions)\n                option.selected = false;\n            for (const option of source.selectedOptions)\n                clone.options[option.index].selected = true;\n        }\n        for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type=\"password\"]')) {\n            clonedPasswordInput.value = \"\";\n        }\n        return new PageSnapshot(clonedElement, this.headSnapshot);\n    }\n    get headElement() {\n        return this.headSnapshot.element;\n    }\n    get rootLocation() {\n        var _a;\n        const root = (_a = this.getSetting(\"root\")) !== null && _a !== void 0 ? _a : \"/\";\n        return expandURL(root);\n    }\n    get cacheControlValue() {\n        return this.getSetting(\"cache-control\");\n    }\n    get isPreviewable() {\n        return this.cacheControlValue != \"no-preview\";\n    }\n    get isCacheable() {\n        return this.cacheControlValue != \"no-cache\";\n    }\n    get isVisitable() {\n        return this.getSetting(\"visit-control\") != \"reload\";\n    }\n    getSetting(name) {\n        return this.headSnapshot.getMetaValue(`turbo-${name}`);\n    }\n}\n\nvar TimingMetric;\n(function (TimingMetric) {\n    TimingMetric[\"visitStart\"] = \"visitStart\";\n    TimingMetric[\"requestStart\"] = \"requestStart\";\n    TimingMetric[\"requestEnd\"] = \"requestEnd\";\n    TimingMetric[\"visitEnd\"] = \"visitEnd\";\n})(TimingMetric || (TimingMetric = {}));\nvar VisitState;\n(function (VisitState) {\n    VisitState[\"initialized\"] = \"initialized\";\n    VisitState[\"started\"] = \"started\";\n    VisitState[\"canceled\"] = \"canceled\";\n    VisitState[\"failed\"] = \"failed\";\n    VisitState[\"completed\"] = \"completed\";\n})(VisitState || (VisitState = {}));\nconst defaultOptions = {\n    action: \"advance\",\n    historyChanged: false,\n    visitCachedSnapshot: () => { },\n    willRender: true,\n    updateHistory: true,\n    shouldCacheSnapshot: true,\n    acceptsStreamResponse: false,\n};\nvar SystemStatusCode;\n(function (SystemStatusCode) {\n    SystemStatusCode[SystemStatusCode[\"networkFailure\"] = 0] = \"networkFailure\";\n    SystemStatusCode[SystemStatusCode[\"timeoutFailure\"] = -1] = \"timeoutFailure\";\n    SystemStatusCode[SystemStatusCode[\"contentTypeMismatch\"] = -2] = \"contentTypeMismatch\";\n})(SystemStatusCode || (SystemStatusCode = {}));\nclass Visit {\n    constructor(delegate, location, restorationIdentifier, options = {}) {\n        this.identifier = uuid();\n        this.timingMetrics = {};\n        this.followedRedirect = false;\n        this.historyChanged = false;\n        this.scrolled = false;\n        this.shouldCacheSnapshot = true;\n        this.acceptsStreamResponse = false;\n        this.snapshotCached = false;\n        this.state = VisitState.initialized;\n        this.delegate = delegate;\n        this.location = location;\n        this.restorationIdentifier = restorationIdentifier || uuid();\n        const { action, historyChanged, referrer, snapshot, snapshotHTML, response, visitCachedSnapshot, willRender, updateHistory, shouldCacheSnapshot, acceptsStreamResponse, } = Object.assign(Object.assign({}, defaultOptions), options);\n        this.action = action;\n        this.historyChanged = historyChanged;\n        this.referrer = referrer;\n        this.snapshot = snapshot;\n        this.snapshotHTML = snapshotHTML;\n        this.response = response;\n        this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action);\n        this.visitCachedSnapshot = visitCachedSnapshot;\n        this.willRender = willRender;\n        this.updateHistory = updateHistory;\n        this.scrolled = !willRender;\n        this.shouldCacheSnapshot = shouldCacheSnapshot;\n        this.acceptsStreamResponse = acceptsStreamResponse;\n    }\n    get adapter() {\n        return this.delegate.adapter;\n    }\n    get view() {\n        return this.delegate.view;\n    }\n    get history() {\n        return this.delegate.history;\n    }\n    get restorationData() {\n        return this.history.getRestorationDataForIdentifier(this.restorationIdentifier);\n    }\n    get silent() {\n        return this.isSamePage;\n    }\n    start() {\n        if (this.state == VisitState.initialized) {\n            this.recordTimingMetric(TimingMetric.visitStart);\n            this.state = VisitState.started;\n            this.adapter.visitStarted(this);\n            this.delegate.visitStarted(this);\n        }\n    }\n    cancel() {\n        if (this.state == VisitState.started) {\n            if (this.request) {\n                this.request.cancel();\n            }\n            this.cancelRender();\n            this.state = VisitState.canceled;\n        }\n    }\n    complete() {\n        if (this.state == VisitState.started) {\n            this.recordTimingMetric(TimingMetric.visitEnd);\n            this.state = VisitState.completed;\n            this.followRedirect();\n            if (!this.followedRedirect) {\n                this.adapter.visitCompleted(this);\n                this.delegate.visitCompleted(this);\n            }\n        }\n    }\n    fail() {\n        if (this.state == VisitState.started) {\n            this.state = VisitState.failed;\n            this.adapter.visitFailed(this);\n        }\n    }\n    changeHistory() {\n        var _a;\n        if (!this.historyChanged && this.updateHistory) {\n            const actionForHistory = this.location.href === ((_a = this.referrer) === null || _a === void 0 ? void 0 : _a.href) ? \"replace\" : this.action;\n            const method = getHistoryMethodForAction(actionForHistory);\n            this.history.update(method, this.location, this.restorationIdentifier);\n            this.historyChanged = true;\n        }\n    }\n    issueRequest() {\n        if (this.hasPreloadedResponse()) {\n            this.simulateRequest();\n        }\n        else if (this.shouldIssueRequest() && !this.request) {\n            this.request = new FetchRequest(this, FetchMethod.get, this.location);\n            this.request.perform();\n        }\n    }\n    simulateRequest() {\n        if (this.response) {\n            this.startRequest();\n            this.recordResponse();\n            this.finishRequest();\n        }\n    }\n    startRequest() {\n        this.recordTimingMetric(TimingMetric.requestStart);\n        this.adapter.visitRequestStarted(this);\n    }\n    recordResponse(response = this.response) {\n        this.response = response;\n        if (response) {\n            const { statusCode } = response;\n            if (isSuccessful(statusCode)) {\n                this.adapter.visitRequestCompleted(this);\n            }\n            else {\n                this.adapter.visitRequestFailedWithStatusCode(this, statusCode);\n            }\n        }\n    }\n    finishRequest() {\n        this.recordTimingMetric(TimingMetric.requestEnd);\n        this.adapter.visitRequestFinished(this);\n    }\n    loadResponse() {\n        if (this.response) {\n            const { statusCode, responseHTML } = this.response;\n            this.render(async () => {\n                if (this.shouldCacheSnapshot)\n                    this.cacheSnapshot();\n                if (this.view.renderPromise)\n                    await this.view.renderPromise;\n                if (isSuccessful(statusCode) && responseHTML != null) {\n                    await this.view.renderPage(PageSnapshot.fromHTMLString(responseHTML), false, this.willRender, this);\n                    this.performScroll();\n                    this.adapter.visitRendered(this);\n                    this.complete();\n                }\n                else {\n                    await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);\n                    this.adapter.visitRendered(this);\n                    this.fail();\n                }\n            });\n        }\n    }\n    getCachedSnapshot() {\n        const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();\n        if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n            if (this.action == \"restore\" || snapshot.isPreviewable) {\n                return snapshot;\n            }\n        }\n    }\n    getPreloadedSnapshot() {\n        if (this.snapshotHTML) {\n            return PageSnapshot.fromHTMLString(this.snapshotHTML);\n        }\n    }\n    hasCachedSnapshot() {\n        return this.getCachedSnapshot() != null;\n    }\n    loadCachedSnapshot() {\n        const snapshot = this.getCachedSnapshot();\n        if (snapshot) {\n            const isPreview = this.shouldIssueRequest();\n            this.render(async () => {\n                this.cacheSnapshot();\n                if (this.isSamePage) {\n                    this.adapter.visitRendered(this);\n                }\n                else {\n                    if (this.view.renderPromise)\n                        await this.view.renderPromise;\n                    await this.view.renderPage(snapshot, isPreview, this.willRender, this);\n                    this.performScroll();\n                    this.adapter.visitRendered(this);\n                    if (!isPreview) {\n                        this.complete();\n                    }\n                }\n            });\n        }\n    }\n    followRedirect() {\n        var _a;\n        if (this.redirectedToLocation && !this.followedRedirect && ((_a = this.response) === null || _a === void 0 ? void 0 : _a.redirected)) {\n            this.adapter.visitProposedToLocation(this.redirectedToLocation, {\n                action: \"replace\",\n                response: this.response,\n            });\n            this.followedRedirect = true;\n        }\n    }\n    goToSamePageAnchor() {\n        if (this.isSamePage) {\n            this.render(async () => {\n                this.cacheSnapshot();\n                this.performScroll();\n                this.changeHistory();\n                this.adapter.visitRendered(this);\n            });\n        }\n    }\n    prepareHeadersForRequest(headers, request) {\n        if (this.acceptsStreamResponse) {\n            request.acceptResponseType(StreamMessage.contentType);\n        }\n    }\n    requestStarted() {\n        this.startRequest();\n    }\n    requestPreventedHandlingResponse(_request, _response) { }\n    async requestSucceededWithResponse(request, response) {\n        const responseHTML = await response.responseHTML;\n        const { redirected, statusCode } = response;\n        if (responseHTML == undefined) {\n            this.recordResponse({\n                statusCode: SystemStatusCode.contentTypeMismatch,\n                redirected,\n            });\n        }\n        else {\n            this.redirectedToLocation = response.redirected ? response.location : undefined;\n            this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n        }\n    }\n    async requestFailedWithResponse(request, response) {\n        const responseHTML = await response.responseHTML;\n        const { redirected, statusCode } = response;\n        if (responseHTML == undefined) {\n            this.recordResponse({\n                statusCode: SystemStatusCode.contentTypeMismatch,\n                redirected,\n            });\n        }\n        else {\n            this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n        }\n    }\n    requestErrored(_request, _error) {\n        this.recordResponse({\n            statusCode: SystemStatusCode.networkFailure,\n            redirected: false,\n        });\n    }\n    requestFinished() {\n        this.finishRequest();\n    }\n    performScroll() {\n        if (!this.scrolled && !this.view.forceReloaded) {\n            if (this.action == \"restore\") {\n                this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();\n            }\n            else {\n                this.scrollToAnchor() || this.view.scrollToTop();\n            }\n            if (this.isSamePage) {\n                this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location);\n            }\n            this.scrolled = true;\n        }\n    }\n    scrollToRestoredPosition() {\n        const { scrollPosition } = this.restorationData;\n        if (scrollPosition) {\n            this.view.scrollToPosition(scrollPosition);\n            return true;\n        }\n    }\n    scrollToAnchor() {\n        const anchor = getAnchor(this.location);\n        if (anchor != null) {\n            this.view.scrollToAnchor(anchor);\n            return true;\n        }\n    }\n    recordTimingMetric(metric) {\n        this.timingMetrics[metric] = new Date().getTime();\n    }\n    getTimingMetrics() {\n        return Object.assign({}, this.timingMetrics);\n    }\n    getHistoryMethodForAction(action) {\n        switch (action) {\n            case \"replace\":\n                return history.replaceState;\n            case \"advance\":\n            case \"restore\":\n                return history.pushState;\n        }\n    }\n    hasPreloadedResponse() {\n        return typeof this.response == \"object\";\n    }\n    shouldIssueRequest() {\n        if (this.isSamePage) {\n            return false;\n        }\n        else if (this.action == \"restore\") {\n            return !this.hasCachedSnapshot();\n        }\n        else {\n            return this.willRender;\n        }\n    }\n    cacheSnapshot() {\n        if (!this.snapshotCached) {\n            this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));\n            this.snapshotCached = true;\n        }\n    }\n    async render(callback) {\n        this.cancelRender();\n        await new Promise((resolve) => {\n            this.frame = requestAnimationFrame(() => resolve());\n        });\n        await callback();\n        delete this.frame;\n    }\n    cancelRender() {\n        if (this.frame) {\n            cancelAnimationFrame(this.frame);\n            delete this.frame;\n        }\n    }\n}\nfunction isSuccessful(statusCode) {\n    return statusCode >= 200 && statusCode < 300;\n}\n\nclass BrowserAdapter {\n    constructor(session) {\n        this.progressBar = new ProgressBar();\n        this.showProgressBar = () => {\n            this.progressBar.show();\n        };\n        this.session = session;\n    }\n    visitProposedToLocation(location, options) {\n        this.navigator.startVisit(location, (options === null || options === void 0 ? void 0 : options.restorationIdentifier) || uuid(), options);\n    }\n    visitStarted(visit) {\n        this.location = visit.location;\n        visit.loadCachedSnapshot();\n        visit.issueRequest();\n        visit.goToSamePageAnchor();\n    }\n    visitRequestStarted(visit) {\n        this.progressBar.setValue(0);\n        if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n            this.showVisitProgressBarAfterDelay();\n        }\n        else {\n            this.showProgressBar();\n        }\n    }\n    visitRequestCompleted(visit) {\n        visit.loadResponse();\n    }\n    visitRequestFailedWithStatusCode(visit, statusCode) {\n        switch (statusCode) {\n            case SystemStatusCode.networkFailure:\n            case SystemStatusCode.timeoutFailure:\n            case SystemStatusCode.contentTypeMismatch:\n                return this.reload({\n                    reason: \"request_failed\",\n                    context: {\n                        statusCode,\n                    },\n                });\n            default:\n                return visit.loadResponse();\n        }\n    }\n    visitRequestFinished(_visit) {\n        this.progressBar.setValue(1);\n        this.hideVisitProgressBar();\n    }\n    visitCompleted(_visit) { }\n    pageInvalidated(reason) {\n        this.reload(reason);\n    }\n    visitFailed(_visit) { }\n    visitRendered(_visit) { }\n    formSubmissionStarted(_formSubmission) {\n        this.progressBar.setValue(0);\n        this.showFormProgressBarAfterDelay();\n    }\n    formSubmissionFinished(_formSubmission) {\n        this.progressBar.setValue(1);\n        this.hideFormProgressBar();\n    }\n    showVisitProgressBarAfterDelay() {\n        this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n    }\n    hideVisitProgressBar() {\n        this.progressBar.hide();\n        if (this.visitProgressBarTimeout != null) {\n            window.clearTimeout(this.visitProgressBarTimeout);\n            delete this.visitProgressBarTimeout;\n        }\n    }\n    showFormProgressBarAfterDelay() {\n        if (this.formProgressBarTimeout == null) {\n            this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n        }\n    }\n    hideFormProgressBar() {\n        this.progressBar.hide();\n        if (this.formProgressBarTimeout != null) {\n            window.clearTimeout(this.formProgressBarTimeout);\n            delete this.formProgressBarTimeout;\n        }\n    }\n    reload(reason) {\n        var _a;\n        dispatch(\"turbo:reload\", { detail: reason });\n        window.location.href = ((_a = this.location) === null || _a === void 0 ? void 0 : _a.toString()) || window.location.href;\n    }\n    get navigator() {\n        return this.session.navigator;\n    }\n}\n\nclass CacheObserver {\n    constructor() {\n        this.started = false;\n        this.removeStaleElements = ((_event) => {\n            const staleElements = [...document.querySelectorAll('[data-turbo-cache=\"false\"]')];\n            for (const element of staleElements) {\n                element.remove();\n            }\n        });\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            addEventListener(\"turbo:before-cache\", this.removeStaleElements, false);\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            removeEventListener(\"turbo:before-cache\", this.removeStaleElements, false);\n        }\n    }\n}\n\nclass FrameRedirector {\n    constructor(session, element) {\n        this.session = session;\n        this.element = element;\n        this.linkInterceptor = new LinkInterceptor(this, element);\n        this.formSubmitObserver = new FormSubmitObserver(this, element);\n    }\n    start() {\n        this.linkInterceptor.start();\n        this.formSubmitObserver.start();\n    }\n    stop() {\n        this.linkInterceptor.stop();\n        this.formSubmitObserver.stop();\n    }\n    shouldInterceptLinkClick(element, _location, _event) {\n        return this.shouldRedirect(element);\n    }\n    linkClickIntercepted(element, url, event) {\n        const frame = this.findFrameElement(element);\n        if (frame) {\n            frame.delegate.linkClickIntercepted(element, url, event);\n        }\n    }\n    willSubmitForm(element, submitter) {\n        return (element.closest(\"turbo-frame\") == null &&\n            this.shouldSubmit(element, submitter) &&\n            this.shouldRedirect(element, submitter));\n    }\n    formSubmitted(element, submitter) {\n        const frame = this.findFrameElement(element, submitter);\n        if (frame) {\n            frame.delegate.formSubmitted(element, submitter);\n        }\n    }\n    shouldSubmit(form, submitter) {\n        var _a;\n        const action = getAction(form, submitter);\n        const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n        const rootLocation = expandURL((_a = meta === null || meta === void 0 ? void 0 : meta.content) !== null && _a !== void 0 ? _a : \"/\");\n        return this.shouldRedirect(form, submitter) && locationIsVisitable(action, rootLocation);\n    }\n    shouldRedirect(element, submitter) {\n        const isNavigatable = element instanceof HTMLFormElement\n            ? this.session.submissionIsNavigatable(element, submitter)\n            : this.session.elementIsNavigatable(element);\n        if (isNavigatable) {\n            const frame = this.findFrameElement(element, submitter);\n            return frame ? frame != element.closest(\"turbo-frame\") : false;\n        }\n        else {\n            return false;\n        }\n    }\n    findFrameElement(element, submitter) {\n        const id = (submitter === null || submitter === void 0 ? void 0 : submitter.getAttribute(\"data-turbo-frame\")) || element.getAttribute(\"data-turbo-frame\");\n        if (id && id != \"_top\") {\n            const frame = this.element.querySelector(`#${id}:not([disabled])`);\n            if (frame instanceof FrameElement) {\n                return frame;\n            }\n        }\n    }\n}\n\nclass History {\n    constructor(delegate) {\n        this.restorationIdentifier = uuid();\n        this.restorationData = {};\n        this.started = false;\n        this.pageLoaded = false;\n        this.onPopState = (event) => {\n            if (this.shouldHandlePopState()) {\n                const { turbo } = event.state || {};\n                if (turbo) {\n                    this.location = new URL(window.location.href);\n                    const { restorationIdentifier } = turbo;\n                    this.restorationIdentifier = restorationIdentifier;\n                    this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location, restorationIdentifier);\n                }\n            }\n        };\n        this.onPageLoad = async (_event) => {\n            await nextMicrotask();\n            this.pageLoaded = true;\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            addEventListener(\"popstate\", this.onPopState, false);\n            addEventListener(\"load\", this.onPageLoad, false);\n            this.started = true;\n            this.replace(new URL(window.location.href));\n        }\n    }\n    stop() {\n        if (this.started) {\n            removeEventListener(\"popstate\", this.onPopState, false);\n            removeEventListener(\"load\", this.onPageLoad, false);\n            this.started = false;\n        }\n    }\n    push(location, restorationIdentifier) {\n        this.update(history.pushState, location, restorationIdentifier);\n    }\n    replace(location, restorationIdentifier) {\n        this.update(history.replaceState, location, restorationIdentifier);\n    }\n    update(method, location, restorationIdentifier = uuid()) {\n        const state = { turbo: { restorationIdentifier } };\n        method.call(history, state, \"\", location.href);\n        this.location = location;\n        this.restorationIdentifier = restorationIdentifier;\n    }\n    getRestorationDataForIdentifier(restorationIdentifier) {\n        return this.restorationData[restorationIdentifier] || {};\n    }\n    updateRestorationData(additionalData) {\n        const { restorationIdentifier } = this;\n        const restorationData = this.restorationData[restorationIdentifier];\n        this.restorationData[restorationIdentifier] = Object.assign(Object.assign({}, restorationData), additionalData);\n    }\n    assumeControlOfScrollRestoration() {\n        var _a;\n        if (!this.previousScrollRestoration) {\n            this.previousScrollRestoration = (_a = history.scrollRestoration) !== null && _a !== void 0 ? _a : \"auto\";\n            history.scrollRestoration = \"manual\";\n        }\n    }\n    relinquishControlOfScrollRestoration() {\n        if (this.previousScrollRestoration) {\n            history.scrollRestoration = this.previousScrollRestoration;\n            delete this.previousScrollRestoration;\n        }\n    }\n    shouldHandlePopState() {\n        return this.pageIsLoaded();\n    }\n    pageIsLoaded() {\n        return this.pageLoaded || document.readyState == \"complete\";\n    }\n}\n\nclass Navigator {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    proposeVisit(location, options = {}) {\n        if (this.delegate.allowsVisitingLocationWithAction(location, options.action)) {\n            if (locationIsVisitable(location, this.view.snapshot.rootLocation)) {\n                this.delegate.visitProposedToLocation(location, options);\n            }\n            else {\n                window.location.href = location.toString();\n            }\n        }\n    }\n    startVisit(locatable, restorationIdentifier, options = {}) {\n        this.stop();\n        this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, Object.assign({ referrer: this.location }, options));\n        this.currentVisit.start();\n    }\n    submitForm(form, submitter) {\n        this.stop();\n        this.formSubmission = new FormSubmission(this, form, submitter, true);\n        this.formSubmission.start();\n    }\n    stop() {\n        if (this.formSubmission) {\n            this.formSubmission.stop();\n            delete this.formSubmission;\n        }\n        if (this.currentVisit) {\n            this.currentVisit.cancel();\n            delete this.currentVisit;\n        }\n    }\n    get adapter() {\n        return this.delegate.adapter;\n    }\n    get view() {\n        return this.delegate.view;\n    }\n    get history() {\n        return this.delegate.history;\n    }\n    formSubmissionStarted(formSubmission) {\n        if (typeof this.adapter.formSubmissionStarted === \"function\") {\n            this.adapter.formSubmissionStarted(formSubmission);\n        }\n    }\n    async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {\n        if (formSubmission == this.formSubmission) {\n            const responseHTML = await fetchResponse.responseHTML;\n            if (responseHTML) {\n                const shouldCacheSnapshot = formSubmission.method == FetchMethod.get;\n                if (!shouldCacheSnapshot) {\n                    this.view.clearSnapshotCache();\n                }\n                const { statusCode, redirected } = fetchResponse;\n                const action = this.getActionForFormSubmission(formSubmission);\n                const visitOptions = {\n                    action,\n                    shouldCacheSnapshot,\n                    response: { statusCode, responseHTML, redirected },\n                };\n                this.proposeVisit(fetchResponse.location, visitOptions);\n            }\n        }\n    }\n    async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n        const responseHTML = await fetchResponse.responseHTML;\n        if (responseHTML) {\n            const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n            if (fetchResponse.serverError) {\n                await this.view.renderError(snapshot, this.currentVisit);\n            }\n            else {\n                await this.view.renderPage(snapshot, false, true, this.currentVisit);\n            }\n            this.view.scrollToTop();\n            this.view.clearSnapshotCache();\n        }\n    }\n    formSubmissionErrored(formSubmission, error) {\n        console.error(error);\n    }\n    formSubmissionFinished(formSubmission) {\n        if (typeof this.adapter.formSubmissionFinished === \"function\") {\n            this.adapter.formSubmissionFinished(formSubmission);\n        }\n    }\n    visitStarted(visit) {\n        this.delegate.visitStarted(visit);\n    }\n    visitCompleted(visit) {\n        this.delegate.visitCompleted(visit);\n    }\n    locationWithActionIsSamePage(location, action) {\n        const anchor = getAnchor(location);\n        const currentAnchor = getAnchor(this.view.lastRenderedLocation);\n        const isRestorationToTop = action === \"restore\" && typeof anchor === \"undefined\";\n        return (action !== \"replace\" &&\n            getRequestURL(location) === getRequestURL(this.view.lastRenderedLocation) &&\n            (isRestorationToTop || (anchor != null && anchor !== currentAnchor)));\n    }\n    visitScrolledToSamePageLocation(oldURL, newURL) {\n        this.delegate.visitScrolledToSamePageLocation(oldURL, newURL);\n    }\n    get location() {\n        return this.history.location;\n    }\n    get restorationIdentifier() {\n        return this.history.restorationIdentifier;\n    }\n    getActionForFormSubmission(formSubmission) {\n        const { formElement, submitter } = formSubmission;\n        const action = getAttribute(\"data-turbo-action\", submitter, formElement);\n        return isAction(action) ? action : \"advance\";\n    }\n}\n\nvar PageStage;\n(function (PageStage) {\n    PageStage[PageStage[\"initial\"] = 0] = \"initial\";\n    PageStage[PageStage[\"loading\"] = 1] = \"loading\";\n    PageStage[PageStage[\"interactive\"] = 2] = \"interactive\";\n    PageStage[PageStage[\"complete\"] = 3] = \"complete\";\n})(PageStage || (PageStage = {}));\nclass PageObserver {\n    constructor(delegate) {\n        this.stage = PageStage.initial;\n        this.started = false;\n        this.interpretReadyState = () => {\n            const { readyState } = this;\n            if (readyState == \"interactive\") {\n                this.pageIsInteractive();\n            }\n            else if (readyState == \"complete\") {\n                this.pageIsComplete();\n            }\n        };\n        this.pageWillUnload = () => {\n            this.delegate.pageWillUnload();\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            if (this.stage == PageStage.initial) {\n                this.stage = PageStage.loading;\n            }\n            document.addEventListener(\"readystatechange\", this.interpretReadyState, false);\n            addEventListener(\"pagehide\", this.pageWillUnload, false);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            document.removeEventListener(\"readystatechange\", this.interpretReadyState, false);\n            removeEventListener(\"pagehide\", this.pageWillUnload, false);\n            this.started = false;\n        }\n    }\n    pageIsInteractive() {\n        if (this.stage == PageStage.loading) {\n            this.stage = PageStage.interactive;\n            this.delegate.pageBecameInteractive();\n        }\n    }\n    pageIsComplete() {\n        this.pageIsInteractive();\n        if (this.stage == PageStage.interactive) {\n            this.stage = PageStage.complete;\n            this.delegate.pageLoaded();\n        }\n    }\n    get readyState() {\n        return document.readyState;\n    }\n}\n\nclass ScrollObserver {\n    constructor(delegate) {\n        this.started = false;\n        this.onScroll = () => {\n            this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            addEventListener(\"scroll\", this.onScroll, false);\n            this.onScroll();\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            removeEventListener(\"scroll\", this.onScroll, false);\n            this.started = false;\n        }\n    }\n    updatePosition(position) {\n        this.delegate.scrollPositionChanged(position);\n    }\n}\n\nclass StreamMessageRenderer {\n    render({ fragment }) {\n        Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => document.documentElement.appendChild(fragment));\n    }\n    enteringBardo(currentPermanentElement, newPermanentElement) {\n        newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));\n    }\n    leavingBardo() { }\n}\nfunction getPermanentElementMapForFragment(fragment) {\n    const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);\n    const permanentElementMap = {};\n    for (const permanentElementInDocument of permanentElementsInDocument) {\n        const { id } = permanentElementInDocument;\n        for (const streamElement of fragment.querySelectorAll(\"turbo-stream\")) {\n            const elementInStream = getPermanentElementById(streamElement.templateElement.content, id);\n            if (elementInStream) {\n                permanentElementMap[id] = [permanentElementInDocument, elementInStream];\n            }\n        }\n    }\n    return permanentElementMap;\n}\n\nclass StreamObserver {\n    constructor(delegate) {\n        this.sources = new Set();\n        this.started = false;\n        this.inspectFetchResponse = ((event) => {\n            const response = fetchResponseFromEvent(event);\n            if (response && fetchResponseIsStream(response)) {\n                event.preventDefault();\n                this.receiveMessageResponse(response);\n            }\n        });\n        this.receiveMessageEvent = (event) => {\n            if (this.started && typeof event.data == \"string\") {\n                this.receiveMessageHTML(event.data);\n            }\n        };\n        this.delegate = delegate;\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n        }\n    }\n    connectStreamSource(source) {\n        if (!this.streamSourceIsConnected(source)) {\n            this.sources.add(source);\n            source.addEventListener(\"message\", this.receiveMessageEvent, false);\n        }\n    }\n    disconnectStreamSource(source) {\n        if (this.streamSourceIsConnected(source)) {\n            this.sources.delete(source);\n            source.removeEventListener(\"message\", this.receiveMessageEvent, false);\n        }\n    }\n    streamSourceIsConnected(source) {\n        return this.sources.has(source);\n    }\n    async receiveMessageResponse(response) {\n        const html = await response.responseHTML;\n        if (html) {\n            this.receiveMessageHTML(html);\n        }\n    }\n    receiveMessageHTML(html) {\n        this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));\n    }\n}\nfunction fetchResponseFromEvent(event) {\n    var _a;\n    const fetchResponse = (_a = event.detail) === null || _a === void 0 ? void 0 : _a.fetchResponse;\n    if (fetchResponse instanceof FetchResponse) {\n        return fetchResponse;\n    }\n}\nfunction fetchResponseIsStream(response) {\n    var _a;\n    const contentType = (_a = response.contentType) !== null && _a !== void 0 ? _a : \"\";\n    return contentType.startsWith(StreamMessage.contentType);\n}\n\nclass ErrorRenderer extends Renderer {\n    static renderElement(currentElement, newElement) {\n        const { documentElement, body } = document;\n        documentElement.replaceChild(newElement, body);\n    }\n    async render() {\n        this.replaceHeadAndBody();\n        this.activateScriptElements();\n    }\n    replaceHeadAndBody() {\n        const { documentElement, head } = document;\n        documentElement.replaceChild(this.newHead, head);\n        this.renderElement(this.currentElement, this.newElement);\n    }\n    activateScriptElements() {\n        for (const replaceableElement of this.scriptElements) {\n            const parentNode = replaceableElement.parentNode;\n            if (parentNode) {\n                const element = activateScriptElement(replaceableElement);\n                parentNode.replaceChild(element, replaceableElement);\n            }\n        }\n    }\n    get newHead() {\n        return this.newSnapshot.headSnapshot.element;\n    }\n    get scriptElements() {\n        return document.documentElement.querySelectorAll(\"script\");\n    }\n}\n\nclass PageRenderer extends Renderer {\n    static renderElement(currentElement, newElement) {\n        if (document.body && newElement instanceof HTMLBodyElement) {\n            document.body.replaceWith(newElement);\n        }\n        else {\n            document.documentElement.appendChild(newElement);\n        }\n    }\n    get shouldRender() {\n        return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical;\n    }\n    get reloadReason() {\n        if (!this.newSnapshot.isVisitable) {\n            return {\n                reason: \"turbo_visit_control_is_reload\",\n            };\n        }\n        if (!this.trackedElementsAreIdentical) {\n            return {\n                reason: \"tracked_element_mismatch\",\n            };\n        }\n    }\n    async prepareToRender() {\n        await this.mergeHead();\n    }\n    async render() {\n        if (this.willRender) {\n            this.replaceBody();\n        }\n    }\n    finishRendering() {\n        super.finishRendering();\n        if (!this.isPreview) {\n            this.focusFirstAutofocusableElement();\n        }\n    }\n    get currentHeadSnapshot() {\n        return this.currentSnapshot.headSnapshot;\n    }\n    get newHeadSnapshot() {\n        return this.newSnapshot.headSnapshot;\n    }\n    get newElement() {\n        return this.newSnapshot.element;\n    }\n    async mergeHead() {\n        const newStylesheetElements = this.copyNewHeadStylesheetElements();\n        this.copyNewHeadScriptElements();\n        this.removeCurrentHeadProvisionalElements();\n        this.copyNewHeadProvisionalElements();\n        await newStylesheetElements;\n    }\n    replaceBody() {\n        this.preservingPermanentElements(() => {\n            this.activateNewBody();\n            this.assignNewBody();\n        });\n    }\n    get trackedElementsAreIdentical() {\n        return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature;\n    }\n    async copyNewHeadStylesheetElements() {\n        const loadingElements = [];\n        for (const element of this.newHeadStylesheetElements) {\n            loadingElements.push(waitForLoad(element));\n            document.head.appendChild(element);\n        }\n        await Promise.all(loadingElements);\n    }\n    copyNewHeadScriptElements() {\n        for (const element of this.newHeadScriptElements) {\n            document.head.appendChild(activateScriptElement(element));\n        }\n    }\n    removeCurrentHeadProvisionalElements() {\n        for (const element of this.currentHeadProvisionalElements) {\n            document.head.removeChild(element);\n        }\n    }\n    copyNewHeadProvisionalElements() {\n        for (const element of this.newHeadProvisionalElements) {\n            document.head.appendChild(element);\n        }\n    }\n    activateNewBody() {\n        document.adoptNode(this.newElement);\n        this.activateNewBodyScriptElements();\n    }\n    activateNewBodyScriptElements() {\n        for (const inertScriptElement of this.newBodyScriptElements) {\n            const activatedScriptElement = activateScriptElement(inertScriptElement);\n            inertScriptElement.replaceWith(activatedScriptElement);\n        }\n    }\n    assignNewBody() {\n        this.renderElement(this.currentElement, this.newElement);\n    }\n    get newHeadStylesheetElements() {\n        return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot);\n    }\n    get newHeadScriptElements() {\n        return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot);\n    }\n    get currentHeadProvisionalElements() {\n        return this.currentHeadSnapshot.provisionalElements;\n    }\n    get newHeadProvisionalElements() {\n        return this.newHeadSnapshot.provisionalElements;\n    }\n    get newBodyScriptElements() {\n        return this.newElement.querySelectorAll(\"script\");\n    }\n}\n\nclass SnapshotCache {\n    constructor(size) {\n        this.keys = [];\n        this.snapshots = {};\n        this.size = size;\n    }\n    has(location) {\n        return toCacheKey(location) in this.snapshots;\n    }\n    get(location) {\n        if (this.has(location)) {\n            const snapshot = this.read(location);\n            this.touch(location);\n            return snapshot;\n        }\n    }\n    put(location, snapshot) {\n        this.write(location, snapshot);\n        this.touch(location);\n        return snapshot;\n    }\n    clear() {\n        this.snapshots = {};\n    }\n    read(location) {\n        return this.snapshots[toCacheKey(location)];\n    }\n    write(location, snapshot) {\n        this.snapshots[toCacheKey(location)] = snapshot;\n    }\n    touch(location) {\n        const key = toCacheKey(location);\n        const index = this.keys.indexOf(key);\n        if (index > -1)\n            this.keys.splice(index, 1);\n        this.keys.unshift(key);\n        this.trim();\n    }\n    trim() {\n        for (const key of this.keys.splice(this.size)) {\n            delete this.snapshots[key];\n        }\n    }\n}\n\nclass PageView extends View {\n    constructor() {\n        super(...arguments);\n        this.snapshotCache = new SnapshotCache(10);\n        this.lastRenderedLocation = new URL(location.href);\n        this.forceReloaded = false;\n    }\n    renderPage(snapshot, isPreview = false, willRender = true, visit) {\n        const renderer = new PageRenderer(this.snapshot, snapshot, PageRenderer.renderElement, isPreview, willRender);\n        if (!renderer.shouldRender) {\n            this.forceReloaded = true;\n        }\n        else {\n            visit === null || visit === void 0 ? void 0 : visit.changeHistory();\n        }\n        return this.render(renderer);\n    }\n    renderError(snapshot, visit) {\n        visit === null || visit === void 0 ? void 0 : visit.changeHistory();\n        const renderer = new ErrorRenderer(this.snapshot, snapshot, ErrorRenderer.renderElement, false);\n        return this.render(renderer);\n    }\n    clearSnapshotCache() {\n        this.snapshotCache.clear();\n    }\n    async cacheSnapshot(snapshot = this.snapshot) {\n        if (snapshot.isCacheable) {\n            this.delegate.viewWillCacheSnapshot();\n            const { lastRenderedLocation: location } = this;\n            await nextEventLoopTick();\n            const cachedSnapshot = snapshot.clone();\n            this.snapshotCache.put(location, cachedSnapshot);\n            return cachedSnapshot;\n        }\n    }\n    getCachedSnapshotForLocation(location) {\n        return this.snapshotCache.get(location);\n    }\n    get snapshot() {\n        return PageSnapshot.fromElement(this.element);\n    }\n}\n\nclass Preloader {\n    constructor(delegate) {\n        this.selector = \"a[data-turbo-preload]\";\n        this.delegate = delegate;\n    }\n    get snapshotCache() {\n        return this.delegate.navigator.view.snapshotCache;\n    }\n    start() {\n        if (document.readyState === \"loading\") {\n            return document.addEventListener(\"DOMContentLoaded\", () => {\n                this.preloadOnLoadLinksForView(document.body);\n            });\n        }\n        else {\n            this.preloadOnLoadLinksForView(document.body);\n        }\n    }\n    preloadOnLoadLinksForView(element) {\n        for (const link of element.querySelectorAll(this.selector)) {\n            this.preloadURL(link);\n        }\n    }\n    async preloadURL(link) {\n        const location = new URL(link.href);\n        if (this.snapshotCache.has(location)) {\n            return;\n        }\n        try {\n            const response = await fetch(location.toString(), { headers: { \"VND.PREFETCH\": \"true\", Accept: \"text/html\" } });\n            const responseText = await response.text();\n            const snapshot = PageSnapshot.fromHTMLString(responseText);\n            this.snapshotCache.put(location, snapshot);\n        }\n        catch (_) {\n        }\n    }\n}\n\nclass Session {\n    constructor() {\n        this.navigator = new Navigator(this);\n        this.history = new History(this);\n        this.preloader = new Preloader(this);\n        this.view = new PageView(this, document.documentElement);\n        this.adapter = new BrowserAdapter(this);\n        this.pageObserver = new PageObserver(this);\n        this.cacheObserver = new CacheObserver();\n        this.linkClickObserver = new LinkClickObserver(this, window);\n        this.formSubmitObserver = new FormSubmitObserver(this, document);\n        this.scrollObserver = new ScrollObserver(this);\n        this.streamObserver = new StreamObserver(this);\n        this.formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement);\n        this.frameRedirector = new FrameRedirector(this, document.documentElement);\n        this.streamMessageRenderer = new StreamMessageRenderer();\n        this.drive = true;\n        this.enabled = true;\n        this.progressBarDelay = 500;\n        this.started = false;\n        this.formMode = \"on\";\n    }\n    start() {\n        if (!this.started) {\n            this.pageObserver.start();\n            this.cacheObserver.start();\n            this.formLinkClickObserver.start();\n            this.linkClickObserver.start();\n            this.formSubmitObserver.start();\n            this.scrollObserver.start();\n            this.streamObserver.start();\n            this.frameRedirector.start();\n            this.history.start();\n            this.preloader.start();\n            this.started = true;\n            this.enabled = true;\n        }\n    }\n    disable() {\n        this.enabled = false;\n    }\n    stop() {\n        if (this.started) {\n            this.pageObserver.stop();\n            this.cacheObserver.stop();\n            this.formLinkClickObserver.stop();\n            this.linkClickObserver.stop();\n            this.formSubmitObserver.stop();\n            this.scrollObserver.stop();\n            this.streamObserver.stop();\n            this.frameRedirector.stop();\n            this.history.stop();\n            this.started = false;\n        }\n    }\n    registerAdapter(adapter) {\n        this.adapter = adapter;\n    }\n    visit(location, options = {}) {\n        const frameElement = options.frame ? document.getElementById(options.frame) : null;\n        if (frameElement instanceof FrameElement) {\n            frameElement.src = location.toString();\n            frameElement.loaded;\n        }\n        else {\n            this.navigator.proposeVisit(expandURL(location), options);\n        }\n    }\n    connectStreamSource(source) {\n        this.streamObserver.connectStreamSource(source);\n    }\n    disconnectStreamSource(source) {\n        this.streamObserver.disconnectStreamSource(source);\n    }\n    renderStreamMessage(message) {\n        this.streamMessageRenderer.render(StreamMessage.wrap(message));\n    }\n    clearCache() {\n        this.view.clearSnapshotCache();\n    }\n    setProgressBarDelay(delay) {\n        this.progressBarDelay = delay;\n    }\n    setFormMode(mode) {\n        this.formMode = mode;\n    }\n    get location() {\n        return this.history.location;\n    }\n    get restorationIdentifier() {\n        return this.history.restorationIdentifier;\n    }\n    historyPoppedToLocationWithRestorationIdentifier(location, restorationIdentifier) {\n        if (this.enabled) {\n            this.navigator.startVisit(location, restorationIdentifier, {\n                action: \"restore\",\n                historyChanged: true,\n            });\n        }\n        else {\n            this.adapter.pageInvalidated({\n                reason: \"turbo_disabled\",\n            });\n        }\n    }\n    scrollPositionChanged(position) {\n        this.history.updateRestorationData({ scrollPosition: position });\n    }\n    willSubmitFormLinkToLocation(link, location) {\n        return this.elementIsNavigatable(link) && locationIsVisitable(location, this.snapshot.rootLocation);\n    }\n    submittedFormLinkToLocation() { }\n    willFollowLinkToLocation(link, location, event) {\n        return (this.elementIsNavigatable(link) &&\n            locationIsVisitable(location, this.snapshot.rootLocation) &&\n            this.applicationAllowsFollowingLinkToLocation(link, location, event));\n    }\n    followedLinkToLocation(link, location) {\n        const action = this.getActionForLink(link);\n        const acceptsStreamResponse = link.hasAttribute(\"data-turbo-stream\");\n        this.visit(location.href, { action, acceptsStreamResponse });\n    }\n    allowsVisitingLocationWithAction(location, action) {\n        return this.locationWithActionIsSamePage(location, action) || this.applicationAllowsVisitingLocation(location);\n    }\n    visitProposedToLocation(location, options) {\n        extendURLWithDeprecatedProperties(location);\n        this.adapter.visitProposedToLocation(location, options);\n    }\n    visitStarted(visit) {\n        if (!visit.acceptsStreamResponse) {\n            markAsBusy(document.documentElement);\n        }\n        extendURLWithDeprecatedProperties(visit.location);\n        if (!visit.silent) {\n            this.notifyApplicationAfterVisitingLocation(visit.location, visit.action);\n        }\n    }\n    visitCompleted(visit) {\n        clearBusyState(document.documentElement);\n        this.notifyApplicationAfterPageLoad(visit.getTimingMetrics());\n    }\n    locationWithActionIsSamePage(location, action) {\n        return this.navigator.locationWithActionIsSamePage(location, action);\n    }\n    visitScrolledToSamePageLocation(oldURL, newURL) {\n        this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL);\n    }\n    willSubmitForm(form, submitter) {\n        const action = getAction(form, submitter);\n        return (this.submissionIsNavigatable(form, submitter) &&\n            locationIsVisitable(expandURL(action), this.snapshot.rootLocation));\n    }\n    formSubmitted(form, submitter) {\n        this.navigator.submitForm(form, submitter);\n    }\n    pageBecameInteractive() {\n        this.view.lastRenderedLocation = this.location;\n        this.notifyApplicationAfterPageLoad();\n    }\n    pageLoaded() {\n        this.history.assumeControlOfScrollRestoration();\n    }\n    pageWillUnload() {\n        this.history.relinquishControlOfScrollRestoration();\n    }\n    receivedMessageFromStream(message) {\n        this.renderStreamMessage(message);\n    }\n    viewWillCacheSnapshot() {\n        var _a;\n        if (!((_a = this.navigator.currentVisit) === null || _a === void 0 ? void 0 : _a.silent)) {\n            this.notifyApplicationBeforeCachingSnapshot();\n        }\n    }\n    allowsImmediateRender({ element }, options) {\n        const event = this.notifyApplicationBeforeRender(element, options);\n        const { defaultPrevented, detail: { render }, } = event;\n        if (this.view.renderer && render) {\n            this.view.renderer.renderElement = render;\n        }\n        return !defaultPrevented;\n    }\n    viewRenderedSnapshot(_snapshot, _isPreview) {\n        this.view.lastRenderedLocation = this.history.location;\n        this.notifyApplicationAfterRender();\n    }\n    preloadOnLoadLinksForView(element) {\n        this.preloader.preloadOnLoadLinksForView(element);\n    }\n    viewInvalidated(reason) {\n        this.adapter.pageInvalidated(reason);\n    }\n    frameLoaded(frame) {\n        this.notifyApplicationAfterFrameLoad(frame);\n    }\n    frameRendered(fetchResponse, frame) {\n        this.notifyApplicationAfterFrameRender(fetchResponse, frame);\n    }\n    applicationAllowsFollowingLinkToLocation(link, location, ev) {\n        const event = this.notifyApplicationAfterClickingLinkToLocation(link, location, ev);\n        return !event.defaultPrevented;\n    }\n    applicationAllowsVisitingLocation(location) {\n        const event = this.notifyApplicationBeforeVisitingLocation(location);\n        return !event.defaultPrevented;\n    }\n    notifyApplicationAfterClickingLinkToLocation(link, location, event) {\n        return dispatch(\"turbo:click\", {\n            target: link,\n            detail: { url: location.href, originalEvent: event },\n            cancelable: true,\n        });\n    }\n    notifyApplicationBeforeVisitingLocation(location) {\n        return dispatch(\"turbo:before-visit\", {\n            detail: { url: location.href },\n            cancelable: true,\n        });\n    }\n    notifyApplicationAfterVisitingLocation(location, action) {\n        return dispatch(\"turbo:visit\", { detail: { url: location.href, action } });\n    }\n    notifyApplicationBeforeCachingSnapshot() {\n        return dispatch(\"turbo:before-cache\");\n    }\n    notifyApplicationBeforeRender(newBody, options) {\n        return dispatch(\"turbo:before-render\", {\n            detail: Object.assign({ newBody }, options),\n            cancelable: true,\n        });\n    }\n    notifyApplicationAfterRender() {\n        return dispatch(\"turbo:render\");\n    }\n    notifyApplicationAfterPageLoad(timing = {}) {\n        return dispatch(\"turbo:load\", {\n            detail: { url: this.location.href, timing },\n        });\n    }\n    notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL) {\n        dispatchEvent(new HashChangeEvent(\"hashchange\", {\n            oldURL: oldURL.toString(),\n            newURL: newURL.toString(),\n        }));\n    }\n    notifyApplicationAfterFrameLoad(frame) {\n        return dispatch(\"turbo:frame-load\", { target: frame });\n    }\n    notifyApplicationAfterFrameRender(fetchResponse, frame) {\n        return dispatch(\"turbo:frame-render\", {\n            detail: { fetchResponse },\n            target: frame,\n            cancelable: true,\n        });\n    }\n    submissionIsNavigatable(form, submitter) {\n        if (this.formMode == \"off\") {\n            return false;\n        }\n        else {\n            const submitterIsNavigatable = submitter ? this.elementIsNavigatable(submitter) : true;\n            if (this.formMode == \"optin\") {\n                return submitterIsNavigatable && form.closest('[data-turbo=\"true\"]') != null;\n            }\n            else {\n                return submitterIsNavigatable && this.elementIsNavigatable(form);\n            }\n        }\n    }\n    elementIsNavigatable(element) {\n        const container = element.closest(\"[data-turbo]\");\n        const withinFrame = element.closest(\"turbo-frame\");\n        if (this.drive || withinFrame) {\n            if (container) {\n                return container.getAttribute(\"data-turbo\") != \"false\";\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            if (container) {\n                return container.getAttribute(\"data-turbo\") == \"true\";\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    getActionForLink(link) {\n        const action = link.getAttribute(\"data-turbo-action\");\n        return isAction(action) ? action : \"advance\";\n    }\n    get snapshot() {\n        return this.view.snapshot;\n    }\n}\nfunction extendURLWithDeprecatedProperties(url) {\n    Object.defineProperties(url, deprecatedLocationPropertyDescriptors);\n}\nconst deprecatedLocationPropertyDescriptors = {\n    absoluteURL: {\n        get() {\n            return this.toString();\n        },\n    },\n};\n\nclass Cache {\n    constructor(session) {\n        this.session = session;\n    }\n    clear() {\n        this.session.clearCache();\n    }\n    resetCacheControl() {\n        this.setCacheControl(\"\");\n    }\n    exemptPageFromCache() {\n        this.setCacheControl(\"no-cache\");\n    }\n    exemptPageFromPreview() {\n        this.setCacheControl(\"no-preview\");\n    }\n    setCacheControl(value) {\n        setMetaContent(\"turbo-cache-control\", value);\n    }\n}\n\nconst StreamActions = {\n    after() {\n        this.targetElements.forEach((e) => { var _a; return (_a = e.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(this.templateContent, e.nextSibling); });\n    },\n    append() {\n        this.removeDuplicateTargetChildren();\n        this.targetElements.forEach((e) => e.append(this.templateContent));\n    },\n    before() {\n        this.targetElements.forEach((e) => { var _a; return (_a = e.parentElement) === null || _a === void 0 ? void 0 : _a.insertBefore(this.templateContent, e); });\n    },\n    prepend() {\n        this.removeDuplicateTargetChildren();\n        this.targetElements.forEach((e) => e.prepend(this.templateContent));\n    },\n    remove() {\n        this.targetElements.forEach((e) => e.remove());\n    },\n    replace() {\n        this.targetElements.forEach((e) => e.replaceWith(this.templateContent));\n    },\n    update() {\n        this.targetElements.forEach((e) => e.replaceChildren(this.templateContent));\n    },\n};\n\nconst session = new Session();\nconst cache = new Cache(session);\nconst { navigator: navigator$1 } = session;\nfunction start() {\n    session.start();\n}\nfunction registerAdapter(adapter) {\n    session.registerAdapter(adapter);\n}\nfunction visit(location, options) {\n    session.visit(location, options);\n}\nfunction connectStreamSource(source) {\n    session.connectStreamSource(source);\n}\nfunction disconnectStreamSource(source) {\n    session.disconnectStreamSource(source);\n}\nfunction renderStreamMessage(message) {\n    session.renderStreamMessage(message);\n}\nfunction clearCache() {\n    console.warn(\"Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`\");\n    session.clearCache();\n}\nfunction setProgressBarDelay(delay) {\n    session.setProgressBarDelay(delay);\n}\nfunction setConfirmMethod(confirmMethod) {\n    FormSubmission.confirmMethod = confirmMethod;\n}\nfunction setFormMode(mode) {\n    session.setFormMode(mode);\n}\n\nvar Turbo = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    navigator: navigator$1,\n    session: session,\n    cache: cache,\n    PageRenderer: PageRenderer,\n    PageSnapshot: PageSnapshot,\n    FrameRenderer: FrameRenderer,\n    start: start,\n    registerAdapter: registerAdapter,\n    visit: visit,\n    connectStreamSource: connectStreamSource,\n    disconnectStreamSource: disconnectStreamSource,\n    renderStreamMessage: renderStreamMessage,\n    clearCache: clearCache,\n    setProgressBarDelay: setProgressBarDelay,\n    setConfirmMethod: setConfirmMethod,\n    setFormMode: setFormMode,\n    StreamActions: StreamActions\n});\n\nclass FrameController {\n    constructor(element) {\n        this.fetchResponseLoaded = (_fetchResponse) => { };\n        this.currentFetchRequest = null;\n        this.resolveVisitPromise = () => { };\n        this.connected = false;\n        this.hasBeenLoaded = false;\n        this.ignoredAttributes = new Set();\n        this.action = null;\n        this.visitCachedSnapshot = ({ element }) => {\n            const frame = element.querySelector(\"#\" + this.element.id);\n            if (frame && this.previousFrameElement) {\n                frame.replaceChildren(...this.previousFrameElement.children);\n            }\n            delete this.previousFrameElement;\n        };\n        this.element = element;\n        this.view = new FrameView(this, this.element);\n        this.appearanceObserver = new AppearanceObserver(this, this.element);\n        this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);\n        this.linkInterceptor = new LinkInterceptor(this, this.element);\n        this.restorationIdentifier = uuid();\n        this.formSubmitObserver = new FormSubmitObserver(this, this.element);\n    }\n    connect() {\n        if (!this.connected) {\n            this.connected = true;\n            if (this.loadingStyle == FrameLoadingStyle.lazy) {\n                this.appearanceObserver.start();\n            }\n            else {\n                this.loadSourceURL();\n            }\n            this.formLinkClickObserver.start();\n            this.linkInterceptor.start();\n            this.formSubmitObserver.start();\n        }\n    }\n    disconnect() {\n        if (this.connected) {\n            this.connected = false;\n            this.appearanceObserver.stop();\n            this.formLinkClickObserver.stop();\n            this.linkInterceptor.stop();\n            this.formSubmitObserver.stop();\n        }\n    }\n    disabledChanged() {\n        if (this.loadingStyle == FrameLoadingStyle.eager) {\n            this.loadSourceURL();\n        }\n    }\n    sourceURLChanged() {\n        if (this.isIgnoringChangesTo(\"src\"))\n            return;\n        if (this.element.isConnected) {\n            this.complete = false;\n        }\n        if (this.loadingStyle == FrameLoadingStyle.eager || this.hasBeenLoaded) {\n            this.loadSourceURL();\n        }\n    }\n    sourceURLReloaded() {\n        const { src } = this.element;\n        this.ignoringChangesToAttribute(\"complete\", () => {\n            this.element.removeAttribute(\"complete\");\n        });\n        this.element.src = null;\n        this.element.src = src;\n        return this.element.loaded;\n    }\n    completeChanged() {\n        if (this.isIgnoringChangesTo(\"complete\"))\n            return;\n        this.loadSourceURL();\n    }\n    loadingStyleChanged() {\n        if (this.loadingStyle == FrameLoadingStyle.lazy) {\n            this.appearanceObserver.start();\n        }\n        else {\n            this.appearanceObserver.stop();\n            this.loadSourceURL();\n        }\n    }\n    async loadSourceURL() {\n        if (this.enabled && this.isActive && !this.complete && this.sourceURL) {\n            this.element.loaded = this.visit(expandURL(this.sourceURL));\n            this.appearanceObserver.stop();\n            await this.element.loaded;\n            this.hasBeenLoaded = true;\n        }\n    }\n    async loadResponse(fetchResponse) {\n        if (fetchResponse.redirected || (fetchResponse.succeeded && fetchResponse.isHTML)) {\n            this.sourceURL = fetchResponse.response.url;\n        }\n        try {\n            const html = await fetchResponse.responseHTML;\n            if (html) {\n                const { body } = parseHTMLDocument(html);\n                const newFrameElement = await this.extractForeignFrameElement(body);\n                if (newFrameElement) {\n                    const snapshot = new Snapshot(newFrameElement);\n                    const renderer = new FrameRenderer(this, this.view.snapshot, snapshot, FrameRenderer.renderElement, false, false);\n                    if (this.view.renderPromise)\n                        await this.view.renderPromise;\n                    this.changeHistory();\n                    await this.view.render(renderer);\n                    this.complete = true;\n                    session.frameRendered(fetchResponse, this.element);\n                    session.frameLoaded(this.element);\n                    this.fetchResponseLoaded(fetchResponse);\n                }\n                else if (this.willHandleFrameMissingFromResponse(fetchResponse)) {\n                    console.warn(`A matching frame for #${this.element.id} was missing from the response, transforming into full-page Visit.`);\n                    this.visitResponse(fetchResponse.response);\n                }\n            }\n        }\n        catch (error) {\n            console.error(error);\n            this.view.invalidate();\n        }\n        finally {\n            this.fetchResponseLoaded = () => { };\n        }\n    }\n    elementAppearedInViewport(_element) {\n        this.loadSourceURL();\n    }\n    willSubmitFormLinkToLocation(link) {\n        return this.shouldInterceptNavigation(link);\n    }\n    submittedFormLinkToLocation(link, _location, form) {\n        const frame = this.findFrameElement(link);\n        if (frame)\n            form.setAttribute(\"data-turbo-frame\", frame.id);\n    }\n    shouldInterceptLinkClick(element, _location, _event) {\n        return this.shouldInterceptNavigation(element);\n    }\n    linkClickIntercepted(element, location) {\n        this.navigateFrame(element, location);\n    }\n    willSubmitForm(element, submitter) {\n        return element.closest(\"turbo-frame\") == this.element && this.shouldInterceptNavigation(element, submitter);\n    }\n    formSubmitted(element, submitter) {\n        if (this.formSubmission) {\n            this.formSubmission.stop();\n        }\n        this.formSubmission = new FormSubmission(this, element, submitter);\n        const { fetchRequest } = this.formSubmission;\n        this.prepareHeadersForRequest(fetchRequest.headers, fetchRequest);\n        this.formSubmission.start();\n    }\n    prepareHeadersForRequest(headers, request) {\n        var _a;\n        headers[\"Turbo-Frame\"] = this.id;\n        if ((_a = this.currentNavigationElement) === null || _a === void 0 ? void 0 : _a.hasAttribute(\"data-turbo-stream\")) {\n            request.acceptResponseType(StreamMessage.contentType);\n        }\n    }\n    requestStarted(_request) {\n        markAsBusy(this.element);\n    }\n    requestPreventedHandlingResponse(_request, _response) {\n        this.resolveVisitPromise();\n    }\n    async requestSucceededWithResponse(request, response) {\n        await this.loadResponse(response);\n        this.resolveVisitPromise();\n    }\n    async requestFailedWithResponse(request, response) {\n        console.error(response);\n        await this.loadResponse(response);\n        this.resolveVisitPromise();\n    }\n    requestErrored(request, error) {\n        console.error(error);\n        this.resolveVisitPromise();\n    }\n    requestFinished(_request) {\n        clearBusyState(this.element);\n    }\n    formSubmissionStarted({ formElement }) {\n        markAsBusy(formElement, this.findFrameElement(formElement));\n    }\n    formSubmissionSucceededWithResponse(formSubmission, response) {\n        const frame = this.findFrameElement(formSubmission.formElement, formSubmission.submitter);\n        frame.delegate.proposeVisitIfNavigatedWithAction(frame, formSubmission.formElement, formSubmission.submitter);\n        frame.delegate.loadResponse(response);\n    }\n    formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n        this.element.delegate.loadResponse(fetchResponse);\n    }\n    formSubmissionErrored(formSubmission, error) {\n        console.error(error);\n    }\n    formSubmissionFinished({ formElement }) {\n        clearBusyState(formElement, this.findFrameElement(formElement));\n    }\n    allowsImmediateRender({ element: newFrame }, options) {\n        const event = dispatch(\"turbo:before-frame-render\", {\n            target: this.element,\n            detail: Object.assign({ newFrame }, options),\n            cancelable: true,\n        });\n        const { defaultPrevented, detail: { render }, } = event;\n        if (this.view.renderer && render) {\n            this.view.renderer.renderElement = render;\n        }\n        return !defaultPrevented;\n    }\n    viewRenderedSnapshot(_snapshot, _isPreview) { }\n    preloadOnLoadLinksForView(element) {\n        session.preloadOnLoadLinksForView(element);\n    }\n    viewInvalidated() { }\n    willRenderFrame(currentElement, _newElement) {\n        this.previousFrameElement = currentElement.cloneNode(true);\n    }\n    async visit(url) {\n        var _a;\n        const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);\n        (_a = this.currentFetchRequest) === null || _a === void 0 ? void 0 : _a.cancel();\n        this.currentFetchRequest = request;\n        return new Promise((resolve) => {\n            this.resolveVisitPromise = () => {\n                this.resolveVisitPromise = () => { };\n                this.currentFetchRequest = null;\n                resolve();\n            };\n            request.perform();\n        });\n    }\n    navigateFrame(element, url, submitter) {\n        const frame = this.findFrameElement(element, submitter);\n        this.pageSnapshot = PageSnapshot.fromElement(frame).clone();\n        frame.delegate.proposeVisitIfNavigatedWithAction(frame, element, submitter);\n        this.withCurrentNavigationElement(element, () => {\n            frame.src = url;\n        });\n    }\n    proposeVisitIfNavigatedWithAction(frame, element, submitter) {\n        this.action = getVisitAction(submitter, element, frame);\n        if (isAction(this.action)) {\n            const { visitCachedSnapshot } = frame.delegate;\n            frame.delegate.fetchResponseLoaded = (fetchResponse) => {\n                if (frame.src) {\n                    const { statusCode, redirected } = fetchResponse;\n                    const responseHTML = frame.ownerDocument.documentElement.outerHTML;\n                    const response = { statusCode, redirected, responseHTML };\n                    const options = {\n                        response,\n                        visitCachedSnapshot,\n                        willRender: false,\n                        updateHistory: false,\n                        restorationIdentifier: this.restorationIdentifier,\n                        snapshot: this.pageSnapshot,\n                    };\n                    if (this.action)\n                        options.action = this.action;\n                    session.visit(frame.src, options);\n                }\n            };\n        }\n    }\n    changeHistory() {\n        if (this.action) {\n            const method = getHistoryMethodForAction(this.action);\n            session.history.update(method, expandURL(this.element.src || \"\"), this.restorationIdentifier);\n        }\n    }\n    willHandleFrameMissingFromResponse(fetchResponse) {\n        this.element.setAttribute(\"complete\", \"\");\n        const response = fetchResponse.response;\n        const visit = async (url, options = {}) => {\n            if (url instanceof Response) {\n                this.visitResponse(url);\n            }\n            else {\n                session.visit(url, options);\n            }\n        };\n        const event = dispatch(\"turbo:frame-missing\", {\n            target: this.element,\n            detail: { response, visit },\n            cancelable: true,\n        });\n        return !event.defaultPrevented;\n    }\n    async visitResponse(response) {\n        const wrapped = new FetchResponse(response);\n        const responseHTML = await wrapped.responseHTML;\n        const { location, redirected, statusCode } = wrapped;\n        return session.visit(location, { response: { redirected, statusCode, responseHTML } });\n    }\n    findFrameElement(element, submitter) {\n        var _a;\n        const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n        return (_a = getFrameElementById(id)) !== null && _a !== void 0 ? _a : this.element;\n    }\n    async extractForeignFrameElement(container) {\n        let element;\n        const id = CSS.escape(this.id);\n        try {\n            element = activateElement(container.querySelector(`turbo-frame#${id}`), this.sourceURL);\n            if (element) {\n                return element;\n            }\n            element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.sourceURL);\n            if (element) {\n                await element.loaded;\n                return await this.extractForeignFrameElement(element);\n            }\n        }\n        catch (error) {\n            console.error(error);\n            return new FrameElement();\n        }\n        return null;\n    }\n    formActionIsVisitable(form, submitter) {\n        const action = getAction(form, submitter);\n        return locationIsVisitable(expandURL(action), this.rootLocation);\n    }\n    shouldInterceptNavigation(element, submitter) {\n        const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n        if (element instanceof HTMLFormElement && !this.formActionIsVisitable(element, submitter)) {\n            return false;\n        }\n        if (!this.enabled || id == \"_top\") {\n            return false;\n        }\n        if (id) {\n            const frameElement = getFrameElementById(id);\n            if (frameElement) {\n                return !frameElement.disabled;\n            }\n        }\n        if (!session.elementIsNavigatable(element)) {\n            return false;\n        }\n        if (submitter && !session.elementIsNavigatable(submitter)) {\n            return false;\n        }\n        return true;\n    }\n    get id() {\n        return this.element.id;\n    }\n    get enabled() {\n        return !this.element.disabled;\n    }\n    get sourceURL() {\n        if (this.element.src) {\n            return this.element.src;\n        }\n    }\n    set sourceURL(sourceURL) {\n        this.ignoringChangesToAttribute(\"src\", () => {\n            this.element.src = sourceURL !== null && sourceURL !== void 0 ? sourceURL : null;\n        });\n    }\n    get loadingStyle() {\n        return this.element.loading;\n    }\n    get isLoading() {\n        return this.formSubmission !== undefined || this.resolveVisitPromise() !== undefined;\n    }\n    get complete() {\n        return this.element.hasAttribute(\"complete\");\n    }\n    set complete(value) {\n        this.ignoringChangesToAttribute(\"complete\", () => {\n            if (value) {\n                this.element.setAttribute(\"complete\", \"\");\n            }\n            else {\n                this.element.removeAttribute(\"complete\");\n            }\n        });\n    }\n    get isActive() {\n        return this.element.isActive && this.connected;\n    }\n    get rootLocation() {\n        var _a;\n        const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n        const root = (_a = meta === null || meta === void 0 ? void 0 : meta.content) !== null && _a !== void 0 ? _a : \"/\";\n        return expandURL(root);\n    }\n    isIgnoringChangesTo(attributeName) {\n        return this.ignoredAttributes.has(attributeName);\n    }\n    ignoringChangesToAttribute(attributeName, callback) {\n        this.ignoredAttributes.add(attributeName);\n        callback();\n        this.ignoredAttributes.delete(attributeName);\n    }\n    withCurrentNavigationElement(element, callback) {\n        this.currentNavigationElement = element;\n        callback();\n        delete this.currentNavigationElement;\n    }\n}\nfunction getFrameElementById(id) {\n    if (id != null) {\n        const element = document.getElementById(id);\n        if (element instanceof FrameElement) {\n            return element;\n        }\n    }\n}\nfunction activateElement(element, currentURL) {\n    if (element) {\n        const src = element.getAttribute(\"src\");\n        if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n            throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`);\n        }\n        if (element.ownerDocument !== document) {\n            element = document.importNode(element, true);\n        }\n        if (element instanceof FrameElement) {\n            element.connectedCallback();\n            element.disconnectedCallback();\n            return element;\n        }\n    }\n}\n\nclass StreamElement extends HTMLElement {\n    static async renderElement(newElement) {\n        await newElement.performAction();\n    }\n    async connectedCallback() {\n        try {\n            await this.render();\n        }\n        catch (error) {\n            console.error(error);\n        }\n        finally {\n            this.disconnect();\n        }\n    }\n    async render() {\n        var _a;\n        return ((_a = this.renderPromise) !== null && _a !== void 0 ? _a : (this.renderPromise = (async () => {\n            const event = this.beforeRenderEvent;\n            if (this.dispatchEvent(event)) {\n                await nextAnimationFrame();\n                await event.detail.render(this);\n            }\n        })()));\n    }\n    disconnect() {\n        try {\n            this.remove();\n        }\n        catch (_a) { }\n    }\n    removeDuplicateTargetChildren() {\n        this.duplicateChildren.forEach((c) => c.remove());\n    }\n    get duplicateChildren() {\n        var _a;\n        const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.id);\n        const newChildrenIds = [...(((_a = this.templateContent) === null || _a === void 0 ? void 0 : _a.children) || [])].filter((c) => !!c.id).map((c) => c.id);\n        return existingChildren.filter((c) => newChildrenIds.includes(c.id));\n    }\n    get performAction() {\n        if (this.action) {\n            const actionFunction = StreamActions[this.action];\n            if (actionFunction) {\n                return actionFunction;\n            }\n            this.raise(\"unknown action\");\n        }\n        this.raise(\"action attribute is missing\");\n    }\n    get targetElements() {\n        if (this.target) {\n            return this.targetElementsById;\n        }\n        else if (this.targets) {\n            return this.targetElementsByQuery;\n        }\n        else {\n            this.raise(\"target or targets attribute is missing\");\n        }\n    }\n    get templateContent() {\n        return this.templateElement.content.cloneNode(true);\n    }\n    get templateElement() {\n        if (this.firstElementChild === null) {\n            const template = this.ownerDocument.createElement(\"template\");\n            this.appendChild(template);\n            return template;\n        }\n        else if (this.firstElementChild instanceof HTMLTemplateElement) {\n            return this.firstElementChild;\n        }\n        this.raise(\"first child element must be a <template> element\");\n    }\n    get action() {\n        return this.getAttribute(\"action\");\n    }\n    get target() {\n        return this.getAttribute(\"target\");\n    }\n    get targets() {\n        return this.getAttribute(\"targets\");\n    }\n    raise(message) {\n        throw new Error(`${this.description}: ${message}`);\n    }\n    get description() {\n        var _a, _b;\n        return (_b = ((_a = this.outerHTML.match(/<[^>]+>/)) !== null && _a !== void 0 ? _a : [])[0]) !== null && _b !== void 0 ? _b : \"<turbo-stream>\";\n    }\n    get beforeRenderEvent() {\n        return new CustomEvent(\"turbo:before-stream-render\", {\n            bubbles: true,\n            cancelable: true,\n            detail: { newStream: this, render: StreamElement.renderElement },\n        });\n    }\n    get targetElementsById() {\n        var _a;\n        const element = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.getElementById(this.target);\n        if (element !== null) {\n            return [element];\n        }\n        else {\n            return [];\n        }\n    }\n    get targetElementsByQuery() {\n        var _a;\n        const elements = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.querySelectorAll(this.targets);\n        if (elements.length !== 0) {\n            return Array.prototype.slice.call(elements);\n        }\n        else {\n            return [];\n        }\n    }\n}\n\nclass StreamSourceElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this.streamSource = null;\n    }\n    connectedCallback() {\n        this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);\n        connectStreamSource(this.streamSource);\n    }\n    disconnectedCallback() {\n        if (this.streamSource) {\n            disconnectStreamSource(this.streamSource);\n        }\n    }\n    get src() {\n        return this.getAttribute(\"src\") || \"\";\n    }\n}\n\nFrameElement.delegateConstructor = FrameController;\nif (customElements.get(\"turbo-frame\") === undefined) {\n    customElements.define(\"turbo-frame\", FrameElement);\n}\nif (customElements.get(\"turbo-stream\") === undefined) {\n    customElements.define(\"turbo-stream\", StreamElement);\n}\nif (customElements.get(\"turbo-stream-source\") === undefined) {\n    customElements.define(\"turbo-stream-source\", StreamSourceElement);\n}\n\n(() => {\n    let element = document.currentScript;\n    if (!element)\n        return;\n    if (element.hasAttribute(\"data-turbo-suppress-warning\"))\n        return;\n    element = element.parentElement;\n    while (element) {\n        if (element == document.body) {\n            return console.warn(unindent `\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        \n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `, element.outerHTML);\n        }\n        element = element.parentElement;\n    }\n})();\n\nwindow.Turbo = Turbo;\nstart();\n\nexport { FrameElement, FrameLoadingStyle, FrameRenderer, PageRenderer, PageSnapshot, StreamActions, StreamElement, StreamSourceElement, cache, clearCache, connectStreamSource, disconnectStreamSource, navigator$1 as navigator, registerAdapter, renderStreamMessage, session, setConfirmMethod, setFormMode, setProgressBarDelay, start, visit };\n","import { Application } from '@hotwired/stimulus'\nimport { definitionForModuleAndIdentifier, identifierForContextKey } from '@hotwired/stimulus-webpack-helpers'\nimport '@hotwired/turbo'\n\nimport './scripts/mootao.js'\nimport './scripts/core.js'\nimport './scripts/limit-height.js'\nimport './scripts/modulewizard.js'\nimport './scripts/sectionwizard.js'\nimport './scripts/tips.js'\n\n/* Stimulus */\n// Start Stimulus application and register all controllers with `contao--` prefix.\nconst application = Application.start()\napplication.debug = process.env.NODE_ENV === 'development'\n\nconst context = require.context('./controllers', true, /\\.js$/)\napplication.load(context.keys().map((key) => {\n    const identifier = identifierForContextKey(key);\n    if (identifier) {\n        return definitionForModuleAndIdentifier(context(key), `contao--${ identifier }`);\n    }\n}).filter((value) => value));\n\n/* Turbo support */\n// Cancel all prefetch requests that contain a request token\ndocument.documentElement.addEventListener('turbo:before-prefetch', e => {\n    if ((new URLSearchParams(e.target.href)).has('rt') || e.target.closest('.sf-toolbar') !== null) {\n        e.preventDefault();\n    }\n});\n\n// Make MooTools scripts reinitialize themselves\ndocument.documentElement.addEventListener('turbo:render', () => {\n    if (!document.body.mooDomreadyFired) {\n        document.body.mooDomreadyFired = true;\n        window.fireEvent('domready');\n    }\n});\n"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","EventListener","constructor","eventTarget","eventName","eventOptions","this","unorderedBindings","Set","connect","addEventListener","disconnect","removeEventListener","bindingConnected","binding","add","bindingDisconnected","delete","handleEvent","event","extendedEvent","stopImmediatePropagation","assign","immediatePropagationStopped","call","extendEvent","bindings","hasBindings","size","Array","from","sort","left","right","leftIndex","index","rightIndex","Dispatcher","application","eventListenerMaps","Map","started","start","eventListeners","forEach","eventListener","stop","values","reduce","listeners","concat","fetchEventListenerForBinding","clearEventListeners","clearEventListenersForBinding","handleError","error","message","detail","removeMappedEventListenerFor","eventListenerMap","fetchEventListenerMapForEventTarget","cacheKey","fetchEventListener","get","createEventListener","set","parts","key","push","join","defaultActionDescriptorFilters","value","stopPropagation","prevent","preventDefault","self","element","target","descriptorPattern","parseEventTarget","eventTargetName","window","document","camelize","replace","_","char","toUpperCase","capitalize","charAt","slice","dasherize","toLowerCase","Action","descriptor","tagName","defaultEventNames","getDefaultEventNameForElement","identifier","methodName","forToken","token","descriptorString","matches","trim","match","split","options","test","parseActionDescriptorString","content","toString","eventNameSuffix","params","pattern","RegExp","name","attributes","typecast","a","button","form","details","input","getAttribute","select","textarea","JSON","parse","o_O","Binding","context","action","willBeInvokedByEvent","applyEventModifiers","invokeWithEvent","method","controller","actionDescriptorFilters","passes","entries","filter","currentTarget","actionEvent","logDebugActivity","Element","contains","scope","containsElement","ElementObserver","delegate","mutationObserverInit","childList","subtree","elements","mutationObserver","MutationObserver","mutations","processMutations","observe","refresh","pause","callback","takeRecords","matchElementsInTree","has","removeElement","addElement","mutation","processMutation","type","processAttributeChange","attributeName","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","node","elementAttributeChanged","matchElement","nodes","elementFromNode","processTree","elementIsActive","tree","processor","nodeType","Node","ELEMENT_NODE","isConnected","elementMatched","elementUnmatched","AttributeObserver","elementObserver","selector","hasAttribute","querySelectorAll","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","StringMapObserver","stringMap","attributeOldValue","knownAttributeNames","refreshAttribute","oldValue","getStringMapKeyForAttribute","stringMapKeyAdded","stringMapValueChanged","stringMapKeyRemoved","currentAttributeNames","recordedAttributeNames","attribute","fetch","del","prune","Multimap","valuesByKey","hasKey","hasValue","some","getValuesForKey","getKeysForValue","_key","_values","TokenListObserver","attributeObserver","tokensByElement","tokensMatched","readTokensForElement","unmatchedTokens","matchedTokens","refreshTokensForElement","tokensUnmatched","tokens","tokenMatched","tokenUnmatched","previousTokens","currentTokens","firstDifferingIndex","length","Math","max","zip","findIndex","previousToken","currentToken","tokenString","parseTokenString","ValueListObserver","tokenListObserver","parseResultsByToken","WeakMap","valuesByTokenByElement","fetchParseResultForToken","fetchValuesByTokenForElement","elementMatchedValue","elementUnmatchedValue","parseResult","parseToken","valuesByToken","parseValueForToken","BindingObserver","bindingsByAction","valueListObserver","actionAttribute","disconnectAllActions","schema","connectAction","disconnectAction","clear","ValueObserver","receiver","stringMapObserver","valueDescriptorMap","invokeChangedCallbacksForDefaultValues","invokeChangedCallback","writer","defaultValue","valueDescriptorNameMap","valueDescriptors","undefined","data","rawValue","rawOldValue","changedMethodName","changedMethod","reader","TypeError","descriptors","hasMethodName","TargetObserver","targetsByName","disconnectAllTargets","connectTarget","disconnectTarget","_a","targetConnected","targetDisconnected","Context","functionName","controllerConstructor","bindingObserver","dispatcher","valueObserver","targetObserver","initialize","parentElement","invokeControllerMethod","args","readInheritableStaticArrayValues","propertyName","ancestors","getAncestorsForConstructor","definition","isArray","getOwnStaticArrayValues","readInheritableStaticObjectPairs","pairs","getOwnStaticObjectPairs","getPrototypeOf","reverse","bless","properties","shadowConstructor","extend","shadowProperties","prototype","getOwnKeys","shadowingDescriptor","getOwnPropertyDescriptor","getShadowedDescriptor","getShadowProperties","defineProperties","shadow","blessings","blessedProperties","blessing","getBlessedProperties","getOwnPropertySymbols","object","getOwnPropertyNames","extendWithReflect","extended","Reflect","construct","arguments","create","setPrototypeOf","b","testReflectExtension","Module","blessDefinition","contextsByScope","connectedContexts","contexts","connectContextForScope","fetchContextForScope","disconnectContextForScope","ClassMap","getDataKey","getAll","getAttributeName","getAttributeNameForKey","DataMap","setAttribute","removeAttribute","Guide","logger","warnedKeysByObject","warn","warnedKeys","attributeValueContainsToken","TargetSet","targetName","find","targetNames","findTarget","findLegacyTarget","findAll","targets","findAllTargets","findAllLegacyTargets","getSelectorForTargetName","findElement","findAllElements","targetAttributeForScope","getLegacySelectorForTargetName","deprecate","targetDescriptor","targetAttribute","revisedAttributeName","guide","Scope","classes","closest","controllerSelector","queryElements","controllerAttribute","ScopeObserver","scopesByIdentifierByElement","scopeReferenceCounts","scopesByIdentifier","fetchScopesByIdentifierForElement","createScopeForElementAndIdentifier","referenceCount","scopeConnected","scopeDisconnected","Router","scopeObserver","modulesByIdentifier","modules","loadDefinition","unloadIdentifier","connectModule","disconnectModule","getContextForElementAndIdentifier","defaultSchema","Application","documentElement","console","debug","logFormattedMessage","router","Promise","readyState","register","load","registerActionOption","head","rest","shouldLoad","unload","controllers","getControllerForElementAndIdentifier","onerror","groupCollapsed","log","groupEnd","parseValueDefinitionPair","typeDefinition","payload","typeFromObject","parseValueTypeConstant","typeObject","defaultValueType","parseValueTypeDefault","default","propertyPath","parseValueTypeObject","typeFromDefaultValue","typeFromConstant","parseValueTypeDefinition","constant","defaultValuesByType","defaultValueForDefinition","hasCustomDefaultValue","readers","writers","valueDescriptorForTokenAndTypeDefinition","Boolean","Number","String","array","boolean","number","string","writeJSON","stringify","Controller","dispatch","prefix","bubbles","cancelable","CustomEvent","dispatchEvent","classDefinition","targetDefinition","valueDefinitionPairs","propertyDescriptorMap","result","valueDefinitionPair","valueDescriptor","read","write","propertiesForValueDefinitionPair","_default","_Controller","_classCallCheck","_callSuper","_inherits","navigator","clipboard","writeText","contentValue","clipboardFallback","bind","createElement","body","appendChild","setSelectionRange","execCommand","removeChild","prefersDark","localStorage","getItem","matchMedia","setColorScheme","dataset","colorScheme","toggle","setLabel","isDark","removeItem","setItem","setTimeout","hasLabelTarget","label","i18nValue","labelTarget","title","innerText","_defineProperty","i18n","light","dark","updateWizard","openModal","querySelector","buttonImage","append","parentNode","classList","after","remove","canEdit","configValue","disabled","src","icon","iconDisabled","Backend","openModalIframe","url","href","ids","includes","config","rebuildNavigation","connected","_this","hasNavigationTarget","links","sectionTargets","el","scrollIntoView","li","navigationTarget","replaceChildren","_get","_getPrototypeOf","togglerMap","nextId","updateOperation","style","getComputedStyle","padding","parseFloat","paddingTop","paddingBottom","height","clientHeight","maxValue","overflow","maxHeight","expandValue","innerHTML","toggler","collapse","expand","collapseValue","_this2","isExpanded","hasExpanded","altKey","nodeTargets","_this3","hasOperationTarget","hasTogglers","expanded","operationTarget","display","collapseAllValue","collapseAllTitleValue","expandAllValue","expandAllTitleValue","_this4","expandAll","expandAllTitle","collapseAll","collapseAllTitle","inputTargets","loadFallback","reject","initScrollOffset","getScrollOffset","then","discard","store","offset","scrollTo","top","behavior","behaviorValue","block","blockValue","scrollToTarget","autoFocus","autoFocusTarget","readonly","offsetWidth","offsetHeight","autocomplete","focus","scrollTop","sessionStorage","sessionKeyValue","parseInt","sessionKey","_tinymce","tinymce","init","_tinymce2","addController","table","fs","migrateLegacy","_JSON$parse","AjaxRequest","toggleFieldset","collapsedClass","open","close","storeState","i","checkValidity","click","state","hasIdValue","hasTableValue","location","headers","URLSearchParams","idValue","tableValue","_ref","category","collapsed","expandTitleValue","collapseTitleValue","sendRequest","urlValue","REQUEST_TOKEN","requestTokenValue","requestToken","expandTitle","collapseTitle","_regeneratorRuntime","t","r","n","hasOwnProperty","defineProperty","Symbol","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","makeInvokeMethod","tryCatch","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","v","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","_typeof","__await","callInvokeWithMethodAndArg","done","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","__proto__","awrap","async","pop","prev","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","apply","_next","_throw","_defineProperties","_toPropertyKey","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","_isNativeReflectConstruct","valueOf","_setPrototypeOf","toPrimitive","_toPrimitive","blur","toggleToggler","level","folder","item","showChild","expandToggler","updateState","hideChild","collapseToggler","fetchChild","enabled","_fetchChild","_callee","search","response","txt","ul","isFolder","parent","_context","loadToggler","URL","searchParams","refererIdValue","loadActionValue","ok","text","modeValue","typeOf","nextElementSibling","before","fireEvent","_x","_x2","_x3","_x4","_toggleAll","_callee2","promises","_context2","hasExpandedRoot","updateAllState","toggleTargets","childTargets","all","_x5","_updateState","_callee3","_context3","toggleActionValue","_x6","_x7","_x8","_updateAllState","_callee4","_context4","_x9","_x10","rootChildTargets","mode","toggleAction","loadAction","refererId","toggleNavigation","$","getParent","hasClass","removeClass","Contao","lang","Request","post","request_token","addClass","toggleStructure","getStyle","setStyle","field","evalScripts","onRequest","displayBox","loading","onSuccess","inject","getNext","getElements","each","referer_id","hideBox","toggleFileManager","toggleSubpalette","updateVersionNumber","html","fields","VERSION_NUMBER","exec","checked","json","div","javascript","str","Asset","onLoad","Browser","toggleField","rowIcon","pa","img","images","published","getPrevious","getFirst","getElement","HTMLElement","nodeName","indexOf","newSrc","lastIndexOf","image","toggleCheckboxGroup","box","overlay","scroll","getScroll","currentId","popupWindow","themePath","script_url","theme","openModalWindow","width","SimpleModal","show","openModalImage","_opt$title","opt","maxWidth","getSize","x","toInt","min","_opt$title2","openModalSelector","_opt$title3","M","addButton","cancel","buttons","hide","inp","pickerValue","sIndex","frm","frames","val","getElementById","getElementsByTagName","splice","alert","openModalBrowser","field_name","win","source","routes","backend_picker","autoSubmit","Event","hidden","submit","vScrollTo","addEvent","toggleCheckboxes","items","$$","status","substr","cls","className","checkbox","toggleCheckboxElements","makeParentViewSortable","ds","Scroller","onChange","list","Sortables","constrain","opacity","onStart","onComplete","onSort","divs","wrapLevel","getChildren","active","pid","makeMultiSrcSortable","oid","els","lis","j","did","dispose","enableFileTreeDragAndDrop","fixDroppable","droppable","dragHandle","dragElement","rightClick","currentHover","currentHoverTime","expandLink","cloneBase","clone","setPosition","page","getOffsetParent","getPosition","move","Drag","Move","droppables","unDraggableTags","modifiers","onEnter","Date","getTime","createEvent","initEvent","onAjax","removeEvent","onCancel","destroy","onKeyup","onDrop","decodeURIComponent","encodeURIComponent","onLeave","listWizard","addEventsTo","previous","bt","hasEvent","getProperty","keyCode","makeSortable","tableWizard","thead","tbody","children","rows","tr","current","ntr","getIndex","headFirst","getLast","td","cols","tableWizardResize","factor","round","limit","chunks","tableWizardSetWidth","getComputedSize","optionsWizard","keyValueWizard","checkboxWizard","container","span","nspan","enableImageSizeWidgets","widthInput","heightInput","update","readOnly","dimensions","getSelected","enableToggleSelect","thisIndex","startIndex","to","shiftToggle","checkboxes","clickEvent","limitToggler","shift","boundEvent","retrieve","editPreviewWizard","partElement","startPos","imageElement","inputElements","isDrawing","getScale","updateImage","scale","imageSize","setStyles","computedTop","computedLeft","toFloat","rect","abs","styles","getStyles","toFixed","updateValues","getLength","addEvents","mousedown","touchstart","mousemove","touchmove","mouseup","touchend","touchcancel","resize","enableFileTreeUpload","fallbackUrl","dzElement","previewsContainer","clickable","dz","Dropzone","on","reload","dataTransfer","types","link","crawl","progressBar","progressCount","results","debugLog","execRequest","onlyStatusUpdate","responseText","decode","total","pending","percentage","hasDebugLog","finished","summary","warning","subscriberResults","subscriberSummary","hasLog","wasSuccessful","updateData","send","Theme","isWebkit","chrome","safari","userAgent","stopClickPropagation","setupCtrlClick","Features","Touch","Platform","mac","metaKey","ctrlKey","shiftKey","setupTextareaResizing","ie6","ie7","ie8","dummy","line","tween","setupMenuToggle","burger","toggleClass","setAriaControls","setupProfileToggle","tmenu","menu","setupSplitButtonToggle","tab","timer","clearTimeout","Elements","chosen","hgt","initializedRows","saveScrollOffsetEvent","row","command","cloneNode","selects","nselects","insertBefore","nextSibling","Chosen","cbx","previousElementSibling","insertAdjacentElement","updateLink","mutationsList","_step","_iterator","_createForOfIteratorHelper","err","Class","Extends","followRedirects","success","getHeader","secure","stripScripts","script","failure","onFailure","refactor","attach","handles","bound","detach","check","sqrt","pow","mouse","snap","drag","removeEvents","lists","dragOptions","merge","tag","addItems","flatten","removeItems","erase","getClone","Queue","autoAdvance","resume","queue","isRunning","stopOnFailure","onException","SerpPreview","trail","titleField","titleFallbackField","aliasField","descriptionField","descriptionFallbackField","titleTag","shorten","html2string","DOMParser","parseFromString","textContent","getTinymce","tinyMCE","serpTitle","serpUrl","serpDescription","indexEmpty","editor","getContent","activeEditor","initialized","tip","position","useContent","_text","willChange","getBoundingClientRect","rtl","direction","clientWidth","scrollX","scrollY","_toConsumableArray","setup","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","obj","prop","definitionForModuleAndIdentifier","identifierForContextKey","logicalName","customElements","polyfillWrapFlushCallback","BuiltInHTMLElement","wrapperForTheName","raise","errorConstructor","requestSubmit","submitter","DOMException","validateSubmitter","HTMLFormElement","submittersByForm","clickCaptured","candidate","findSubmitterFromClickTarget","FrameLoadingStyle","FetchMethod","FormSubmissionState","FormEnctype","TimingMetric","VisitState","vendor","SubmitEvent","FrameElement","super","loaded","delegateConstructor","observedAttributes","connectedCallback","disconnectedCallback","sourceURLReloaded","attributeChangedCallback","loadingStyleChanged","completeChanged","sourceURLChanged","disabledChanged","lazy","eager","frameLoadingStyleFromString","autoscroll","isLoading","isActive","ownerDocument","isPreview","_b","expandURL","locatable","baseURI","getAnchor","anchorMatch","hash","getAction","getExtension","pathname","getPathComponents","getLastPathComponent","isPrefixedBy","baseURL","origin","endsWith","getPrefix","startsWith","locationIsVisitable","rootLocation","getRequestURL","anchor","toCacheKey","FetchResponse","succeeded","failed","clientError","statusCode","serverError","redirected","isHTML","contentType","header","responseHTML","isAction","activateScriptElement","createdScriptElement","cspNonce","getMetaContent","nonce","destinationElement","sourceElement","copyElementAttributes","nextAnimationFrame","requestAnimationFrame","parseHTMLDocument","unindent","strings","lines","interpolate","indent","uuid","floor","random","markAsBusy","localName","clearBusyState","waitForLoad","timeoutInMilliseconds","once","getHistoryMethodForAction","history","replaceState","pushState","getMetaElement","FetchRequest","abortController","AbortController","resolveRequestPromise","_value","defaultHeaders","abort","perform","fetchOptions","prepareHeadersForRequest","allowRequestToBeIntercepted","requestStarted","receive","willDelegateErrorHandling","requestErrored","requestFinished","fetchResponse","defaultPrevented","requestPreventedHandlingResponse","requestSucceededWithResponse","requestFailedWithResponse","credentials","redirect","isIdempotent","signal","abortSignal","referrer","Accept","acceptResponseType","mimeType","requestInterception","request","AppearanceObserver","intersect","lastEntry","isIntersecting","elementAppearedInViewport","intersectionObserver","IntersectionObserver","unobserve","StreamMessage","fragment","streamElement","importNode","inertScriptElement","templateElement","replaceWith","importStreamElements","template","createDocumentFragment","FormSubmission","formElement","mustRedirect","formData","FormData","buildFormData","File","mergeFormDataEntries","fetchRequest","confirmMethod","_element","_submitter","confirm","put","patch","fetchMethodFromString","formElementAction","enctype","urlEncoded","stringFormData","encoding","multipart","plain","formEnctypeFromString","requesting","confirmationMessage","stopping","stopped","cookieName","cookie","getCookieValue","requestAcceptsTurboStreamResponse","_request","waiting","formSubmission","formSubmissionStarted","formSubmissionFailedWithResponse","requestMustRedirect","responseSucceededWithoutRedirect","formSubmissionErrored","receiving","formSubmissionSucceededWithResponse","formSubmissionFinished","Snapshot","activeElement","hasAnchor","getElementForAnchor","firstAutofocusableElement","permanentElements","queryPermanentElementsAll","getPermanentElementById","getPermanentElementMapForSnapshot","snapshot","permanentElementMap","currentPermanentElement","newPermanentElement","FormSubmitObserver","submitCaptured","submitBubbled","submissionDoesNotDismissDialog","getElementsByName","HTMLIFrameElement","submissionDoesNotTargetIFrame","willSubmitForm","formSubmitted","View","resolveRenderPromise","resolveInterceptionPromise","scrollToAnchor","scrollToElement","focusElement","scrollToPosition","scrollToAnchorFromLocation","scrollRoot","scrollToTop","render","renderer","shouldRender","newSnapshot","renderPromise","prepareToRenderSnapshot","renderInterception","renderElement","allowsImmediateRender","renderSnapshot","viewRenderedSnapshot","preloadOnLoadLinksForView","finishRenderingSnapshot","invalidate","reloadReason","reason","viewInvalidated","markAsPreview","prepareToRender","finishRendering","FrameView","LinkInterceptor","clickBubbled","respondsToEventTarget","linkClicked","shouldInterceptLinkClick","originalEvent","linkClickIntercepted","willVisit","_event","LinkClickObserver","MouseEvent","clickEventIsSignificant","composedPath","findLinkFromClickTarget","doesNotTargetIFrame","getLocationForLink","willFollowLinkToLocation","followedLinkToLocation","isContentEditable","which","FormLinkClickObserver","linkInterceptor","willSubmitFormLinkToLocation","turboFrame","turboAction","turboConfirm","submittedFormLinkToLocation","Bardo","preservingPermanentElements","bardo","enter","leave","enteringBardo","replaceNewPermanentElementWithPlaceholder","replaceCurrentPermanentElementWithClone","replacePlaceholderWithPermanentElement","leavingBardo","permanentElement","placeholder","createPlaceholderForPermanentElement","getPlaceholderById","placeholders","Renderer","currentSnapshot","willRender","promise","resolvingFunctions","focusFirstAutofocusableElement","connectedSnapshot","elementIsFocusable","currentElement","newElement","FrameRenderer","destinationRange","createRange","selectNodeContents","deleteContents","frameElement","sourceRange","extractContents","loadFrameElement","scrollFrameIntoView","activateScriptElements","willRenderFrame","firstElementChild","readScrollBehavior","newScriptElements","activatedScriptElement","ProgressBar","hiding","visible","trickle","setValue","stylesheetElement","createStylesheetElement","progressElement","createProgressElement","installStylesheetElement","defaultCSS","animationDuration","installProgressElement","startTrickling","fadeProgressElement","uninstallProgressElement","stopTrickling","firstChild","trickleInterval","setInterval","clearInterval","HeadSnapshot","detailsByOuterHTML","elementIsNoscript","elementWithoutNonce","outerHTML","elementType","tracked","elementIsTracked","trackedElementSignature","getScriptElementsNotInSnapshot","getElementsMatchingTypeNotInSnapshot","getStylesheetElementsNotInSnapshot","matchedType","provisionalElements","getMetaValue","findMetaElementByName","elementIsMetaElementWithName","elementIsScript","elementIsStylesheet","PageSnapshot","headSnapshot","fromHTMLString","fromDocument","fromElement","clonedElement","selectElements","clonedSelectElements","option","selectedOptions","selected","clonedPasswordInput","headElement","getSetting","cacheControlValue","isPreviewable","isCacheable","isVisitable","defaultOptions","historyChanged","visitCachedSnapshot","updateHistory","shouldCacheSnapshot","acceptsStreamResponse","SystemStatusCode","PageStage","Visit","restorationIdentifier","timingMetrics","followedRedirect","scrolled","snapshotCached","snapshotHTML","isSamePage","locationWithActionIsSamePage","adapter","view","restorationData","getRestorationDataForIdentifier","silent","recordTimingMetric","visitStart","visitStarted","cancelRender","canceled","visitEnd","completed","followRedirect","visitCompleted","fail","visitFailed","changeHistory","issueRequest","hasPreloadedResponse","simulateRequest","shouldIssueRequest","startRequest","recordResponse","finishRequest","requestStart","visitRequestStarted","isSuccessful","visitRequestCompleted","visitRequestFailedWithStatusCode","requestEnd","visitRequestFinished","loadResponse","cacheSnapshot","renderPage","performScroll","visitRendered","renderError","getCachedSnapshot","getCachedSnapshotForLocation","getPreloadedSnapshot","hasCachedSnapshot","loadCachedSnapshot","redirectedToLocation","visitProposedToLocation","goToSamePageAnchor","_response","contentTypeMismatch","_error","networkFailure","forceReloaded","scrollToRestoredPosition","visitScrolledToSamePageLocation","lastRenderedLocation","scrollPosition","metric","getTimingMetrics","frame","cancelAnimationFrame","BrowserAdapter","session","showProgressBar","startVisit","visit","showVisitProgressBarAfterDelay","timeoutFailure","_visit","hideVisitProgressBar","pageInvalidated","_formSubmission","showFormProgressBarAfterDelay","hideFormProgressBar","visitProgressBarTimeout","progressBarDelay","formProgressBarTimeout","CacheObserver","removeStaleElements","staleElements","FrameRedirector","formSubmitObserver","_location","shouldRedirect","findFrameElement","shouldSubmit","meta","submissionIsNavigatable","elementIsNavigatable","History","pageLoaded","onPopState","shouldHandlePopState","turbo","historyPoppedToLocationWithRestorationIdentifier","onPageLoad","updateRestorationData","additionalData","assumeControlOfScrollRestoration","previousScrollRestoration","scrollRestoration","relinquishControlOfScrollRestoration","pageIsLoaded","Navigator","proposeVisit","allowsVisitingLocationWithAction","currentVisit","submitForm","clearSnapshotCache","visitOptions","getActionForFormSubmission","currentAnchor","isRestorationToTop","oldURL","newURL","PageObserver","stage","initial","interpretReadyState","pageIsInteractive","pageIsComplete","pageWillUnload","interactive","pageBecameInteractive","ScrollObserver","onScroll","updatePosition","pageXOffset","pageYOffset","scrollPositionChanged","StreamMessageRenderer","permanentElementsInDocument","permanentElementInDocument","elementInStream","getPermanentElementMapForFragment","StreamObserver","sources","inspectFetchResponse","fetchResponseFromEvent","fetchResponseIsStream","receiveMessageResponse","receiveMessageEvent","receiveMessageHTML","connectStreamSource","streamSourceIsConnected","disconnectStreamSource","receivedMessageFromStream","ErrorRenderer","replaceChild","replaceHeadAndBody","newHead","replaceableElement","scriptElements","PageRenderer","HTMLBodyElement","trackedElementsAreIdentical","mergeHead","replaceBody","currentHeadSnapshot","newHeadSnapshot","newStylesheetElements","copyNewHeadStylesheetElements","copyNewHeadScriptElements","removeCurrentHeadProvisionalElements","copyNewHeadProvisionalElements","activateNewBody","assignNewBody","loadingElements","newHeadStylesheetElements","newHeadScriptElements","currentHeadProvisionalElements","newHeadProvisionalElements","adoptNode","activateNewBodyScriptElements","newBodyScriptElements","SnapshotCache","snapshots","touch","unshift","PageView","snapshotCache","viewWillCacheSnapshot","cachedSnapshot","Preloader","preloadURL","extendURLWithDeprecatedProperties","deprecatedLocationPropertyDescriptors","absoluteURL","StreamActions","targetElements","templateContent","removeDuplicateTargetChildren","prepend","preloader","pageObserver","cacheObserver","linkClickObserver","scrollObserver","streamObserver","formLinkClickObserver","frameRedirector","streamMessageRenderer","drive","formMode","disable","registerAdapter","renderStreamMessage","clearCache","setProgressBarDelay","delay","setFormMode","applicationAllowsFollowingLinkToLocation","getActionForLink","applicationAllowsVisitingLocation","notifyApplicationAfterVisitingLocation","notifyApplicationAfterPageLoad","notifyApplicationAfterVisitingSamePageLocation","notifyApplicationBeforeCachingSnapshot","notifyApplicationBeforeRender","_snapshot","_isPreview","notifyApplicationAfterRender","frameLoaded","notifyApplicationAfterFrameLoad","frameRendered","notifyApplicationAfterFrameRender","ev","notifyApplicationAfterClickingLinkToLocation","notifyApplicationBeforeVisitingLocation","newBody","timing","HashChangeEvent","submitterIsNavigatable","withinFrame","cache","resetCacheControl","setCacheControl","exemptPageFromCache","exemptPageFromPreview","setMetaContent","navigator$1","Turbo","freeze","setConfirmMethod","getFrameElementById","activateElement","currentURL","StreamElement","performAction","beforeRenderEvent","duplicateChildren","existingChildren","flatMap","newChildrenIds","actionFunction","targetElementsById","targetElementsByQuery","HTMLTemplateElement","description","newStream","StreamSourceElement","streamSource","WebSocket","EventSource","fetchResponseLoaded","_fetchResponse","currentFetchRequest","resolveVisitPromise","hasBeenLoaded","ignoredAttributes","previousFrameElement","appearanceObserver","loadingStyle","loadSourceURL","isIgnoringChangesTo","ignoringChangesToAttribute","sourceURL","newFrameElement","extractForeignFrameElement","willHandleFrameMissingFromResponse","visitResponse","shouldInterceptNavigation","navigateFrame","currentNavigationElement","proposeVisitIfNavigatedWithAction","newFrame","_newElement","pageSnapshot","withCurrentNavigationElement","getVisitAction","Response","wrapped","CSS","escape","formActionIsVisitable","currentScript","process","require","mooDomreadyFired"],"sourceRoot":""}