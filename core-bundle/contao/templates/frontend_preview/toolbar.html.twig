{% trans_default_domain 'contao_default' %}

{% set toolbar_attributes = attrs(attributes)
    .addClass('cto-toolbar__inside')
    .mergeWith(toolbar_attributes|default)
%}

<div class="cto-toolbar__open">
    <a href="#" title="{{ 'MSC.openToolbar'|trans }}">{{ include('@Contao/web_debug_toolbar/contao.svg.twig', {fill: '#fff'}) }}</a>
</div>
<div{{ toolbar_attributes }}>
    <form action="{{ action }}" method="post" autocomplete="off">
        <div class="formbody">
            {% block formbody %}
                {% block badge_title %}
                    {% if badgeTitle %}
                        <span class="badge-title">{{ badgeTitle }}</span>
                    {% endif %}
                {% endblock %}
                <input type="hidden" name="FORM_SUBMIT" value="tl_switch">
                <input type="hidden" name="REQUEST_TOKEN" value="{{ contao.request_token }}">
                {% block widgets %}
                    <div>
                        <button type="button" id="copyPublishedPath" class="tl_submit">{{ 'MSC.copyURL'|trans([], 'contao_default') }}</button>
                        {% if share is not empty %}
                            <a href="{{ share }}" target="_blank" class="tl_submit cto-toolbar__share-url">{{ 'MSC.shareURL'|trans([], 'contao_default') }}</a>
                        {% endif %}
                    </div>
                    {% if canSwitchUser %}
                        <div>
                            <label for="ctrl_user">{{ 'MSC.feUser'|trans }}:</label>
                            <input type="text" name="user" id="ctrl_user" list="userlist" class="tl_text user" placeholder="{{ 'MSC.username'|trans }}" value="{{ user }}">
                            <datalist id="userlist"></datalist>
                        </div>
                    {% endif %}
                    <div>
                        <label for="ctrl_unpublished">{{ 'MSC.hiddenElements'|trans }}:</label>
                        <select name="unpublished" id="ctrl_unpublished" class="tl_select">
                            <option value="hide">{{ 'MSC.hiddenHide'|trans }}</option>
                            <option value="show"{% if show %} selected{% endif %}>{{ 'MSC.hiddenShow'|trans }}</option>
                        </select>
                        <button type="submit" class="tl_submit">{{ 'MSC.apply'|trans }}</button>
                    </div>
                {% endblock %}
            {% endblock %}
        </div>
    </form>
    <button class="cto-toolbar__close" title="{{ 'MSC.closeToolbar'|trans }}">
        {{ backend_icon('close', attributes: attrs().set('width', 20).set('height', 20).set('aria-hidden')) }}
    </button>
</div>
<div class="cto-toolbar__clear"></div>
